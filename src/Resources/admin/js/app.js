(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(t,e){var i,s,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{s="function"==typeof clearTimeout?clearTimeout:r}catch(t){s=r}}();var l,d=[],u=!1,c=-1;function h(){u&&l&&(u=!1,l.length?d=l.concat(d):c=-1,d.length&&f())}function f(){if(!u){var t=a(h);u=!0;for(var e=d.length;e;){for(l=d,d=[];++c<e;)l&&l[c].run();c=-1,e=d.length}l=null,u=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===r||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new p(t,e)),1!==d.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},133:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={name:"gettext-extension",props:["gettext_editor"],data:function(){return{translates:{},plurals:[],plural_forms:"",query:null,changes:{},limit:20,loaded:!1}},mounted:function(){this.loadTranslations()},computed:{filtratedTranslates:function(){var t={},e=(this.query+"").toLowerCase(),i=0;for(var s in this.translates)(0==this.limit||i<this.limit)&&(!this.query||this.hasChange(s)||this.translates[s].join("").toLowerCase().indexOf(e)>-1||s.toLowerCase().indexOf(e)>-1)&&(t[s]=this.translates[s],i++);return t},fullCount:function(){return Object.keys(this.translates).length},resultLength:function(){return Object.keys(this.filtratedTranslates).length},pluralLength:function(){var t=this.plural_forms.match(/nplurals\=(\d+)/);return parseInt(t[1]||2)},getPluralsIntervals:function getPluralsIntervals(){for(var forms=this.plural_forms.split(";")[1].replace("plural=",""),plurals=[],is_double=2==this.pluralLength,i=0;i<this.pluralLength;i++){for(var start=null,end=null,a=1;a<100;a++){var statement=forms.replace(/n/g,a),condition=eval(statement),result=parseInt(condition);if(null===start&&(is_double&&(0==i&&!1===condition||i>0&&!0===condition)||result===i)&&(start=a),null!==start&&null===end&&!is_double&&result!=i){i>0&&(end=a-1);break}}plurals.push([start,start==end?null:end])}return plurals=plurals.map(function(t,e){t=t.filter(function(t){return t});return e+1==plurals.length&&1==t.length?t[0]+"+":t.join(" - ")}),plurals}},methods:{trans:function(t){return this.$root.trans(t)},close:function(){this.$parent.gettext_editor=null},loadTranslations:function(){this.$http.get(this.$root.requests.translations.replace(":id",this.gettext_editor.id)).then(function(t){var e=t.data.messages;this.plurals=t.data.plurals,this.plural_forms=t.data["plural-forms"],this.translates=t.data.messages[Object.keys(e)[0]]||{},this.loaded=!0})},isPlural:function(t){return this.plurals.indexOf(t)>-1},getPluralLength:function(t){return this.isPlural(t)?this.pluralLength:1},getPluralsPlaceholder:function(t,e){return this.isPlural(t)?t.indexOf("%d")>-1?t.replace("%d",this.getPluralsIntervals[e]):this.getPluralsIntervals[e]:""},getValue:function(t,e){return t&&t[e]||""},changeText:function(t,e,i){var s=t.target.value;this.isPlural(e)?(e in this.changes||(this.changes[e]=this.translates[e]),this.changes[e][i]=s):this.changes[e]=s,this.translates[e][i]=s},saveAndClose:function(){var t=this,e=this.$root.requests.get("update_translations",{id:this.gettext_editor.id});this.$http.post(e,{changes:JSON.stringify(this.changes)}).then(function(){t.close()})},hasChange:function(t){return t in this.changes}}}},134:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},135:function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var s,n,o,r,a,l=1,d={},u=!1,c=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?s=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},s=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,s=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):s=function(t){setTimeout(p,0,t)}:(r="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(r)&&p(+e.data.slice(r.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),s=function(e){t.postMessage(r+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return d[l]=n,s(l),l++},h.clearImmediate=f}function f(t){delete d[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=d[t];if(e){u=!0;try{!function(t){var e=t.callback,s=t.args;switch(s.length){case 0:e();break;case 1:e(s[0]);break;case 2:e(s[0],s[1]);break;case 3:e(s[0],s[1],s[2]);break;default:e.apply(i,s)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(2),i(132))},141:function(t,e,i){var s,n,o;n=[i(1)],void 0===(o="function"==typeof(s=function(t){var e,i,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(t.event.fixHooks)for(var r=s.length;r;)t.event.fixHooks[s[--r]]=t.event.mouseHooks;var a=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],l,!1);else this.onmousewheel=l;t.data(this,"mousewheel-line-height",a.getLineHeight(this)),t.data(this,"mousewheel-page-height",a.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],l,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),s=i["offsetParent"in t.fn?"offsetParent":"parent"]();return s.length||(s=t("body")),parseInt(s.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(s){var n=s||window.event,r=o.call(arguments,1),l=0,c=0,h=0,f=0,p=0,m=0;if((s=t.event.fix(n)).type="mousewheel","detail"in n&&(h=-1*n.detail),"wheelDelta"in n&&(h=n.wheelDelta),"wheelDeltaY"in n&&(h=n.wheelDeltaY),"wheelDeltaX"in n&&(c=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(c=-1*h,h=0),l=0===h?c:h,"deltaY"in n&&(h=-1*n.deltaY,l=h),"deltaX"in n&&(c=n.deltaX,0===h&&(l=-1*c)),0!==h||0!==c){if(1===n.deltaMode){var g=t.data(this,"mousewheel-line-height");l*=g,h*=g,c*=g}else if(2===n.deltaMode){var v=t.data(this,"mousewheel-page-height");l*=v,h*=v,c*=v}if(f=Math.max(Math.abs(h),Math.abs(c)),(!i||f<i)&&(i=f,u(n,f)&&(i/=40)),u(n,f)&&(l/=40,c/=40,h/=40),l=Math[l>=1?"floor":"ceil"](l/i),c=Math[c>=1?"floor":"ceil"](c/i),h=Math[h>=1?"floor":"ceil"](h/i),a.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();p=s.clientX-_.left,m=s.clientY-_.top}return s.deltaX=c,s.deltaY=h,s.deltaFactor=i,s.offsetX=p,s.offsetY=m,s.deltaMode=0,r.unshift(s,l,c,h),e&&clearTimeout(e),e=setTimeout(d,200),(t.event.dispatch||t.event.handle).apply(this,r)}}function d(){i=null}function u(t,e){return a.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})})?s.apply(e,n):s)||(t.exports=o)},142:function(t,e,i){var s={"./af":5,"./af.js":5,"./ar":6,"./ar-dz":7,"./ar-dz.js":7,"./ar-kw":8,"./ar-kw.js":8,"./ar-ly":9,"./ar-ly.js":9,"./ar-ma":10,"./ar-ma.js":10,"./ar-sa":11,"./ar-sa.js":11,"./ar-tn":12,"./ar-tn.js":12,"./ar.js":6,"./az":13,"./az.js":13,"./be":14,"./be.js":14,"./bg":15,"./bg.js":15,"./bm":16,"./bm.js":16,"./bn":17,"./bn.js":17,"./bo":18,"./bo.js":18,"./br":19,"./br.js":19,"./bs":20,"./bs.js":20,"./ca":21,"./ca.js":21,"./cs":22,"./cs.js":22,"./cv":23,"./cv.js":23,"./cy":24,"./cy.js":24,"./da":25,"./da.js":25,"./de":26,"./de-at":27,"./de-at.js":27,"./de-ch":28,"./de-ch.js":28,"./de.js":26,"./dv":29,"./dv.js":29,"./el":30,"./el.js":30,"./en-SG":31,"./en-SG.js":31,"./en-au":32,"./en-au.js":32,"./en-ca":33,"./en-ca.js":33,"./en-gb":34,"./en-gb.js":34,"./en-ie":35,"./en-ie.js":35,"./en-il":36,"./en-il.js":36,"./en-nz":37,"./en-nz.js":37,"./eo":38,"./eo.js":38,"./es":39,"./es-do":40,"./es-do.js":40,"./es-us":41,"./es-us.js":41,"./es.js":39,"./et":42,"./et.js":42,"./eu":43,"./eu.js":43,"./fa":44,"./fa.js":44,"./fi":45,"./fi.js":45,"./fo":46,"./fo.js":46,"./fr":47,"./fr-ca":48,"./fr-ca.js":48,"./fr-ch":49,"./fr-ch.js":49,"./fr.js":47,"./fy":50,"./fy.js":50,"./ga":51,"./ga.js":51,"./gd":52,"./gd.js":52,"./gl":53,"./gl.js":53,"./gom-latn":54,"./gom-latn.js":54,"./gu":55,"./gu.js":55,"./he":56,"./he.js":56,"./hi":57,"./hi.js":57,"./hr":58,"./hr.js":58,"./hu":59,"./hu.js":59,"./hy-am":60,"./hy-am.js":60,"./id":61,"./id.js":61,"./is":62,"./is.js":62,"./it":63,"./it-ch":64,"./it-ch.js":64,"./it.js":63,"./ja":65,"./ja.js":65,"./jv":66,"./jv.js":66,"./ka":67,"./ka.js":67,"./kk":68,"./kk.js":68,"./km":69,"./km.js":69,"./kn":70,"./kn.js":70,"./ko":71,"./ko.js":71,"./ku":72,"./ku.js":72,"./ky":73,"./ky.js":73,"./lb":74,"./lb.js":74,"./lo":75,"./lo.js":75,"./lt":76,"./lt.js":76,"./lv":77,"./lv.js":77,"./me":78,"./me.js":78,"./mi":79,"./mi.js":79,"./mk":80,"./mk.js":80,"./ml":81,"./ml.js":81,"./mn":82,"./mn.js":82,"./mr":83,"./mr.js":83,"./ms":84,"./ms-my":85,"./ms-my.js":85,"./ms.js":84,"./mt":86,"./mt.js":86,"./my":87,"./my.js":87,"./nb":88,"./nb.js":88,"./ne":89,"./ne.js":89,"./nl":90,"./nl-be":91,"./nl-be.js":91,"./nl.js":90,"./nn":92,"./nn.js":92,"./pa-in":93,"./pa-in.js":93,"./pl":94,"./pl.js":94,"./pt":95,"./pt-br":96,"./pt-br.js":96,"./pt.js":95,"./ro":97,"./ro.js":97,"./ru":98,"./ru.js":98,"./sd":99,"./sd.js":99,"./se":100,"./se.js":100,"./si":101,"./si.js":101,"./sk":102,"./sk.js":102,"./sl":103,"./sl.js":103,"./sq":104,"./sq.js":104,"./sr":105,"./sr-cyrl":106,"./sr-cyrl.js":106,"./sr.js":105,"./ss":107,"./ss.js":107,"./sv":108,"./sv.js":108,"./sw":109,"./sw.js":109,"./ta":110,"./ta.js":110,"./te":111,"./te.js":111,"./tet":112,"./tet.js":112,"./tg":113,"./tg.js":113,"./th":114,"./th.js":114,"./tl-ph":115,"./tl-ph.js":115,"./tlh":116,"./tlh.js":116,"./tr":117,"./tr.js":117,"./tzl":118,"./tzl.js":118,"./tzm":119,"./tzm-latn":120,"./tzm-latn.js":120,"./tzm.js":119,"./ug-cn":121,"./ug-cn.js":121,"./uk":122,"./uk.js":122,"./ur":123,"./ur.js":123,"./uz":124,"./uz-latn":125,"./uz-latn.js":125,"./uz.js":124,"./vi":126,"./vi.js":126,"./x-pseudo":127,"./x-pseudo.js":127,"./yo":128,"./yo.js":128,"./zh-cn":129,"./zh-cn.js":129,"./zh-hk":130,"./zh-hk.js":130,"./zh-tw":131,"./zh-tw.js":131};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=142},144:function(t,e){(function(e){t.exports=e}).call(this,{})},146:function(t,e,i){(function(t){var s=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(n.call(setTimeout,s,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,s,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(s,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(135),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(2))},147:function(t,e){},148:function(t,e,i){var s,n;!function(o){"use strict";void 0===(n="function"==typeof(s=o)?s.call(e,i,e,t):s)||(t.exports=n)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var t,e,i,s,n,o,r,a,l,d,u,c,h,f,p,m,g,v,_,b,y,w,x,$,C,k,S,T,D=[],M=!1,O=!1,j=!1,F=[],E=!1,A=!1,I=[],R=/\s+/g,P="Sortable"+(new Date).getTime(),L=window,N=L.document,B=L.parseInt,q=L.setTimeout,z=L.jQuery||L.Zepto,V=L.Polymer,H={capture:!1,passive:!1},Y=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),G=!!navigator.userAgent.match(/Edge/i),X=!!navigator.userAgent.match(/firefox/i),W=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),U=!!navigator.userAgent.match(/iP(ad|od|hone)/i),K=G||Y?"cssFloat":"float",Q="draggable"in N.createElement("div"),J=function(){if(Y)return!1;var t=N.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),Z=!1,tt=!1,et=Math.abs,it=Math.min,st=Math.max,nt=[],ot=function(t,e){var i=$t(t),s=B(i.width)-B(i.paddingLeft)-B(i.paddingRight)-B(i.borderLeftWidth)-B(i.borderRightWidth),n=Ot(t,0,e),o=Ot(t,1,e),r=n&&$t(n),a=o&&$t(o),l=r&&B(r.marginLeft)+B(r.marginRight)+qt(n).width,d=a&&B(a.marginLeft)+B(a.marginRight)+qt(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&"none"!==r.float){var u="left"===r.float?"left":"right";return!o||"both"!==a.clear&&a.clear!==u?"horizontal":"vertical"}return n&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=s&&"none"===i[K]||o&&"none"===i[K]&&l+d>s)?"vertical":"horizontal"},rt=function(t,e){if(!t||!t.getBoundingClientRect)return at();var i=t,s=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=$t(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i||!i.getBoundingClientRect||i===N.body)return at();if(s||e)return i;s=!0}}}while(i=i.parentNode);return at()},at=function(){return Y?N.documentElement:N.scrollingElement},lt=function(t,e,i){t.scrollLeft+=e,t.scrollTop+=i},dt=Rt(function(t,e,i,s){if(e.scroll){var n=i?i[P]:window,o=e.scrollSensitivity,r=e.scrollSpeed,u=t.clientX,c=t.clientY,h=at(),f=!1;l!==i&&(ut(),a=e.scroll,d=e.scrollFn,!0===a&&(a=rt(i,!0),l=a));var p=0,m=a;do{var g,v,_,b,w,x,$,C,k,S=m,T=qt(S),O=T.top,j=T.bottom,F=T.left,E=T.right,A=T.width,I=T.height;if(g=S.scrollWidth,v=S.scrollHeight,_=$t(S),C=S.scrollLeft,k=S.scrollTop,S===h?(x=A<g&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),$=I<v&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(x=A<g&&("auto"===_.overflowX||"scroll"===_.overflowX),$=I<v&&("auto"===_.overflowY||"scroll"===_.overflowY)),b=x&&(et(E-u)<=o&&C+A<g)-(et(F-u)<=o&&!!C),w=$&&(et(j-c)<=o&&k+I<v)-(et(O-c)<=o&&!!k),!D[p])for(var R=0;R<=p;R++)D[R]||(D[R]={});D[p].vx==b&&D[p].vy==w&&D[p].el===S||(D[p].el=S,D[p].vx=b,D[p].vy=w,clearInterval(D[p].pid),!S||0==b&&0==w||(f=!0,D[p].pid=setInterval(function(){s&&0===this.layer&&(vt.active._emulateDragOver(!0),vt.active._onTouchMove(y,!0));var e=D[this.layer].vy?D[this.layer].vy*r:0,i=D[this.layer].vx?D[this.layer].vx*r:0;"function"==typeof d&&"continue"!==d.call(n,i,e,t,y,D[this.layer].el)||lt(D[this.layer].el,i,e)}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&m!==h&&(m=rt(m,!1)));M=f}},30),ut=function(){D.forEach(function(t){clearInterval(t.pid)}),D=[]},ct=function(t){function e(t,i){return function(s,n,o,r){var a=s.options.group.name&&n.options.group.name&&s.options.group.name===n.options.group.name;if(null==t&&(i||a))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(s,n,o,r),i)(s,n,o,r);var l=(i?s:n).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},s=t.group;s&&"object"==typeof s||(s={name:s}),i.name=s.name,i.checkPull=e(s.pull,!0),i.checkPut=e(s.put),i.revertClone=s.revertClone,t.group=i},ht=function(e){t&&t.parentNode&&t.parentNode[P]&&t.parentNode[P]._computeIsAligned(e)},ft=function(){!J&&i&&$t(i,"display","none")},pt=function(){!J&&i&&$t(i,"display","")};N.addEventListener("click",function(t){if(j)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),j=!1,!1},!0);var mt,gt=function(e){if(t){var i=function(t,e){for(var i=0;i<F.length;i++)if(!jt(F[i])){var s=qt(F[i]),n=F[i][P].options.emptyInsertThreshold,o=t>=s.left-n&&t<=s.right+n,r=e>=s.top-n&&e<=s.bottom+n;if(n&&o&&r)return F[i]}}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(i){var s={};for(var n in e)s[n]=e[n];s.target=s.rootEl=i,s.preventDefault=void 0,s.stopPropagation=void 0,i[P]._onDragOver(s)}}};function vt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(t);this.el=t,this.options=e=Pt({},e),t[P]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ot(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:B(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==vt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var s in i)!(s in e)&&(e[s]=i[s]);for(var n in ct(e),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!e.forceFallback&&Q,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?yt(t,"pointerdown",this._onTapStart):(yt(t,"mousedown",this._onTapStart),yt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(yt(t,"dragover",this),yt(t,"dragenter",this)),F.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[])}function _t(t,e,i,s){if(t){i=i||N;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&It(t,e):It(t,e))||s&&t===i)return t;if(t===i)break}while(t=bt(t))}return null}function bt(t){return t.host&&t!==N&&t.host.nodeType?t.host:t.parentNode}function yt(t,e,i){t.addEventListener(e,i,!Y&&H)}function wt(t,e,i){t.removeEventListener(e,i,!Y&&H)}function xt(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(R," ").replace(" "+e+" "," ");t.className=(s+(i?" "+e:"")).replace(R," ")}}function $t(t,e,i){var s=t&&t.style;if(s){if(void 0===i)return N.defaultView&&N.defaultView.getComputedStyle?i=N.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in s||-1!==e.indexOf("webkit")||(e="-webkit-"+e),s[e]=i+("string"==typeof i?"":"px")}}function Ct(t){var e="";do{var i=$t(t,"transform");i&&"none"!==i&&(e=i+" "+e)}while(t=t.parentNode);return window.DOMMatrix?new DOMMatrix(e):window.WebKitCSSMatrix?new WebKitCSSMatrix(e):window.CSSMatrix?new CSSMatrix(e):void 0}function kt(t,e,i){if(t){var s=t.getElementsByTagName(e),n=0,o=s.length;if(i)for(;n<o;n++)i(s[n],n);return s}return[]}function St(t,e,i,n,o,r,a,l,d,u,c){var h,f=(t=t||e[P]).options,p="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||Y||G?(h=N.createEvent("Event")).initEvent(i,!0,!0):h=new CustomEvent(i,{bubbles:!0,cancelable:!0}),h.to=o||e,h.from=r||e,h.item=n||e,h.clone=s,h.oldIndex=a,h.newIndex=l,h.oldDraggableIndex=d,h.newDraggableIndex=u,h.originalEvent=c,h.pullMode=m?m.lastPutMode:void 0,e&&e.dispatchEvent(h),f[p]&&f[p].call(t,h)}function Tt(t,e,i,s,n,o,r,a){var l,d,u=t[P],c=u.options.onMove;return!window.CustomEvent||Y||G?(l=N.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=s,l.related=n||e,l.relatedRect=o||qt(e),l.willInsertAfter=a,l.originalEvent=r,t.dispatchEvent(l),c&&(d=c.call(u,l,r)),d}function Dt(t){t.draggable=!1}function Mt(){Z=!1}function Ot(e,s,n){for(var o=0,r=0,a=e.children;r<a.length;){if("none"!==a[r].style.display&&a[r]!==i&&a[r]!==t&&_t(a[r],n.draggable,e,!1)){if(o===s)return a[r];o++}r++}return null}function jt(t){for(var e=t.lastElementChild;e&&(e===i||"none"===$t(e,"display"));)e=e.previousElementSibling;return e||null}function Ft(e){return At(t)<At(e)?1:-1}function Et(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,s=0;i--;)s+=e.charCodeAt(i);return s.toString(36)}function At(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"===t.nodeName.toUpperCase()||t===s||e&&!It(t,e)||i++;return i}function It(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function Rt(t,e){return function(){if(!mt){var i=arguments,s=this;mt=q(function(){1===i.length?t.call(s,i[0]):t.apply(s,i),mt=void 0},e)}}}function Pt(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Lt(t){return V&&V.dom?V.dom(t).cloneNode(!0):z?z(t).clone(!0)[0]:t.cloneNode(!0)}function Nt(t){return q(t,0)}function Bt(t){return clearTimeout(t)}function qt(t,e,i,s){if(t.getBoundingClientRect||t===L){var n,o,r,a,l,d,u;if(t!==L&&t!==at()?(o=(n=t.getBoundingClientRect()).top,r=n.left,a=n.bottom,l=n.right,d=n.height,u=n.width):(o=0,r=0,a=window.innerHeight,l=window.innerWidth,d=window.innerHeight,u=window.innerWidth),s&&t!==L&&(i=i||t.parentNode,!Y))do{if(i&&i.getBoundingClientRect&&"none"!==$t(i,"transform")){var c=i.getBoundingClientRect();o-=c.top+B($t(i,"border-top-width")),r-=c.left+B($t(i,"border-left-width")),a=o+n.height,l=r+n.width;break}}while(i=i.parentNode);if(e&&t!==L){var h=Ct(i||t),f=h&&h.a,p=h&&h.d;h&&(a=(o/=p)+(d/=p),l=(r/=f)+(u/=f))}return{top:o,left:r,bottom:a,right:l,width:u,height:d}}}function zt(t,e){for(var i=rt(t,!0),s=qt(t)[e];i;){var n=qt(i)[e];if(!("top"===e||"left"===e?s>=n:s<=n))return i;if(i===at())break;i=rt(i,!1)}return!1}function Vt(t){var e=0,i=0,s=at();if(t)do{var n=Ct(t),o=n.a,r=n.d;e+=t.scrollLeft*o,i+=t.scrollTop*r}while(t!==s&&(t=t.parentNode));return[e,i]}return vt.prototype={constructor:vt,_computeIsAligned:function(e){var s;if(i&&!J?(ft(),s=N.elementFromPoint(e.clientX,e.clientY),pt()):s=e.target,s=_t(s,this.options.draggable,this.el,!1),!tt&&t&&t.parentNode===this.el){for(var n,o,r,a,l,d,u,c,h=this.el.children,f=0;f<h.length;f++)_t(h[f],this.options.draggable,this.el,!1)&&h[f]!==s&&(h[f].sortableMouseAligned=(n=e.clientX,o=e.clientY,r=h[f],a=this._getDirection(e,null),this.options,l=void 0,d=void 0,u=void 0,c=void 0,l=qt(r),d="vertical"===a?l.left:l.top,u="vertical"===a?l.right:l.bottom,d<(c="vertical"===a?n:o)&&c<u));_t(s,this.options.draggable,this.el,!0)||(x=null),tt=!0,q(function(){tt=!1},30)}},_getDirection:function(e,i){return"function"==typeof this.options.direction?this.options.direction.call(this,e,i,t):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i,s,n=this,o=this.el,a=this.options,l=a.preventOnFilter,d=e.type,u=e.touches&&e.touches[0],c=(u||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,f=a.filter;if(function(t){nt.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var s=e[i];s.checked&&nt.push(s)}}(o),!t&&!(/mousedown|pointerdown/.test(d)&&0!==e.button||a.disabled||h.isContentEditable||(c=_t(c,a.draggable,o,!1),r===c))){if(i=At(c),s=At(c,a.draggable),"function"==typeof f){if(f.call(this,e,c,this))return St(n,h,"filter",c,o,o,i,void 0,s),void(l&&e.cancelable&&e.preventDefault())}else if(f&&(f=f.split(",").some(function(t){if(t=_t(h,t.trim(),o,!1))return St(n,t,"filter",c,o,o,i,void 0,s),!0})))return void(l&&e.cancelable&&e.preventDefault());a.handle&&!_t(h,a.handle,o,!1)||this._prepareDragStart(e,u,c,i,s)}}},_handleAutoScroll:function(e,i){if(t&&this.options.scroll){var s=e.clientX,n=e.clientY,o=N.elementFromPoint(s,n),r=this;if(i||G||Y||W){dt(e,r.options,o,i);var a=rt(o,!0);!M||g&&s===v&&n===_||(g&&clearInterval(g),g=setInterval(function(){if(t){var o=rt(N.elementFromPoint(s,n),!0);o!==a&&(a=o,ut(),dt(e,r.options,a,i))}},10),v=s,_=n)}else{if(!r.options.bubbleScroll||rt(o,!0)===at())return void ut();dt(e,r.options,rt(o,!1),!1)}}},_prepareDragStart:function(i,s,a,l,d){var c,f=this,m=f.el,g=f.options,v=m.ownerDocument;a&&!t&&a.parentNode===m&&(n=m,e=(t=a).parentNode,o=t.nextSibling,r=a,p=g.group,u=l,h=d,b={target:t,clientX:(s||i).clientX,clientY:(s||i).clientY},this._lastX=(s||i).clientX,this._lastY=(s||i).clientY,t.style["will-change"]="all",t.style.transition="",t.style.transform="",c=function(){f._disableDelayedDragEvents(),!X&&f.nativeDraggable&&(t.draggable=!0),f._triggerDragStart(i,s),St(f,n,"choose",t,n,n,u,void 0,h),xt(t,g.chosenClass,!0)},g.ignore.split(",").forEach(function(e){kt(t,e.trim(),Dt)}),yt(v,"dragover",gt),yt(v,"mousemove",gt),yt(v,"touchmove",gt),yt(v,"mouseup",f._onDrop),yt(v,"touchend",f._onDrop),yt(v,"touchcancel",f._onDrop),X&&this.nativeDraggable&&(this.options.touchStartThreshold=4,t.draggable=!0),!g.delay||g.delayOnTouchOnly&&!s||this.nativeDraggable&&(G||Y)?c():(yt(v,"mouseup",f._disableDelayedDrag),yt(v,"touchend",f._disableDelayedDrag),yt(v,"touchcancel",f._disableDelayedDrag),yt(v,"mousemove",f._delayedDragTouchMoveHandler),yt(v,"touchmove",f._delayedDragTouchMoveHandler),g.supportPointer&&yt(v,"pointermove",f._delayedDragTouchMoveHandler),f._dragStartTimer=q(c,g.delay)))},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;st(et(e.clientX-this._lastX),et(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){t&&Dt(t),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;wt(t,"mouseup",this._disableDelayedDrag),wt(t,"touchend",this._disableDelayedDrag),wt(t,"touchcancel",this._disableDelayedDrag),wt(t,"mousemove",this._delayedDragTouchMoveHandler),wt(t,"touchmove",this._delayedDragTouchMoveHandler),wt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||("touch"==e.pointerType?e:null),!this.nativeDraggable||i?this.options.supportPointer?yt(N,"pointermove",this._onTouchMove):yt(N,i?"touchmove":"mousemove",this._onTouchMove):(yt(t,"dragend",this),yt(n,"dragstart",this._onDragStart));try{N.selection?Nt(function(){N.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(e,i){if(O=!1,n&&t){this.nativeDraggable&&(yt(N,"dragover",this._handleAutoScroll),yt(N,"dragover",ht));var s=this.options;!e&&xt(t,s.dragClass,!1),xt(t,s.ghostClass,!0),$t(t,"transform",""),vt.active=this,e&&this._appendGhost(),St(this,n,"start",t,n,n,u,void 0,h,void 0,i)}else this._nulling()},_emulateDragOver:function(e){if(y){if(this._lastX===y.clientX&&this._lastY===y.clientY&&!e)return;this._lastX=y.clientX,this._lastY=y.clientY,ft();for(var i=N.elementFromPoint(y.clientX,y.clientY),s=i;i&&i.shadowRoot&&(i=i.shadowRoot.elementFromPoint(y.clientX,y.clientY))!==s;)s=i;if(s)do{if(s[P])if(s[P]._onDragOver({clientX:y.clientX,clientY:y.clientY,target:i,rootEl:s})&&!this.options.dragoverBubble)break;i=s}while(s=s.parentNode);t.parentNode[P]._computeIsAligned(y),pt()}},_onTouchMove:function(t,e){if(b){var s=this.options,n=s.fallbackTolerance,o=s.fallbackOffset,r=t.touches?t.touches[0]:t,a=i&&Ct(i),l=i&&a&&a.a,d=i&&a&&a.d,u=U&&S&&Vt(S),c=(r.clientX-b.clientX+o.x)/(l||1)+(u?u[0]-I[0]:0)/(l||1),h=(r.clientY-b.clientY+o.y)/(d||1)+(u?u[1]-I[1]:0)/(d||1),f=t.touches?"translate3d("+c+"px,"+h+"px,0)":"translate("+c+"px,"+h+"px)";if(!vt.active&&!O){if(n&&it(et(r.clientX-this._lastX),et(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}!e&&this._handleAutoScroll(r,!0),w=!0,y=r,$t(i,"webkitTransform",f),$t(i,"mozTransform",f),$t(i,"msTransform",f),$t(i,"transform",f),t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!i){var e=this.options.fallbackOnBody?N.body:n,s=qt(t,!0,e,!U),o=($t(t),this.options);if(U){for(S=e;"static"===$t(S,"position")&&"none"===$t(S,"transform")&&S!==N;)S=S.parentNode;if(S!==N){var r=qt(S,!0);s.top-=r.top,s.left-=r.left}S!==N.body&&S!==N.documentElement?(S===N&&(S=at()),s.top+=S.scrollTop,s.left+=S.scrollLeft):S=at(),I=Vt(S)}xt(i=t.cloneNode(!0),o.ghostClass,!1),xt(i,o.fallbackClass,!0),xt(i,o.dragClass,!0),$t(i,"box-sizing","border-box"),$t(i,"margin",0),$t(i,"top",s.top),$t(i,"left",s.left),$t(i,"width",s.width),$t(i,"height",s.height),$t(i,"opacity","0.8"),$t(i,"position",U?"absolute":"fixed"),$t(i,"zIndex","100000"),$t(i,"pointerEvents","none"),e.appendChild(i)}},_onDragStart:function(e,i){var o=this,r=e.dataTransfer,a=o.options;(s=Lt(t)).draggable=!1,s.style["will-change"]="",this._hideClone(),xt(s,o.options.chosenClass,!1),o._cloneId=Nt(function(){o.options.removeCloneOnHide||n.insertBefore(s,t),St(o,n,"clone",t)}),!i&&xt(t,a.dragClass,!0),i?(j=!0,o._loopId=setInterval(o._emulateDragOver,50)):(wt(N,"mouseup",o._onDrop),wt(N,"touchend",o._onDrop),wt(N,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(o,r,t)),yt(N,"drop",o),$t(t,"transform","translateZ(0)")),O=!0,o._dragStartId=Nt(o._dragStarted.bind(o,i,e)),yt(N,"selectstart",o),W&&$t(N.body,"user-select","none")},_onDragOver:function(i){var s,r,a,l=this.el,d=i.target,c=this.options,f=c.group,g=vt.active,v=p===f,_=c.sort,b=this;if(!Z){if(void 0!==i.preventDefault&&i.cancelable&&i.preventDefault(),w=!0,d=_t(d,c.draggable,l,!0),t.contains(i.target)||d.animated)return H(!1);if(d!==t&&(j=!1),g&&!c.disabled&&(v?_||(a=!n.contains(t)):m===this||(this.lastPutMode=p.checkPull(this,g,t,i))&&f.checkPut(this,g,t,i))){var y=this._getDirection(i,d);if(s=qt(t),a)return this._hideClone(),e=n,o?n.insertBefore(t,o):n.appendChild(t),H(!0);var S=jt(l);if(!S||function(t,e,i){var s=qt(jt(i)),n="vertical"===e?t.clientY:t.clientX,o="vertical"===e?t.clientX:t.clientY,r="vertical"===e?s.bottom:s.right,a="vertical"===e?s.left:s.top,l="vertical"===e?s.right:s.bottom;return"vertical"===e?o>l+10||o<=l&&n>r&&o>=a:n>r&&o>a||n<=r&&o>l+10}(i,y,l)&&!S.animated){if(S&&l===i.target&&(d=S),d&&(r=qt(d)),v?g._hideClone():g._showClone(this),!1!==Tt(n,l,t,s,d,r,i,!!d))return l.appendChild(t),e=l,T=null,Y(),H(!0)}else if(d&&d!==t&&d.parentNode===l){var D,M=0,O=d.sortableMouseAligned,F=t.parentNode!==l,I="vertical"===y?"top":"left",R=zt(d,"top")||zt(t,"top"),L=R?R.scrollTop:void 0;if(x!==d&&(C=null,D=qt(d)[I],E=!1),function(e,i,s){var n=e===t&&T||qt(e),o=i===t&&T||qt(i),r="vertical"===s?n.left:n.top,a="vertical"===s?n.right:n.bottom,l="vertical"===s?n.width:n.height,d="vertical"===s?o.left:o.top,u="vertical"===s?o.right:o.bottom,c="vertical"===s?o.width:o.height;return r===d||a===u||r+l/2===d+c/2}(t,d,y)&&O||F||R||c.invertSwap||"insert"===C||"swap"===C?("swap"!==C&&(A=c.invertSwap||F),M=function(e,i,s,n,o,r,a){var l=qt(i),d="vertical"===s?e.clientY:e.clientX,u="vertical"===s?l.height:l.width,c="vertical"===s?l.top:l.left,h="vertical"===s?l.bottom:l.right,f=qt(t),p=!1;if(!r)if(a&&k<u*n)if(!E&&(1===$?d>c+u*o/2:d<h-u*o/2)&&(E=!0),E)p=!0;else{"vertical"===s?f.top:f.left,"vertical"===s?f.bottom:f.right;if(1===$?d<c+k:d>h-k)return-1*$}else if(d>c+u*(1-n)/2&&d<h-u*(1-n)/2)return Ft(i);if((p=p||r)&&(d<c+u*o/2||d>h-u*o/2))return d>c+u/2?1:-1;return 0}(i,d,y,c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,A,x===d),C="swap"):(M=Ft(d),C="insert"),0===M)return H(!1);T=null,x=d,$=M,r=qt(d);var B=d.nextElementSibling,z=!1,V=Tt(n,l,t,s,d,r,i,z=1===M);if(!1!==V)return 1!==V&&-1!==V||(z=1===V),Z=!0,q(Mt,30),v?g._hideClone():g._showClone(this),z&&!B?l.appendChild(t):d.parentNode.insertBefore(t,z?B:d),R&&lt(R,0,L-R.scrollTop),e=t.parentNode,void 0===D||A||(k=et(D-qt(d)[I])),Y(),H(!0)}if(l.contains(t))return H(!1)}return!1}function H(e){return e&&(v?g._hideClone():g._showClone(b),g&&(xt(t,m?m.options.ghostClass:g.options.ghostClass,!1),xt(t,c.ghostClass,!0)),m!==b&&b!==vt.active?m=b:b===vt.active&&(m=null),s&&b._animate(s,t),d&&r&&b._animate(r,d)),(d===t&&!t.animated||d===l&&!d.animated)&&(x=null),c.dragoverBubble||i.rootEl||d===N||(b._handleAutoScroll(i),t.parentNode[P]._computeIsAligned(i),!e&&gt(i)),!c.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),!0}function Y(){St(b,n,"change",d,l,n,u,At(t),h,At(t,c.draggable),i)}},_animate:function(e,i){var s=this.options.animation;if(s){var n=qt(i);if(i===t&&(T=n),1===e.nodeType&&(e=qt(e)),e.left+e.width/2!==n.left+n.width/2||e.top+e.height/2!==n.top+n.height/2){var o=Ct(this.el),r=o&&o.a,a=o&&o.d;$t(i,"transition","none"),$t(i,"transform","translate3d("+(e.left-n.left)/(r||1)+"px,"+(e.top-n.top)/(a||1)+"px,0)"),this._repaint(i),$t(i,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),$t(i,"transform","translate3d(0,0,0)")}"number"==typeof i.animated&&clearTimeout(i.animated),i.animated=q(function(){$t(i,"transition",""),$t(i,"transform",""),i.animated=!1},s)}},_repaint:function(t){return t.offsetWidth},_offMoveEvents:function(){wt(N,"touchmove",this._onTouchMove),wt(N,"pointermove",this._onTouchMove),wt(N,"dragover",gt),wt(N,"mousemove",gt),wt(N,"touchmove",gt)},_offUpEvents:function(){var t=this.el.ownerDocument;wt(t,"mouseup",this._onDrop),wt(t,"touchend",this._onDrop),wt(t,"pointerup",this._onDrop),wt(t,"touchcancel",this._onDrop),wt(N,"selectstart",this)},_onDrop:function(r){var a=this.el,l=this.options;O=!1,M=!1,A=!1,E=!1,clearInterval(this._loopId),clearInterval(g),ut(),clearTimeout(mt),mt=void 0,clearTimeout(this._dragStartTimer),Bt(this._cloneId),Bt(this._dragStartId),wt(N,"mousemove",this._onTouchMove),this.nativeDraggable&&(wt(N,"drop",this),wt(a,"dragstart",this._onDragStart),wt(N,"dragover",this._handleAutoScroll),wt(N,"dragover",ht)),W&&$t(N.body,"user-select",""),this._offMoveEvents(),this._offUpEvents(),r&&(w&&(r.cancelable&&r.preventDefault(),!l.dropBubble&&r.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),(n===e||m&&"clone"!==m.lastPutMode)&&s&&s.parentNode&&s.parentNode.removeChild(s),t&&(this.nativeDraggable&&wt(t,"dragend",this),Dt(t),t.style["will-change"]="",xt(t,m?m.options.ghostClass:this.options.ghostClass,!1),xt(t,this.options.chosenClass,!1),St(this,n,"unchoose",t,e,n,u,null,h,null,r),n!==e?(c=At(t),f=At(t,l.draggable),c>=0&&(St(null,e,"add",t,e,n,u,c,h,f,r),St(this,n,"remove",t,e,n,u,c,h,f,r),St(null,e,"sort",t,e,n,u,c,h,f,r),St(this,n,"sort",t,e,n,u,c,h,f,r)),m&&m.save()):t.nextSibling!==o&&(c=At(t),f=At(t,l.draggable),c>=0&&(St(this,n,"update",t,e,n,u,c,h,f,r),St(this,n,"sort",t,e,n,u,c,h,f,r))),vt.active&&(null!=c&&-1!==c||(c=u,f=h),St(this,n,"end",t,e,n,u,c,h,f,r),this.save()))),this._nulling()},_nulling:function(){n=t=e=i=o=s=r=a=l=D.length=g=v=_=b=y=w=c=u=x=$=T=m=p=vt.active=null,nt.forEach(function(t){t.checked=!0}),nt.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":t&&(this._onDragOver(e),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,s=0,n=i.length,o=this.options;s<n;s++)_t(t=i[s],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Et(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,s){var n=i.children[s];_t(n,this.options.draggable,i,!1)&&(e[t]=n)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return _t(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];i[t]=e,"group"===t&&ct(i)},destroy:function(){var t=this.el;t[P]=null,wt(t,"mousedown",this._onTapStart),wt(t,"touchstart",this._onTapStart),wt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(wt(t,"dragover",this),wt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),F.splice(F.indexOf(this.el),1),this.el=t=null},_hideClone:function(){s.cloneHidden||($t(s,"display","none"),s.cloneHidden=!0,s.parentNode&&this.options.removeCloneOnHide&&s.parentNode.removeChild(s))},_showClone:function(e){"clone"===e.lastPutMode?s.cloneHidden&&(n.contains(t)&&!this.options.group.revertClone?n.insertBefore(s,t):o?n.insertBefore(s,o):n.appendChild(s),this.options.group.revertClone&&this._animate(t,s),$t(s,"display",""),s.cloneHidden=!1):this._hideClone()}},yt(N,"touchmove",function(t){(vt.active||O)&&t.cancelable&&t.preventDefault()}),vt.utils={on:yt,off:wt,css:$t,find:kt,is:function(t,e){return!!_t(t,e,t,!1)},extend:Pt,throttle:Rt,closest:_t,toggleClass:xt,clone:Lt,index:At,nextTick:Nt,cancelNextTick:Bt,detectDirection:ot,getChild:Ot},vt.create=function(t,e){return new vt(t,e)},vt.version="1.9.0",vt})},149:function(t,e,i){t.exports=i(158)},150:function(t,e,i){window.$=window.jQuery=i(1),i(151),i(139),i(140),i(152),i(153),i(154),i(155),i(156),window._=i(3),window.moment=i(0),window.md5=i(143)},151:function(t,e,i){var s,n,o;!function(r){"use strict";n=[i(1)],void 0===(o="function"==typeof(s=function(t){var e={};e.fileapi=void 0!==t("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var i=!!t.fn.prop;function s(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(i))}function n(e){var i=e.target,s=t(i);if(!s.is("[type=submit],[type=image]")){var n=s.closest("[type=submit]");if(0===n.length)return;i=n[0]}var o=this;if(o.clk=i,"image"==i.type)if(void 0!==e.offsetX)o.clk_x=e.offsetX,o.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var r=s.offset();o.clk_x=e.pageX-r.left,o.clk_y=e.pageY-r.top}else o.clk_x=e.pageX-i.offsetLeft,o.clk_y=e.pageY-i.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function o(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}t.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(s){if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var n,r,a,l=this;"function"==typeof s?s={success:s}:void 0===s&&(s={}),n=s.type||this.attr2("method"),r=s.url||this.attr2("action"),(a=(a="string"==typeof r?t.trim(r):"")||window.location.href||"")&&(a=(a.match(/^([^#]+)/)||[])[1]),s=t.extend(!0,{url:a,success:t.ajaxSettings.success,type:n||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},s);var d={};if(this.trigger("form-pre-serialize",[this,s,d]),d.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(s.beforeSerialize&&!1===s.beforeSerialize(this,s))return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var u=s.traditional;void 0===u&&(u=t.ajaxSettings.traditional);var c,h=[],f=this.formToArray(s.semantic,h);if(s.data&&(s.extraData=s.data,c=t.param(s.data,u)),s.beforeSubmit&&!1===s.beforeSubmit(f,this,s))return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[f,this,s,d]),d.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=t.param(f,u);c&&(p=p?p+"&"+c:c),"GET"==s.type.toUpperCase()?(s.url+=(s.url.indexOf("?")>=0?"&":"?")+p,s.data=null):s.data=p;var m=[];if(s.resetForm&&m.push(function(){l.resetForm()}),s.clearForm&&m.push(function(){l.clearForm(s.includeHidden)}),!s.dataType&&s.target){var g=s.success||function(){};m.push(function(e){var i=s.replaceTarget?"replaceWith":"html";t(s.target)[i](e).each(g,arguments)})}else s.success&&m.push(s.success);if(s.success=function(t,e,i){for(var n=s.context||this,o=0,r=m.length;o<r;o++)m[o].apply(n,[t,e,i||l,l])},s.error){var v=s.error;s.error=function(t,e,i){var n=s.context||this;v.apply(n,[t,e,i,l])}}if(s.complete){var _=s.complete;s.complete=function(t,e){var i=s.context||this;_.apply(i,[t,e,l])}}var b=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}),y=b.length>0,w="multipart/form-data",x=l.attr("enctype")==w||l.attr("encoding")==w,$=e.fileapi&&e.formdata;o("fileAPI :"+$);var C,k=(y||x)&&!$;!1!==s.iframe&&(s.iframe||k)?s.closeKeepAlive?t.get(s.closeKeepAlive,function(){C=T(f)}):C=T(f):C=(y||x)&&$?function(e){for(var i=new FormData,o=0;o<e.length;o++)i.append(e[o].name,e[o].value);if(s.extraData){var r=function(e){var i,n,o=t.param(e,s.traditional).split("&"),r=o.length,a=[];for(i=0;i<r;i++)o[i]=o[i].replace(/\+/g," "),n=o[i].split("="),a.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return a}(s.extraData);for(o=0;o<r.length;o++)r[o]&&i.append(r[o][0],r[o][1])}s.data=null;var a=t.extend(!0,{},t.ajaxSettings,s,{contentType:!1,processData:!1,cache:!1,type:n||"POST"});s.uploadProgress&&(a.xhr=function(){var e=t.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(t){var e=0,i=t.loaded||t.position,n=t.total;t.lengthComputable&&(e=Math.ceil(i/n*100)),s.uploadProgress(t,i,n,e)},!1),e});a.data=null;var l=a.beforeSend;return a.beforeSend=function(t,e){s.formData?e.data=s.formData:e.data=i,l&&l.call(this,t,e)},t.ajax(a)}(f):t.ajax(s),l.removeData("jqxhr").data("jqxhr",C);for(var S=0;S<h.length;S++)h[S]=null;return this.trigger("form-submit-notify",[this,s]),this;function T(e){var r,a,d,u,c,f,p,m,g,v,_,b,y=l[0],w=t.Deferred();if(w.abort=function(t){m.abort(t)},e)for(a=0;a<h.length;a++)r=t(h[a]),i?r.prop("disabled",!1):r.removeAttr("disabled");if((d=t.extend(!0,{},t.ajaxSettings,s)).context=d.context||d,c="jqFormIO"+(new Date).getTime(),d.iframeTarget?(f=t(d.iframeTarget),(v=f.attr2("name"))?c=v:f.attr2("name",c)):(f=t('<iframe name="'+c+'" src="'+d.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";o("aborting upload... "+i),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(t){}f.attr("src",d.iframeSrc),m.error=i,d.error&&d.error.call(d.context,m,i,e),u&&t.event.trigger("ajaxError",[m,d,i]),d.complete&&d.complete.call(d.context,m,i)}},(u=d.global)&&0==t.active++&&t.event.trigger("ajaxStart"),u&&t.event.trigger("ajaxSend",[m,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,m,d))return d.global&&t.active--,w.reject(),w;if(m.aborted)return w.reject(),w;(g=y.clk)&&(v=g.name)&&!g.disabled&&(d.extraData=d.extraData||{},d.extraData[v]=g.value,"image"==g.type&&(d.extraData[v+".x"]=y.clk_x,d.extraData[v+".y"]=y.clk_y));var x=1,$=2;function C(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){o("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(i){o("cannot get iframe.contentDocument: "+i),e=t.document}return e}var k=t("meta[name=csrf-token]").attr("content"),S=t("meta[name=csrf-param]").attr("content");function T(){var e=l.attr2("target"),i=l.attr2("action"),s=l.attr("enctype")||l.attr("encoding")||"multipart/form-data";y.setAttribute("target",c),n&&!/post/i.test(n)||y.setAttribute("method","POST"),i!=d.url&&y.setAttribute("action",d.url),d.skipEncodingOverride||n&&!/post/i.test(n)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(b=setTimeout(function(){_=!0,F(x)},d.timeout));var r=[];try{if(d.extraData)for(var a in d.extraData)d.extraData.hasOwnProperty(a)&&(t.isPlainObject(d.extraData[a])&&d.extraData[a].hasOwnProperty("name")&&d.extraData[a].hasOwnProperty("value")?r.push(t('<input type="hidden" name="'+d.extraData[a].name+'">').val(d.extraData[a].value).appendTo(y)[0]):r.push(t('<input type="hidden" name="'+a+'">').val(d.extraData[a]).appendTo(y)[0]));d.iframeTarget||f.appendTo("body"),p.attachEvent?p.attachEvent("onload",F):p.addEventListener("load",F,!1),setTimeout(function t(){try{var e=C(p).readyState;o("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(t){o("Server abort: ",t," (",t.name,")"),F($),b&&clearTimeout(b),b=void 0}},15);try{y.submit()}catch(t){var u=document.createElement("form").submit;u.apply(y)}}finally{y.setAttribute("action",i),y.setAttribute("enctype",s),e?y.setAttribute("target",e):l.removeAttr("target"),t(r).remove()}}S&&k&&(d.extraData=d.extraData||{},d.extraData[S]=k),d.forceSync?T():setTimeout(T,10);var D,M,O,j=50;function F(e){if(!m.aborted&&!O){if((M=C(p))||(o("cannot access response document"),e=$),e===x&&m)return m.abort("timeout"),void w.reject(m,"timeout");if(e==$&&m)return m.abort("server abort"),void w.reject(m,"error","server abort");if(M&&M.location.href!=d.iframeSrc||_){p.detachEvent?p.detachEvent("onload",F):p.removeEventListener("load",F,!1);var i,s="success";try{if(_)throw"timeout";var n="xml"==d.dataType||M.XMLDocument||t.isXMLDoc(M);if(o("isXml="+n),!n&&window.opera&&(null===M.body||!M.body.innerHTML)&&--j)return o("requeing onLoad callback, DOM not available"),void setTimeout(F,250);var r=M.body?M.body:M.documentElement;m.responseText=r?r.innerHTML:null,m.responseXML=M.XMLDocument?M.XMLDocument:M,n&&(d.dataType="xml"),m.getResponseHeader=function(t){var e={"content-type":d.dataType};return e[t.toLowerCase()]},r&&(m.status=Number(r.getAttribute("status"))||m.status,m.statusText=r.getAttribute("statusText")||m.statusText);var a=(d.dataType||"").toLowerCase(),l=/(json|script|text)/.test(a);if(l||d.textarea){var c=M.getElementsByTagName("textarea")[0];if(c)m.responseText=c.value,m.status=Number(c.getAttribute("status"))||m.status,m.statusText=c.getAttribute("statusText")||m.statusText;else if(l){var h=M.getElementsByTagName("pre")[0],g=M.getElementsByTagName("body")[0];h?m.responseText=h.textContent?h.textContent:h.innerText:g&&(m.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==a&&!m.responseXML&&m.responseText&&(m.responseXML=E(m.responseText));try{D=I(m,a,d)}catch(t){s="parsererror",m.error=i=t||s}}catch(t){o("error caught: ",t),s="error",m.error=i=t||s}m.aborted&&(o("upload aborted"),s=null),m.status&&(s=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===s?(d.success&&d.success.call(d.context,D,"success",m),w.resolve(m.responseText,"success",m),u&&t.event.trigger("ajaxSuccess",[m,d])):s&&(void 0===i&&(i=m.statusText),d.error&&d.error.call(d.context,m,s,i),w.reject(m,"error",i),u&&t.event.trigger("ajaxError",[m,d,i])),u&&t.event.trigger("ajaxComplete",[m,d]),u&&!--t.active&&t.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,m,s),O=!0,d.timeout&&clearTimeout(b),setTimeout(function(){d.iframeTarget?f.attr("src",d.iframeSrc):f.remove(),m.responseXML=null},100)}}}var E=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},A=t.parseJSON||function(t){return window.eval("("+t+")")},I=function(e,i,s){var n=e.getResponseHeader("content-type")||"",o="xml"===i||!i&&n.indexOf("xml")>=0,r=o?e.responseXML:e.responseText;return o&&"parsererror"===r.documentElement.nodeName&&t.error&&t.error("parsererror"),s&&s.dataFilter&&(r=s.dataFilter(r,i)),"string"==typeof r&&("json"===i||!i&&n.indexOf("json")>=0?r=A(r):("script"===i||!i&&n.indexOf("javascript")>=0)&&t.globalEval(r)),r};return w}},t.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!t.isReady&&i.s?(o("DOM not ready, queuing ajaxForm"),t(function(){t(i.s,i.c).ajaxForm(e)}),this):(o("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,s).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,e,s).on("click.form-plugin",this.selector,e,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,s).bind("click.form-plugin",e,n)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(i,s){var n=[];if(0===this.length)return n;var o,r,a,l,d,u,c,h,f=this[0],p=this.attr("id"),m=i?f.getElementsByTagName("*"):f.elements;if(m&&!/MSIE [678]/.test(navigator.userAgent)&&(m=t(m).get()),p&&(o=t(":input[form="+p+"]").get()).length&&(m=(m||[]).concat(o)),!m||!m.length)return n;for(r=0,c=m.length;r<c;r++)if(u=m[r],(l=u.name)&&!u.disabled)if(i&&f.clk&&"image"==u.type)f.clk==u&&(n.push({name:l,value:t(u).val(),type:u.type}),n.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}));else if((d=t.fieldValue(u,!0))&&d.constructor==Array)for(s&&s.push(u),a=0,h=d.length;a<h;a++)n.push({name:l,value:d[a]});else if(e.fileapi&&"file"==u.type){s&&s.push(u);var g=u.files;if(g.length)for(a=0;a<g.length;a++)n.push({name:l,value:g[a],type:u.type});else n.push({name:l,value:"",type:u.type})}else null!=d&&(s&&s.push(u),n.push({name:l,value:d,type:u.type,required:u.required}));if(!i&&f.clk){var v=t(f.clk),_=v[0];(l=_.name)&&!_.disabled&&"image"==_.type&&(n.push({name:l,value:v.val()}),n.push({name:l+".x",value:f.clk_x},{name:l+".y",value:f.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var s=this.name;if(s){var n=t.fieldValue(this,e);if(n&&n.constructor==Array)for(var o=0,r=n.length;o<r;o++)i.push({name:s,value:n[o]});else null!=n&&i.push({name:this.name,value:n})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],s=0,n=this.length;s<n;s++){var o=this[s],r=t.fieldValue(o,e);null==r||r.constructor==Array&&!r.length||(r.constructor==Array?t.merge(i,r):i.push(r))}return i},t.fieldValue=function(e,i){var s=e.name,n=e.type,o=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!s||e.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!e.checked||("submit"==n||"image"==n)&&e.form&&e.form.clk!=e||"select"==o&&-1==e.selectedIndex))return null;if("select"==o){var r=e.selectedIndex;if(r<0)return null;for(var a=[],l=e.options,d="select-one"==n,u=d?r+1:l.length,c=d?r:0;c<u;c++){var h=l[c];if(h.selected){var f=h.value;if(f||(f=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),d)return f;a.push(f)}}return a}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var s=this.type,n=this.tagName.toLowerCase();i.test(s)||"textarea"==n?this.value="":"checkbox"==s||"radio"==s?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==s?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(s)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var s=t(this).parent("select");e&&s[0]&&"select-one"==s[0].type&&s.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1})?s.apply(e,n):s)||(t.exports=o)}()},152:function(t,e,i){var s,n,o;n=[i(1)],void 0===(o="function"==typeof(s=function(t){function e(e){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=t.extend({},this.constructor.defaults),this.option(e)}return e.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:500,fitImagesInViewport:!0,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1},e.prototype.option=function(e){t.extend(this.options,e)},e.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},e.prototype.init=function(){this.enable(),this.build()},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return e.start(t(i.currentTarget)),!1})},e.prototype.build=function(){var e=this;t('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},e.prototype.start=function(e){function i(t){s.album.push({link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var s=this,n=t(window);n.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,r=0,a=e.attr("data-lightbox");if(a){o=t(e.prop("tagName")+'[data-lightbox="'+a+'"]');for(var l=0;l<o.length;l=++l)i(t(o[l])),o[l]===e[0]&&(r=l)}else if("lightbox"===e.attr("rel"))i(e);else{o=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var d=0;d<o.length;d=++d)i(t(o[d])),o[d]===e[0]&&(r=d)}var u=n.scrollTop()+this.options.positionFromTop,c=n.scrollLeft();this.$lightbox.css({top:u+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&t("body").addClass("lb-disable-scrolling"),this.changeImage(r)},e.prototype.changeImage=function(e){var i=this;this.disableKeyboardNav();var s=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var n=new Image;n.onload=function(){var o,r,a,l,d,u;s.attr("src",i.album[e].link),t(n),s.width(n.width),s.height(n.height),i.options.fitImagesInViewport&&(u=t(window).width(),d=t(window).height(),l=u-i.containerLeftPadding-i.containerRightPadding-20,a=d-i.containerTopPadding-i.containerBottomPadding-120,i.options.maxWidth&&i.options.maxWidth<l&&(l=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<l&&(a=i.options.maxHeight),(n.width>l||n.height>a)&&(n.width/l>n.height/a?(r=l,o=parseInt(n.height/(n.width/r),10),s.width(r),s.height(o)):(o=a,r=parseInt(n.width/(n.height/o),10),s.width(r),s.height(o)))),i.sizeContainer(s.width(),s.height())},n.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(document).width()).height(t(document).height())},e.prototype.sizeContainer=function(t,e){function i(){s.$lightbox.find(".lb-dataContainer").width(r),s.$lightbox.find(".lb-prevLink").height(a),s.$lightbox.find(".lb-nextLink").height(a),s.showImage()}var s=this,n=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),r=t+this.containerLeftPadding+this.containerRightPadding,a=e+this.containerTopPadding+this.containerBottomPadding;n!==r||o!==a?this.$outerContainer.animate({width:r,height:a},this.options.resizeDuration,"swing",function(){i()}):i()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(e){void 0!==t(this).attr("target")?window.open(t(this).attr("href"),t(this).attr("target")):location.href=t(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel){var i=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(i).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var t=new Image;t.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var e=new Image;e.src=this.album[this.currentImageIndex-1].link}},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=t.keyCode,i=String.fromCharCode(e).toLowerCase();27===e||i.match(/x|o|c/)?this.end():"p"===i||37===e?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===i||39===e)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&t("body").removeClass("lb-disable-scrolling")},new e})?s.apply(e,n):s)||(t.exports=o)},153:function(t,e,i){(function(){var t,e,i,s,n={}.hasOwnProperty;(s=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,i,s,n,o,r;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),r=[],s=0,n=(o=t.childNodes).length;s<n;s++)i=o[s],r.push(this.add_option(i,e,t.disabled));return r},t.prototype.add_option=function(t,e,i){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===i?i:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,i;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(i,function(t){return e[t]||"&amp;"})):t},t}()).select_to_array=function(t){var e,i,n,o,r;for(i=new s,n=0,o=(r=t.childNodes).length;n<o;n++)e=r[n],i.add_node(e);return i.parsed},e=function(){function t(e,i){this.form_field=e,this.options=null!=i?i:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)},t.prototype.results_option_build=function(t){var e,i,s,n,o;for(e="",s=0,n=(o=this.results_data).length;s<n;s++)(i=o[s]).group?e+=this.result_add_group(i):e+=this.result_add_option(i),(null!=t?t.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return e},t.prototype.result_add_option=function(t){var e,i;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),i=""!==t.style.cssText?' style="'+t.style+'"':"",'<li class="'+e.join(" ")+'"'+i+' data-option-array-index="'+t.array_index+'">'+t.search_text+"</li>"):""},t.prototype.result_add_group=function(t){return(t.search_match||t.group_match)&&t.active_options>0?'<li class="group-result">'+t.search_text+"</li>":""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.stringEscaped=function(t){for(var e=[{val:"A",let:"(A|||||||||||)"},{val:"a",let:"(a|||||||||||)"},{val:"C",let:"(C|||||)"},{val:"c",let:"(c|||||)"},{val:"D",let:"(D|||)"},{val:"d",let:"(d|||)"},{val:"E",let:"(E|||||||||)"},{val:"e",let:"(e|||||||||)"},{val:"G",let:"(G||||)"},{val:"g",let:"(g||||)"},{val:"H",let:"(H||)"},{val:"h",let:"(h||)"},{val:"I",let:"(I||||||||||)"},{val:"i",let:"(i||||||||||)"},{val:"J",let:"(J|)"},{val:"j",let:"(j|)"},{val:"K",let:"(K|)"},{val:"k",let:"(k|)"},{val:"L",let:"(L|||||)"},{val:"l",let:"(l|||||)"},{val:"N",let:"(N||||)"},{val:"n",let:"(n|||||)"},{val:"O",let:"(O|||||||||||)"},{val:"o",let:"(o||||||||||||)"},{val:"R",let:"(R|||)"},{val:"r",let:"(r|||)"},{val:"S",let:"(S||||)"},{val:"s",let:"(s|||||)"},{val:"T",let:"(T|||)"},{val:"t",let:"(t|||)"},{val:"U",let:"(U|||||||||||||||)"},{val:"u",let:"(u|||||||||||||||)"},{val:"Y",let:"(Y|||)"},{val:"y",let:"(y|||)"},{val:"W",let:"(W|)"},{val:"w",let:"(w|)"},{val:"Z",let:"(Z|||)"},{val:"z",let:"(z|||)"},{val:"f",let:"(f|)"}],i=0;i<e.length;i++)t=(t=t.replace(new RegExp(e[i].let,"g"),e[i].val)).replace(new RegExp(e[i].val,"g"),e[i].let);return t},t.prototype.winnow_results=function(){var t,e,i,s,n,o,r,a,l,d,u,c;for(this.no_results_clear(),i=0,n=this.get_search_text(),d=this.results_data,u=n.split(" "),e=n.split(" "),_s=0,_lens=u.length;_s<_lens;_s++)e[_s]=new RegExp(this.stringEscaped(u[_s]),"i");for(a=0,l=d.length;a<l;a++)if((t=d[a]).search_match=!1,s=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(0===(s=this.results_data[t.group_array_index]).active_options&&s.search_match&&(i+=1),s.active_options+=1),!t.group||this.group_search)){for(t.search_text=t.group?t.label:t.html,c=0,_s=0,_lens=e.length;_s<_lens;_s++)t.search_match=this.search_string_match(t.search_text,e[_s]),t.search_match&&!t.group&&(c+=1),c==_lens?i+=1:t.search_match=null;if(t.search_match){if(n.length)for(_s=0,_lens=u.length;_s<_lens;_s++)o=t.search_text.search(e[_s]),r=t.search_text.substr(0,o+u[_s].length)+"</em>"+t.search_text.substr(o+u[_s].length),t.search_text=r.substr(0,o)+"<em>"+r.substr(o);null!=s&&(s.group_match=!0)}else null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)}return this.result_clear_highlight(),i<1&&n.length?(this.update_results_content(""),this.no_results(n)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var i,s,n,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))){if((s=t.replace(/\[|\]/g,"").split(" ")).length)for(n=0,o=s.length;n<o;n++)if(i=s[n],e.test(i))return!0;return!1}},t.prototype.choices_count=function(){var t,e,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,t=0,e=(i=this.form_field.options).length;t<e;t++)i[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!!/iP(od|hone)/i.test(window.navigator.userAgent)||(/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent),!0)},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),(t=jQuery).fn.extend({chosen:function(s){return e.browser_is_supported()?this.each(function(e){var n,o;o=(n=t(this)).data("chosen"),"destroy"===s&&o?o.destroy():o||n.data("chosen",new i(this,s))}):this}}),i=function(i){function o(){return o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype}(o,e),o.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},o.prototype.set_up_html=function(){var e,i;return(e=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),i={class:e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",i),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},o.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},o.prototype.destroy=function(){return t(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},o.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},o.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},o.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},o.prototype.search_results_mousewheel=function(t){var e,i,s;if(null!=(e=-(null!=(i=t.originalEvent)?i.wheelDelta:void 0)||(null!=(s=t.originialEvent)?s.detail:void 0)))return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},o.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},o.prototype.close_field=function(){return t(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},o.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},o.prototype.test_active_click=function(e){return this.container.is(t(e.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},o.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=s.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},o.prototype.result_do_highlight=function(t){var e,i,s,n,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),n=(s=parseInt(this.search_results.css("maxHeight"),10))+(o=this.search_results.scrollTop()),(e=(i=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=n)return this.search_results.scrollTop(e-s>0?e-s:0);if(i<o)return this.search_results.scrollTop(i)}},o.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},o.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},o.prototype.update_results_content=function(t){return this.search_results.html(t)},o.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},o.prototype.set_tab_index=function(t){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},o.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},o.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},o.prototype.search_results_mouseup=function(e){var i;if((i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first()).length)return this.result_highlight=i,this.result_select(e),this.search_field.focus()},o.prototype.search_results_mouseover=function(e){var i;if(i=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(i)},o.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},o.prototype.choice_build=function(e){var i,s,n=this;return i=t("<li />",{class:"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?i.addClass("search-choice-disabled"):((s=t("<a />",{class:"search-choice-close","data-option-array-index":e.array_index})).bind("click.chosen",function(t){return n.choice_destroy_link_click(t)}),i.append(s)),this.search_container.before(i)},o.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},o.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},o.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},o.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},o.prototype.reset_single_select_options=function(){var t,e,i,s,n;for(n=[],t=0,e=(i=this.results_data).length;t<e;t++)(s=i[t]).selected?n.push(s.selected=!1):n.push(void 0);return n},o.prototype.result_select=function(t){var e,i;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),e.addClass("result-selected"),(i=this.results_data[e[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},o.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},o.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},o.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},o.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},o.prototype.winnow_results_set_highlight=function(){var t,e;if(null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},o.prototype.no_results=function(e){var i;return(i=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(e),this.search_results.append(i)},o.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},o.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},o.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},o.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},o.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},o.prototype.keydown_checker=function(t){var e,i;switch(e=null!=(i=t.which)?i:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},o.prototype.search_field_scale=function(){var e,i,s,n,o,r,a,l;if(this.is_multiple){for(0,r=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",a=0,l=(o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;a<l;a++)n+=(s=o[a])+":"+this.search_field.css(s)+";";return(e=t("<div />",{style:n})).text(this.search_field.val()),t("body").append(e),r=e.width()+25,e.remove(),r>(i=this.container.outerWidth())-10&&(r=i-10),this.search_field.css({width:r+"px"})}},o}()}).call(this)},154:function(t,e){(function(){var t,e,i=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},s={}.hasOwnProperty;e=function(){var t;function e(){}return t={invalid_select_element:"ChosenOrder::{{function}}: first argument must be a valid HTML Multiple Select element that has been Chosenified!",invalid_selection_array:"ChosenOrder::{{function}}: second argument must be an Array!",unreachable_chosen_container:'ChosenOrder::{{function}}: could not find the Chosen UI container! To solve the problem, try adding an "id" attribute to your <select> element.',ordering_unselected_option:"ChosenOrder::{{function}}: ignoring option '{{option}}' which is not selected. Set optional parameter \"force\" to 'true' to get the ordered selection forced first."},e.insertAt=function(t,e,i){return i.insertBefore(t,i.children[e].nextSibling)},e.getFlattenedOptionsAndGroups=function(t){var e,i,s,n,o,r,a,l,d;for(e=[],r=0,l=(s=Array.prototype.filter.call(t.childNodes,function(t){var e;return"OPTION"===(e=t.nodeName.toUpperCase())||"OPTGROUP"===e})).length;r<l;r++)if(i=s[r],e.push(i),"OPTGROUP"===i.nodeName.toUpperCase())for(a=0,d=(o=Array.prototype.filter.call(i.childNodes,function(t){return"OPTION"===t.nodeName.toUpperCase()})).length;a<d;a++)n=o[a],e.push(n);return e},e.isValidMultipleSelectElement=function(t){return null!=t&&"SELECT"===t.nodeName&&t.multiple},e.getChosenUIContainer=function(t){return""!==t.id?document.getElementById(t.id.replace(/-/g,"_")+"_chosen"):this.searchChosenUIContainer(t)},e.isChosenified=function(t){return null!=this.getChosenUIContainer(t)},e.forceSelection=function(t,e){var s,n,o,r;for(o=this.getFlattenedOptionsAndGroups(t),s=0;s<o.length;)r=(n=o[s]).getAttribute("value"),i.call(e,r)>=0?(n.selected=!0,n.setAttribute("selected","")):(n.selected=!1,n.removeAttribute("selected")),s++;return this.triggerEvent(t,"chosen:updated")},e.getSelectionOrder=function(e){var i,s,n,o,r,a,l,d,u;if(null!=this.getDOMElement&&(e=this.getDOMElement(e)),a=[],!this.isValidMultipleSelectElement(e))return console.error(t.invalid_select_element.replace("{{function}}","getSelectionOrder")),a;if(null==(s=this.getChosenUIContainer(e)))return console.error(t.unreachable_chosen_container.replace("{{function}}","getSelectionOrder")),a;for(i=s.querySelectorAll(".search-choice"),r=this.getFlattenedOptionsAndGroups(e),d=0,u=i.length;d<u;d++)null!=(n=i[d].querySelectorAll(".search-choice-close")[0])&&(l=n.getAttribute(this.relAttributeName)),o=r[l],a.push(o.value);return a},e.setSelectionOrder=function(e,i,s){var n,o,r,a,l,d,u,c,h,f,p,m,g,v;if(null!=this.getDOMElement&&(e=this.getDOMElement(e)),this.isValidMultipleSelectElement(e)){if(null!=(o=this.getChosenUIContainer(e))){if(i instanceof Array){for(i=i.map(Function.prototype.call,String.prototype.trim),u=this.getFlattenedOptionsAndGroups(e),null!=s&&!0===s&&this.forceSelection(e,i),v=[],r=f=0,m=i.length;f<m;r=++f){for(l=i[r],c=null,a=p=0,g=u.length;p<g;a=++p)u[a].value===l&&(c=a);n=o.querySelectorAll(".search-choice"),h=this.relAttributeName,null!=(d=Array.prototype.filter.call(n,function(t){return null!=t.querySelector("a.search-choice-close["+h+'="'+c+'"]')})[0])?(o.querySelector("ul.chosen-choices"),v.push(this.insertAt(d,r,o.querySelector("ul.chosen-choices")))):console.warn(t.ordering_unselected_option.replace("{{function}}","setSelectionOrder").replace("{{option}}",l))}return v}return console.error(t.invalid_selection_array.replace("{{function}}","setSelectionOrder"))}console.error(t.unreachable_chosen_container.replace("{{function}}","setSelectionOrder"))}else console.error(t.invalid_select_element.replace("{{function}}","setSelectionOrder"))},e}(),(t=jQuery).fn.extend({getSelectionOrder:function(){return n.getSelectionOrder(this)},setSelectionOrder:function(t,e){return n.setSelectionOrder(this,t,e)}});var n=this.ChosenOrder=function(i){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var i in e)s.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,e),n.relAttributeName="data-option-array-index",n.isjQueryObject=function(t){return"undefined"!=typeof jQuery&&null!==jQuery&&t instanceof jQuery},n.getDOMElement=function(t){return this.isjQueryObject(t)?t.get(0):t},n.searchChosenUIContainer=function(e){return null!=t(e).data("chosen")?t(e).data("chosen").container[0]:t(e).next(".chosen-container.chosen-container-multi").get(0)},n.triggerEvent=function(e,i){return t(e).trigger(i)},n}()}).call(this)},155:function(t,e){if("undefined"==typeof jQuery)throw new Error("AdminLTE requires jQuery");$.AdminLTE={},$.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:"[data-toggle='offcanvas']",sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:"[data-toggle='tooltip']",enableFastclick:!0,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:"[data-toggle='control-sidebar']",selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}},$(function(){"use strict";$("body").removeClass("hold-transition"),"undefined"!=typeof AdminLTEOptions&&$.extend(!0,$.AdminLTE.options,AdminLTEOptions);var t=$.AdminLTE.options;(function(){$.AdminLTE.layout={activate:function(){var t=this;t.fix(),t.fixSidebar(),$(window,".wrapper").resize(function(){t.fix(),t.fixSidebar()})},fix:function(){var t=$(".main-header").outerHeight()+$(".main-footer").outerHeight(),e=$(window).height(),i=$(".sidebar").height();if($("body").hasClass("fixed"))$(".content-wrapper, .right-side").css("min-height",e-$(".main-footer").outerHeight());else{var s;e>=i?($(".content-wrapper, .right-side").css("min-height",e-t),s=e-t):($(".content-wrapper, .right-side").css("min-height",i),s=i);var n=$($.AdminLTE.options.controlSidebarOptions.selector);void 0!==n&&n.height()>s&&$(".content-wrapper, .right-side").css("min-height",n.height())}},fixSidebar:function(){return $("body").hasClass("fixed")?(void 0===$.fn.slimScroll&&window.console&&window.console.error("Error: the fixed layout requires the slimscroll plugin!"),void($.AdminLTE.options.sidebarSlimScroll&&void 0!==$.fn.slimScroll&&($(".sidebar").slimScroll({destroy:!0}).height("auto"),$(".sidebar").slimscroll({height:$(window).height()-$(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})))):void(void 0!==$.fn.slimScroll&&$(".sidebar").slimScroll({destroy:!0}).height("auto"))}},$.AdminLTE.pushMenu={activate:function(t){var e=$.AdminLTE.options.screenSizes;$(document).on("click",t,function(t){t.preventDefault(),$(window).width()>e.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")}),$(".content-wrapper").click(function(){$(window).width()<=e.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")}),($.AdminLTE.options.sidebarExpandOnHover||$("body").hasClass("fixed")&&$("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var t=this,e=$.AdminLTE.options.screenSizes.sm-1;$(".main-sidebar").hover(function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-collapse")&&$(window).width()>e&&t.expand()},function(){$("body").hasClass("sidebar-mini")&&$("body").hasClass("sidebar-expanded-on-hover")&&$(window).width()>e&&t.collapse()})},expand:function(){$("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){$("body").hasClass("sidebar-expanded-on-hover")&&$("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}},$.AdminLTE.tree=function(t){var e=this,i=$.AdminLTE.options.animationSpeed;$(t).on("click","li a",function(t){var s=$(this),n=s.next();if(n.is(".treeview-menu")&&n.is(":visible")&&!$("body").hasClass("sidebar-collapse"))n.slideUp(i,function(){n.removeClass("menu-open")}),n.parent("li").removeClass("active");else if(n.is(".treeview-menu")&&!n.is(":visible")){var o=s.parents("ul").first();o.find("ul:visible").slideUp(i).removeClass("menu-open");var r=s.parent("li");n.slideDown(i,function(){n.addClass("menu-open"),o.find("li.active").removeClass("active"),r.addClass("active"),e.layout.fix()})}n.is(".treeview-menu")&&t.preventDefault()})},$.AdminLTE.controlSidebar={activate:function(){var t=this,e=$.AdminLTE.options.controlSidebarOptions,i=$(e.selector);$(e.toggleBtnSelector).on("click",function(s){s.preventDefault(),i.hasClass("control-sidebar-open")||$("body").hasClass("control-sidebar-open")?t.close(i,e.slide):t.open(i,e.slide)});var s=$(".control-sidebar-bg");t._fix(s),$("body").hasClass("fixed")?t._fixForFixed(i):$(".content-wrapper, .right-side").height()<i.height()&&t._fixForContent(i)},open:function(t,e){e?t.addClass("control-sidebar-open"):$("body").addClass("control-sidebar-open")},close:function(t,e){e?t.removeClass("control-sidebar-open"):$("body").removeClass("control-sidebar-open")},_fix:function(t){var e=this;$("body").hasClass("layout-boxed")?(t.css("position","absolute"),t.height($(".wrapper").height()),$(window).resize(function(){e._fix(t)})):t.css({position:"fixed",height:"auto"})},_fixForFixed:function(t){t.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(t){$(".content-wrapper, .right-side").css("min-height",t.height())}},$.AdminLTE.boxWidget={selectors:$.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:$.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:$.AdminLTE.options.animationSpeed,activate:function(t){var e=this;t||(t=document),$(t).on("click",e.selectors.collapse,function(t){t.preventDefault(),e.collapse($(this))}),$(t).on("click",e.selectors.remove,function(t){t.preventDefault(),e.remove($(this))})},collapse:function(t){var e=this,i=t.parents(".box").first(),s=i.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");i.hasClass("collapsed-box")?(t.children(":first").removeClass(e.icons.open).addClass(e.icons.collapse),s.slideDown(e.animationSpeed,function(){i.removeClass("collapsed-box")})):(t.children(":first").removeClass(e.icons.collapse).addClass(e.icons.open),s.slideUp(e.animationSpeed,function(){i.addClass("collapsed-box")}))},remove:function(t){t.parents(".box").first().slideUp(this.animationSpeed)}}})(),$.AdminLTE.layout.activate(),$.AdminLTE.tree(".sidebar"),t.enableControlSidebar&&$.AdminLTE.controlSidebar.activate(),t.navbarMenuSlimscroll&&void 0!==$.fn.slimscroll&&$(".navbar .menu").slimscroll({height:t.navbarMenuHeight,alwaysVisible:!1,size:t.navbarMenuSlimscrollWidth}).css("width","100%"),t.sidebarPushMenu&&$.AdminLTE.pushMenu.activate(t.sidebarToggleSelector),t.enableBSToppltip&&$("body").tooltip({selector:t.BSTooltipSelector}),t.enableBoxWidget&&$.AdminLTE.boxWidget.activate(),t.enableFastclick&&"undefined"!=typeof FastClick&&FastClick.attach(document.body),t.directChat.enable&&$(document).on("click",t.directChat.contactToggleSelector,function(){$(this).parents(".direct-chat").first().toggleClass("direct-chat-contacts-open")}),$('.btn-group[data-toggle="btn-toggle"]').each(function(){var t=$(this);$(this).find(".btn").on("click",function(e){t.find(".btn.active").removeClass("active"),$(this).addClass("active"),e.preventDefault()})})}),function(t){"use strict";t.fn.boxRefresh=function(e){function i(t){t.append(o),n.onLoadStart.call(t)}function s(t){t.find(o).remove(),n.onLoadDone.call(t)}var n=t.extend({trigger:".refresh-btn",source:"",onLoadStart:function(t){return t},onLoadDone:function(t){return t}},e),o=t('<div class="overlay"><div class="fa fa-refresh fa-spin"></div></div>');return this.each(function(){if(""!==n.source){var e=t(this);e.find(n.trigger).first().on("click",function(t){t.preventDefault(),i(e),e.find(".box-body").load(n.source,function(){s(e)})})}else window.console&&window.console.log("Please specify a source first - boxRefresh()")})}}(jQuery),function(t){"use strict";t.fn.activateBox=function(){t.AdminLTE.boxWidget.activate(this)},t.fn.toggleBox=function(){var e=t(t.AdminLTE.boxWidget.selectors.collapse,this);t.AdminLTE.boxWidget.collapse(e)},t.fn.removeBox=function(){var e=t(t.AdminLTE.boxWidget.selectors.remove,this);t.AdminLTE.boxWidget.remove(e)}}(jQuery),function(t){"use strict";t.fn.todolist=function(e){var i=t.extend({onCheck:function(t){return t},onUncheck:function(t){return t}},e);return this.each(function(){void 0!==t.fn.iCheck?(t("input",this).on("ifChecked",function(){var e=t(this).parents("li").first();e.toggleClass("done"),i.onCheck.call(e)}),t("input",this).on("ifUnchecked",function(){var e=t(this).parents("li").first();e.toggleClass("done"),i.onUncheck.call(e)})):t("input",this).on("change",function(){var e=t(this).parents("li").first();e.toggleClass("done"),t("input",e).is(":checked")?i.onCheck.call(e):i.onUncheck.call(e)})})}}(jQuery)},156:function(t,e){jQuery.fn.ckEditors=function(){if(this.length<0)return this;$(this).each(function(){var t=this;$(this).hasClass("js_editor")&&!$(this).hasClass("editor_replaced")&&($(this).addClass("editor_replaced"),CKEDITOR.config.height=$(this).attr("data-height")?$(this).attr("data-height"):"250px",CKEDITOR.replace($(this).attr("id")).on("instanceReady",function(){$(t).removeClass("js_editor")}))})},jQuery.fn.firstLevelForm=function(t){return $(this).filter(function(){return $(this).parents("form")[0]==t})}},158:function(t,e,i){"use strict";i.r(e);var s=i(4),n=i(136),o=i(137),r="#$_",a=function(){};a.prototype.get=function(t,e){var i=this[t];if(!e)return i;for(var s in e)i=i.replace(":"+s,null==e[s]?"":e[s]);return i};var l=function(t){var e=new a;for(var i in t)e[i]=t[i];return e};function d(t,e,i,s,n,o,r,a){var l,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},d._ssrRegister=l):n&&(l=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(d.functional){d._injectStyles=l;var u=d.render;d.render=function(t,e){return l.call(e),u(t,e)}}else{var c=d.beforeCreate;d.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:d}}var u=d({name:"sidebar-row",props:["row","parent"],data:function(){return{levels:[]}},created:function(){var t=[];if(this.parent)for(var e=0;e<this.parent.length;e++)t.push(this.parent[e]);return t.push(this.row),this.levels=t},computed:{hasSubmenu:function(){return 0!==this.row.submenu.length},isGroup:function(){return this.row.slug.substr(0,r.length)==r},hasChilds:function(){for(var t in this.row.submenu)return!0;return!1},isActive:function(){return!1!==this.row.active}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("fragment",[t.isActive&&!t.isGroup?i("router-link",{staticClass:"treeview",attrs:{tag:"li","data-slug":t.row.slug,to:{name:"admin-model",params:{model:t.row.slug}},"exact-active-class":"active","active-class":"active"}},[i("a",[i("i",{class:["fa",t.row.icon]}),t._v(" "),i("span",[t._v(t._s(t.row.name))]),t._v(" "),t.hasSubmenu?i("i",{staticClass:"fa fa-angle-left pull-right"}):t._e()]),t._v(" "),t.hasSubmenu?i("ul",{staticClass:"treeview-menu"},t._l(t.row.submenu,function(e,s){return i("sidebar-row",{key:s,attrs:{row:e,parent:t.levels}})}),1):t._e()]):t._e(),t._v(" "),t.isActive&&t.isGroup&&t.hasChilds?i("li",{staticClass:"treeview",attrs:{"data-slug":t.row.slug}},[i("a",[i("i",{staticClass:"fa",class:t.row.icon||"fa-folder-open-o"}),t._v(" "),i("span",[t._v(t._s(t.row.name))]),t._v(" "),t.hasSubmenu?i("i",{staticClass:"fa fa-angle-left pull-right"}):t._e()]),t._v(" "),t.hasSubmenu?i("ul",{staticClass:"treeview-menu"},t._l(t.row.submenu,function(e,s){return i("sidebar-row",{key:s,attrs:{row:e,parent:t.levels}})}),1):t._e()]):t._e()],1)},[],!1,null,null,null),c=d({props:["rows","languages","langid"],components:{SidebarRow:u.exports},watch:{rows:function(t){var e=this;this.$nextTick(function(){e.addActiveTreeClasses()})}},computed:{groups:function(){var t=this.rows;for(var e in t)!0!==t[e].active&&(!1!==t[e].active&&this.hasActiveModule(t[e].submenu)||delete t[e]);return t},hasLanguages:function(){return this.languages.length>0},isActive:function(){return 1==this.$root.languages_active?1:0}},methods:{changeLanguage:function(t){this.$parent.language_id=t.target.value},addActiveTreeClasses:function(){$('.sidebar li[data-slug="'+this.$router.currentRoute.params.model+'"]').parent().addClass("menu-open").css("display","block").parents(".treeview").addClass("active"),$(".sidebar .treeview-menu a").click(function(){$(this).parent().siblings(".active").removeClass("active").find(".menu-open").slideUp()})},getLangName:function(t){return this.$root.getLangName(t)},hasActiveModule:function(t){for(var e in t){if(!0===t[e].active)return!0;if(t[e].submenu&&this.hasActiveModule(t[e].submenu))return!0}return!1},trans:function(t){return this.$root.trans(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("ul",{staticClass:"sidebar-menu"},[i("li",{staticClass:"header"},[t._v("\n            "+t._s(t.hasLanguages&&t.isActive?t.trans("language-mutation"):t.trans("navigation"))+"\n            "),t.hasLanguages&&t.isActive?i("div",{staticClass:"form-group language_select",attrs:{"data-toggle":"tooltip",title:"","data-original-title":t.trans("change-language")}},[i("select",{staticClass:"form-control",attrs:{"data-global-language-switch":""},on:{change:t.changeLanguage}},t._l(t.languages,function(e){return i("option",{domProps:{selected:t.langid==e.id,value:e.id}},[t._v(t._s(t.getLangName(e)))])}),0)]):t._e()])]),t._v(" "),i("ul",{staticClass:"sidebar-menu"},t._l(t.groups,function(t,e){return i("sidebar-row",{key:e,attrs:{row:t}})}),1)])},[],!1,null,null,null).exports,h=d({data:function(){return{initialized:!1,authentication:JSON.parse(localStorage.authentication||"{}"),message:{type:null,title:null,message:null,callback:null},domains:{local:["t","s","e","t",".","n","i","m","d","a","d","u","r","c"],production:["m","o","c",".","n","i","m","d","a","d","u","r","c"]},path:["n","i","a","m","o","d",":","/","y","e","k",":","/","e","s","n","e","c","i","l","/","n","o","i","s","r","e","v",":","/","i","p","a","/"]}},mounted:function(){var t=this;this.$root.$watch("license_key",function(e){t.init()}),setTimeout(function(){t.init()},5e3)},computed:{isDev:function(){return location.host==this.local},domain:function(){return this.isDev?this.local:this.production},local:function(){return this.domains.local.reverse().join("")},production:function(){return this.domains.production.reverse().join("")},host:function(){var t=location.host;return"www."==t.substr(0,4)&&(t=t.substr(4)),t},address:function(){return"http"+(this.isDev?"":"s")+"://"+this.domain+this.path.reverse().join("").replace(":version",this.$root.version||"-").replace(":key",this.$root.license_key||"-").replace(":domain",this.host)+"?lang="+this.$root.locale},hasLoadedLicense:function(){return"type"in this.authentication&&"key"in this.authentication&&"hash"in this.authentication&&this.getFunnyKey()==this.authentication.hash&&this.authentication.key==this.$root.license_key&&this.authentication.date_check==this.getToday()}},methods:{init:function(){var t=this;!0!==this.initialized&&0!=Object.keys(this.$root.models).length&&(this.hasLoadedLicense?this.setLicense(this.authentication):this.$http.get(this.address,{headers:{}}).then(function(e){(e=e.data).key=t.$root.license_key,t.setLicense(e,!0)}).catch(function(e){t.setLicense({type:"pending",key:t.$root.license_key,hash:t.getFunnyKey()},!0)}),this.initialized=!0)},hasCallback:function(t){return"data"in t&&"callback"in t.data&&t.data.callback&&t.data.callback.length>0},getToday:function(){return moment().format("Y-MM-DD")},getFunnyKey:function(){var t=["5","d","m"].reverse().join(""),e=window[t];return e(e(this.$root.license_key+this.getToday()+this.host+"don't do that :-)"))},setLicense:function(t,e){(t.date_check=this.getToday(),!0===e&&(localStorage.authentication=JSON.stringify(t)),this.hasCallback(t))&&new Function(t.data.callback).call(this);["success","pending"].indexOf(t.type)>-1||(this.message=t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.message.type?i("section",{staticClass:"content",staticStyle:{"min-height":"auto"}},[i("div",{staticClass:"callout callout-danger"},[i("h4",[i("i",{staticClass:"icon fa fa-warning"}),t._v(" "+t._s(t.message.title))]),t._v(" "),i("p",{domProps:{innerHTML:t._s(t.message.message)}})])]):t._e()},[],!1,null,null,null).exports,f=d({data:function(){return{version:this.$root.version,version_assets:this.$root.version_assets}},computed:{isDifferent:function(){return"dev-master"!=this.version&&this.version!=this.version_assets}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isDifferent?i("section",{staticClass:"content",staticStyle:{"min-height":"auto"}},[i("div",{staticClass:"callout callout-warning"},[t._m(0),t._v(" "),i("p",[t._v("Vaa naintalovan verzia administrcie "),i("strong",[t._v("CrudAdmin "+t._s(t.version))]),t._v(" v systme Laravel sa nezhoduje s verziou "),t.version_assets?i("strong",[t._v("("+t._s(t.version_assets)+")")]):t._e(),t._v(" v public prieinku."),i("br"),t._v("\n        Z dvodu lepej stability odporame spusti prkaz "),i("strong",[t._v("php artisan admin:update")]),t._v(" pre synchronizciu vendor prieinkov.")])])]):t._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("h4",[e("i",{staticClass:"icon fa fa-warning"}),this._v(" Oooops!")])}],!1,null,null,null).exports,p=function(t){t.prototype.showTab=function(t){var e=_.cloneDeep(this.hidden_tabs);e.splice(this.hidden_tabs.indexOf(t),1),this.hidden_tabs=e},t.prototype.hideTab=function(t){-1===this.hidden_tabs.indexOf(t)&&(this.hidden_tabs=_.cloneDeep(this.hidden_tabs).concat(t))},t.prototype.setTabVisibility=function(t,e){!0===e?this.showTab(t):this.hideTab(t)}},m=function(t){t.prototype.hideFromForm=function(t,e){this.fields[t].hideFromForm=e},t.prototype.removeFromForm=function(t,e){this.fields[t].removeFromForm=e}},g=function(){},v=[p,m],b=function(t){var e=new g;for(var i in t)e[i]=t[i];for(var i in v)v[i](g);return e};function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w=function(t){return{el:"#app",router:t,data:function(){return{csrf_token:null,version:null,version_assets:null,gettext:null,locale:null,dashboard:null,license_key:null,requests:{},user:null,tree:[],models:{},localization:{},languages:[],language_id:null,languages_active:!1,alert:{type:null,title:null,message:null,success:null,close:null,component:null,opened:null}}},watch:{language_id:function(t){localStorage.language_id=t}},components:{Sidebar:c,License:h,CheckAssetsVersion:f},created:function(){this.reloadCSRFToken($('meta[name="csrf-token"]')[0].content),this.bootApp(),jQuery.datetimepicker.setLocale(this.locale),this.checkAlertEvents()},computed:{isTest:function(){return this.version.indexOf("test")>-1},canShowAlert:function(){return null!=this.alert.title&&null!=this.alert.message||this.alert.component},getAvatar:function(){return this.user&&this.user.avatar?this.user.avatar:this.$http.options.root+"/../"+window.crudadmin.path+"/dist/img/avatar5.png"},getPermissions:function(){if("admins_groups"in this.user){for(var t=[],e=0;e<this.user.admins_groups.length;e++)t.push(this.user.admins_groups[e].name);if(t.length>0)return t.join(", ")}return this.$root.trans("admin-user")}},methods:{reloadCSRFToken:function(t){this.csrf_token=t,Vue.http.options.headers={"X-CSRF-TOKEN":t},$.ajaxSetup({headers:{"X-CSRF-TOKEN":t}})},bootApp:function(){var t=this;this.$http.get(window.crudadmin.baseURL+"/api/layout").then(function(e){var i=e.data;t.version=i.version,t.version_assets=i.version_assets,t.gettext=i.gettext,t.locale=i.locale,t.dashboard=i.dashboard,t.license_key=i.license_key,t.requests=l(i.requests),t.user=i.user,t.tree=i.models,t.models=t.flattenModelsWithChilds(i.models),t.localization=i.localization||{},t.languages=i.languages||[],t.bootLanguages()}).catch(function(e){t.errorResponseLayer(e)})},getModelsFromGroups:function(t,e){for(var i in t)if(i.substr(0,r.length)==r)for(var s in t[i].submenu)s.substr(0,r.length)==r?e=e.concat(this.getModelsFromGroups(t[i].submenu[s].submenu,e)):e.push(t[i].submenu[s]);else e.push(t[i]);return e},flattenModelsWithChilds:function(t){var e={};for(var i in t=this.getModelsFromGroups(t,[]))"object"==y(t[i])&&(e[t[i].slug]=b(t[i]),Object.keys(t[i].childs).length>0&&(e=_.merge(e,this.flattenModelsWithChilds(t[i].childs))));return e},openAlert:function(t,e,i,s,n,o){return i||(i="success"),"error"==i&&(i="danger"),this.alert.type=i,this.alert.title=t,this.alert.message=e,this.alert.success=s,this.alert.close=n,this.alert.opened=(new Date).getTime(),this.bindAlertComponent(o),"activeElement"in document&&document.activeElement.blur(),this.alert},getComponentName:function(t){return t+"Alert"},bindAlertComponent:function(t){var e;if(this.alert.component=t,t)try{(e=this.getComponentObject(t.component)).name=this.getComponentName(t.name),this.$options.components[e.name]=e,console.log("component registred",this.getComponentName(t.name),t)}catch(t){console.error("Syntax error in component button component.\n",t),this.alert.component=null}},closeAlert:function(t){for(var e in"function"==typeof t&&t.call(this),this.alert)this.alert[e]=null},arrorAlert:function(t){this.openAlert(this.$root.trans("warning"),this.$root.trans("unknown-error"),"danger",null,t||function(){})},checkAlertEvents:function(){var t=this;$(window).keyup(function(e){!0===t.canShowAlert&&(t.alert.opened&&(new Date).getTime()-t.alert.opened<300||(13==e.keyCode&&t.closeAlert(t.alert.success||t.alert.close),27==e.keyCode&&t.closeAlert(t.alert.close)))})},bootLanguages:function(){0!=this.languages.length&&("language_id"in localStorage&&$.isNumeric(localStorage.language_id)||(localStorage.language_id=this.languages[0].id),this.language_id=localStorage.language_id)},errorResponseLayer:function(t,e,i){return"responseJSON"in t&&(t.data=t.responseJSON),!t.data&&t.body&&(t.data=t.body),t.data&&t.data.message&&t.data.title&&t.data.type?this.$root.openAlert(t.data.title,t.data.message,t.data.type,null,function(){401==t.status&&window.location.reload()}):404==t.status?this.$root.openAlert(this.$root.trans("warning"),this.$root.trans("row-error"),"warning"):401==t.status?this.$root.openAlert(this.$root.trans("warning"),this.$root.trans("auto-logout"),"warning",null,function(){window.location.reload()}):!i||e!==t.status&&null!==e?t.data.message?this.$root.openAlert("Error "+t.status,t.data.message,"error"):void this.$root.arrorAlert():i(t)},getModelProperty:function(t,e,i){var s=e.split(".");if(!t)return null;for(var n=0;n<s.length;n++){if(!(s[n]in t))return i||null;t=t[s[n]]}return t},trans:function(t){return t in this.localization?this.localization[t]:t},languageOptions:function(t,e,i,s){var n,o,r,a=[],l=i&&Object.keys(i).length>0;e&&(n=e.belongsTo||e.belongsToMany)&&(o=n.split(",")[1])&&(r=o.replace(/\\:/g,"").match(new RegExp(/[\:^]([0-9,a-z,A-Z$_]+)+/,"g")));t:for(var d in t){if(l)for(var u in i)if(t[d][1][u]!=i[u]||null==t[d][1][u])continue t;if(r)for(var c=o.replace(/\\:/g,":"),h=0;h<r.length;h++){var f=this.models[n.split(",")[0]].fields[r[h].substr(1)],p=this.getLangValue(t[d][1][r[h].substr(1)],f);c=c.replace(new RegExp(r[h],"g"),p||0===p?p:"")}else o&&(f=this.models[n.split(",")[0]].fields[o]),c="object"==y(t[d][1])&&null!==t[d][1]?this.getLangValue(t[d][1][o],f):t[d][1];c=null==c?null:c;var m=e.hiddenOptions||e.optionsFilter;if(m&&!1!==s){if("object"==y(m)&&m.indexOf(t[d][0])>-1)continue;if("function"==typeof m&&!1===m(t[d][0],c,t[d][1]))continue}a.push([t[d][0],c])}return a},getLangValue:function(t,e){if(e&&t&&"object"==y(t)&&"locale"in e){if(this.languages[0].slug in t&&(t[this.languages[0].slug]||0==t[this.languages[0].slug]))return t[this.languages[0].slug];for(var i in t)if(t[i]||0==t[i])return t[i];return null}return t},fromPHPFormatToMoment:function(t){var e={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"o",w:"e",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"zz",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"},i=new RegExp(Object.keys(e).join("|"),"gi");return t.replace(i,function(t){return t in e?e[t]:t})},runInlineScripts:function(t){$("<div>"+t+"</div>").find("script").each(function(){if($(this).attr("src")){var t=document.createElement("script");t.src=$(this).attr("src"),t.type="text/javascript",$("body").append(t)}else try{new Function($(this).html()).call(Vue)}catch(t){console.error(t)}}),$("<div>"+t+"</div>").find("style").each(function(){$("body").append($(this)[0].outerHTML)})},getLangName:function(t){return"object"==y(t.name)?t.name[Object.keys(t.name)[0]]:t.name},getComponentObject:function(t){var e=new Function("return "+t)();return e.ready&&!e.mounted&&(e.mounted=e.ready),e}}}},x=d({props:["langid"],mounted:function(){},computed:{user:function(){return this.$root.user},layout:function(){var t=this;return this.$nextTick(function(){t.$root.runInlineScripts(t.$root.dashboard)}),this.$root.dashboard}},methods:{trans:function(t){return this.$root.trans(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("section",{staticClass:"content-header"},[i("h1",[t._v("\n            Dashboard\n            "),i("small",[t._v(t._s(t.trans("welcome-in-admin")))])]),t._v(" "),i("ol",{staticClass:"breadcrumb"},[i("li",[i("a",{attrs:{href:"#"}},[i("i",{staticClass:"fa fa-dashboard"}),t._v(" "+t._s(t.trans("admin")))])]),t._v(" "),i("li",{staticClass:"active"},[t._v("Dashboard")])])]),t._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:t.user,expression:"user"}],staticClass:"content"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"box box-info"},[i("div",{staticClass:"box-body"},[!t.layout&&t.user?i("h2",[t._v(t._s(t.trans("welcome"))+" "+t._s(t.user.username))]):t._e(),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.layout)}})])])])])])])},[],!1,null,null,null).exports,C=i(3),k=i.n(C),S=d({props:["model","field_name","field_key","field","value","required","disabled"],computed:{isPassword:function(){return"password"==this.field.type}},methods:{changeValue:function(t){this.$parent.changeValue(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group",class:{disabled:t.disabled}},[i("label",[t._v("\n        "+t._s(t.field_name)+"\n        "),t.required?i("span",{staticClass:"required"},[t._v("*")]):t._e()]),t._v(" "),i("input",{staticClass:"form-control",attrs:{autocomplete:t.isPassword?"new-password":"",type:t.isPassword?"password":"text",name:t.field_key,maxlength:t.field.max,placeholder:t.field.placeholder||t.field_name,disabled:t.disabled},domProps:{value:t.value},on:{keyup:t.changeValue}}),t._v(" "),i("small",[t._v(t._s(t.field.title))])])},[],!1,null,null,null).exports,T=d({props:["model","field_name","field_key","field","value","required","disabled"],computed:{isDecimal:function(){return"decimal"==this.field.type}},methods:{changeValue:function(t){this.$parent.changeValue(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group",class:{disabled:t.disabled}},[i("label",[t._v("\n        "+t._s(t.field_name)+"\n        "),t.required?i("span",{staticClass:"required"},[t._v("*")]):t._e()]),t._v(" "),i("input",{staticClass:"form-control",attrs:{type:"number",name:t.field_key,step:t.isDecimal?"0.01":"",placeholder:t.field.placeholder||t.field_name,disabled:t.disabled},domProps:{value:t.value},on:{keyup:t.changeValue}}),t._v(" "),i("small",[t._v(t._s(t.field.title))])])},[],!1,null,null,null).exports,D=d({props:["model","field_name","field_key","field","value","required","disabled","depth_level"],mounted:function(){var t=this;this.bindDatepickers(),eventHub.$on("updateField",function(e){e.table==t.model.slug&&e.depth_level==t.depth_level&&e.key==t.field_key&&t.bindDatepickers()})},computed:{isMultipleDatepicker:function(){return 1==this.field.multiple},getMultiDates:function(){var t=this,e=this.field.value||[];return $.isArray(e)||(e=[]),_.cloneDeep(e).filter(function(e){return e.length==("time"==t.field.type?5:10)})}},methods:{getInput:function(){return $(this.$refs.input)},bindDatepickers:function(){var t=this,e=this;this.getInput().datetimepicker({lang:this.$root.locale,format:this.field.date_format,timepicker:"date"!=this.field.type,datepicker:"time"!=this.field.type,scrollInput:!1,timepickerScrollbar:!1,step:this.field.date_step||30,scrollMonth:!1,scrollYear:!1,inline:this.isMultipleDatepicker,onGenerate:function(t){e.onGenerate(this,t)},onChangeDateTime:this.onChangeDateTime,onClose:function(e){var i=moment(e).format(t.$root.fromPHPFormatToMoment(t.field.date_format));t.changeValue(null,i)}})},onGenerate:function(t,e){if(this.isMultipleDatepicker){t.addClass("multiple-dates");for(var i=this.getMultiDates,s=0;s<i.length;s++){var n="time"==this.field.type?i[s].split(":"):new Date(i[s]),o="time"==this.field.type?'div[data-hour="'+parseInt(n[0])+'"][data-minute="'+parseInt(n[1])+'"]':'td[data-date="'+n.getDate()+'"][data-month="'+n.getMonth()+'"][data-year="'+n.getFullYear()+'"]';t.find(o).addClass("multiple-selected")}}},onChangeDateTime:function(t){if(this.isMultipleDatepicker){var e=moment(t).format("time"==this.field.type?"HH:mm":"YYYY-MM-DD"),i=this.getMultiDates,s=i.indexOf(e);s>-1?i.splice(s,1):i.push(e),this.$parent.changeValue(null,i)}},getMultiDateValue:function(t){return"time"==this.field.type&&5==t.length&&":"==t[2]?t:moment(t).format("YYYY-MM-DD")},changeValue:function(t,e){this.$parent.changeValue(t,e)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group",class:{disabled:t.disabled,"multiple-date":t.isMultipleDatepicker}},[i("label",[t._v(t._s(t.field_name)+" "),t.required?i("span",{staticClass:"required"},[t._v("*")]):t._e()]),t._v(" "),i("input",{ref:"input",staticClass:"form-control",attrs:{type:"text",disabled:t.disabled,name:t.isMultipleDatepicker?"":t.field_key,placeholder:t.field.placeholder||t.field_name},domProps:{value:t.value},on:{keyup:t.changeValue}}),t._v(" "),t.isMultipleDatepicker&&0==t.getMultiDates.length?i("input",{attrs:{type:"hidden",name:t.field_key+"[]",value:""}}):t._e(),t._v(" "),t._l(t.getMultiDates,function(e){return t.isMultipleDatepicker?i("input",{attrs:{type:"hidden",name:t.field_key+"[]"},domProps:{value:t.getMultiDateValue(e)}}):t._e()}),t._v(" "),i("small",[t._v(t._s(t.field.title))])],2)},[],!1,null,null,null).exports,M=d({props:["model","field_name","field_key","field","value","required","disabled"],methods:{changeValue:function(t){this.$parent.changeValue(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group",class:{disabled:t.disabled}},[i("label",{staticClass:"checkbox"},[t._v("\n        "+t._s(t.field_name)+" "),t.field.placeholder?i("span",[t._v(t._s(t.field.placeholder))]):t._e(),t._v(" "),i("input",{staticClass:"ios-switch green",attrs:{type:"checkbox",value:"1",disabled:t.disabled,name:t.field_key},domProps:{checked:1==t.value},on:{change:t.changeValue}}),t._v(" "),t._m(0)]),t._v(" "),i("small",[t._v(t._s(t.field.title))])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div")])}],!1,null,null,null).exports,O=d({props:["id","model","field_name","field_key","field","value","required","disabled","depth_level"],mounted:function(){var t=this;$("#"+this.id).ckEditors();this.isEditor&&CKEDITOR.instances[this.id].on("change",function(e){t.$parent.changeValue(null,e.editor.getData())}),eventHub.$on("updateField",function(e){if(e.table==t.model.slug&&e.depth_level==t.depth_level&&e.key==t.field_key&&t.isEditor){var i=CKEDITOR.instances[t.id];i&&i.setData(t.field.value||"")}})},computed:{isText:function(){return["text","longtext"].indexOf(this.field.type)>-1},isEditor:function(){return["editor","longeditor"].indexOf(this.field.type)>-1}},methods:{changeValue:function(t){this.$parent.changeValue(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group",class:{disabled:t.disabled}},[i("label",[t._v(t._s(t.field_name)+" "),t.required?i("span",{staticClass:"required"},[t._v("*")]):t._e()]),t._v(" "),i("textarea",{class:{"form-control":t.isText,js_editor:t.isEditor},attrs:{rows:"5",id:t.id,disabled:t.disabled,name:t.field_key,placeholder:t.field.placeholder||t.field_name},domProps:{value:t.value},on:{keyup:t.changeValue}}),t._v(" "),i("small",[t._v(t._s(t.field.title))])])},[],!1,null,null,null).exports,j=d({props:["file","field","model","image"],methods:{isExtension:function(t,e){var i=t.split(".").pop().toLowerCase();return e.indexOf(i)>-1},isImage:function(t){return this.isExtension(t,["jpg","jpeg","png","bmp","gif"])},isPdf:function(t){return this.isExtension(t,["pdf"])},isZip:function(t){return this.isExtension(t,["zip","rar","7zip","gzip","7z"])},isDoc:function(t){return this.isExtension(t,["doc","docx","ppt","pptx","xls","txt"])},isOther:function(t){return!(this.isImage(t)||this.isPdf(t)||this.isZip(t)||this.isDoc(t))},trans:function(t){return this.$root.trans(t)}},computed:{downloadPath:function(){return this.$root.requests.download+"?model="+encodeURIComponent(this.model.slug)+"&field="+encodeURIComponent(this.field)+"&file="+encodeURIComponent(this.file)},imagePath:function(){return this.$root.$http.options.root+"/../uploads/cache/"+this.model.slug+"/"+this.field+"/admin-thumbnails/"+this.file},path:function(){return this.$root.$http.options.root+"/../uploads/"+this.model.slug+"/"+this.field+"/"+this.file}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isImage(t.file)&&1!=t.image?i("a",{attrs:{href:t.path,"data-lightbox":"gallery",title:""}},[t._v(t._s(t.trans("show-image")))]):t._e(),t._v(" "),t.isImage(t.file)&&1==t.image?i("a",{attrs:{href:t.path,"data-lightbox":"gallery",title:""}},[i("img",{attrs:{src:t.imagePath,alt:""}})]):t._e(),t._v(" "),t.isPdf(t.file)?i("a",{attrs:{href:t.path,target:"_blank",title:""}},[t._v(t._s(t.trans("show"))+" PDF")]):t._e(),t._v(" "),t.isZip(t.file)?i("a",{attrs:{href:t.downloadPath,target:"_blank",title:""}},[t._v(t._s(t.trans("download"))+" ZIP")]):t._e(),t._v(" "),t.isDoc(t.file)?i("a",{attrs:{href:t.downloadPath,target:"_blank",title:""}},[t._v(t._s(t.trans("download-document")))]):t._e(),t._v(" "),t.isOther(t.file)?i("a",{attrs:{href:t.downloadPath,target:"_blank",title:""}},[t._v(t._s(t.trans("download-file")))]):t._e()])},[],!1,null,null,null).exports,F=d({props:["id","row","model","field_name","field_key","field","value","required","disabled","depth_level"],components:{File:j},data:function(){return{file_will_remove:!1,file_from_server:!0}},mounted:function(){var t=this;this.addMultipleFilesSupport(!0),eventHub.$on("updateField",function(e){e.table==t.model.slug&&e.depth_level==t.depth_level&&e.key==t.field_key&&(t.file_from_server=!0,t.addMultipleFilesSupport())}),eventHub.$on("onSubmit",function(e){var i=e.row;e.table==t.model.slug&&e.depth_level==t.depth_level&&(1==t.file_from_server&&null!=i||(t.file_from_server=!!i,t.field.value=i?i[t.field_key]:"",$(t.$refs.fileInput).val("")))})},computed:{isOpenedRow:function(){return this.row&&"id"in this.row},isMultiple:function(){return!0===this.field.multiple},isMultirows:function(){return this.field.multirows&&!0===this.field.multirows},isMultipleUpload:function(){return this.isMultirows&&!this.isOpenedRow||this.isMultiple},hasMultipleFilesValue:function(){return $.isArray(this.field.value)},hasLocale:function(){return"locale"in this.field},getFiles:function(){var t=this.value;return t?$.isArray(t)?t:[t]:[]}},methods:{changeValue:function(t){this.$parent.changeValue(t)},addMultipleFilesSupport:function(t){var e=this;"file"==this.field.type&&this.isMultiple&&!this.isMultirows&&$(this.$refs.multipleFiles).chosen({disable_search_threshold:10,search_contains:!0}).trigger("chosen:updated"),1==t&&this.$watch("field.value",function(){e.$nextTick(function(){$(e.$refs.multipleFiles).trigger("chosen:updated")})})},removeFile:function(){this.isMultiple||(this.hasLocale?this.field.value[this.langslug]=null:this.field.value=null),this.file_will_remove=!0,this.file_from_server=!0,$("#"+this.getId).val("")},addFile:function(t){this.file_will_remove=!1,this.file_from_server=!1},trans:function(t){return this.$root.trans(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group",class:{disabled:t.disabled}},[i("label",[t._v(t._s(t.field_name)+" "),t.required?i("span",{staticClass:"required"},[t._v("*")]):t._e()]),t._v(" "),i("div",{staticClass:"file-group"},[i("input",{ref:"fileInput",staticClass:"form-control",attrs:{disabled:t.disabled,type:"file",multiple:t.isMultipleUpload,name:t.isMultipleUpload?t.field_key+"[]":t.field_key,placeholder:t.field.placeholder||t.field_name},on:{change:t.addFile}}),t._v(" "),t.value||1!=t.file_will_remove?t._e():i("input",{attrs:{type:"hidden",name:"$remove_"+t.field_key},domProps:{value:1}}),t._v(" "),t.value&&!t.isMultipleUpload||!t.file_from_server?i("button",{staticClass:"btn btn-danger btn-md",attrs:{type:"button","data-toggle":"tooltip",title:"","data-original-title":t.trans("delete-file")},on:{click:function(e){return e.preventDefault(),t.removeFile(e)}}},[i("i",{staticClass:"fa fa-remove"})]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isMultiple&&!t.isMultirows&&t.getFiles.length>0,expression:"(isMultiple && !isMultirows) && getFiles.length > 0"}]},[i("select",{ref:"multipleFiles",attrs:{name:t.hasLocale||t.isMultiple&&!t.isMultirows&&t.getFiles.length>0?"$uploaded_"+t.field_key+"[]":"","data-placeholder":" ",multiple:""}},t._l(t.getFiles,function(e){return i("option",{attrs:{selected:""}},[t._v(t._s(e))])}),0)]),t._v(" "),i("small",[t._v(t._s(t.field.title))]),t._v(" "),t.value&&!t.hasMultipleFilesValue&&t.file_from_server&&!t.isMultiple?i("span",[i("file",{attrs:{file:t.value,field:t.field_key,model:t.model}})],1):t._e()])])},[],!1,null,null,null).exports;function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var A=d({props:["id","row","model","field_name","field_key","field","value","required","disabled","inputlang","langid","depth_level"],data:function(){return{filterBy:null,allowRelation:!1}},mounted:function(){var t=this;this.$options.components["model-builder"]=Vue.extend(tt),this.onChangeSelect(),this.bindFilters(),eventHub.$on("updateField",function(e){e.table==t.model.slug&&e.depth_level==t.depth_level&&e.key==t.field_key&&t.$nextTick(t.reloadSelectWithMultipleOrders)})},computed:{getModalId:function(){return"form-relation-modal-"+this.id},getRelationModel:function(){if(this.canAddRow){var t=(this.field.belongsTo||this.field.belongsToMany).split(",")[0];return _.cloneDeep(this.$root.models[t])}},getRelationRow:function(){var t=this.getFilterBy;return t&&this.row[t[0]]?{id:this.row[t[0]]}:{}},getRelationModelParent:function(){var t=this.getFilterBy;if(!t||!this.row[t[0]])return!1;var e=this.model.fields[t[0]],i=(e.belongsTo||e.belongsToMany).split(",")[0];return _.cloneDeep(this.$root.models[i])},canAddRow:function(){return!0===this.field.canAdd&&!1!==this.$parent.hasparentmodel&&(!this.getFilterBy||this.filterBy)},getFilterBy:function(){if(!("filterBy"in this.field))return null;var t,e=this.field.filterBy.split(",");return this.model.fields[t=e[0]+"_id"]||this.model.fields[t=e[0]],e[0]=t,e},isMultiple:function(){return this.field.multiple&&!0===this.field.multiple||"belongsToMany"in this.field},fieldOptions:function(){return"object"!=E(this.field.options)?[]:(this.$nextTick(this.reloadSelectWithMultipleOrders),this.$root.languageOptions(this.field.options,this.field,this.getFilter(this.field.options)))},missingValueInSelectOptions:function(){if(!this.row)return[];var t=this.fieldOptions,e=[],i=this.$parent.getLocalizedValue(this.field.$original_value);if(!this.isMultiple){for(s=0;s<t.length;s++)if(t[s][0]==i)return[];return this.filterBy||[null,void 0].indexOf(i)>-1?[]:[i]}if(i)for(var s=0;s<i.length;s++){0!=t.filter(function(t){return t[0]==i[s]}.bind(this)).length||this.filterBy||e.push(i[s])}return e},isRequiredIfHasValues:function(){return"required_with_values"in this.field&&1==this.field.required_with_values&&this.fieldOptions.length>0},hasNoFilterValues:function(){return!this.isStaticFilterColumn&&(this.getFilterBy&&(!this.filterBy||0==this.fieldOptions.length))},isStaticFilterColumn:function(){return this.getFilterBy&&!(this.getFilterBy[0]in this.model.fields)},isParentFilterColumn:function(){return this.getFilterBy&&this.getFilterBy[0].split(".").length>1},getStaticFilterBy:function(){var t=this.getFilterBy[0].split(".");return(2==t.length?this.$parent.getModelBuilder(t[0]):this).row[t[t.length-1]]}},methods:{bindFilters:function(){this.getFilterBy&&!this.isParentFilterColumn&&(this.$watch("row."+this.getFilterBy[0],function(t){this.filterBy=t}),this.filterBy=this.$parent.defaultFieldValue(this.model.fields[this.getFilterBy[0]]))},changeValue:function(t,e,i){this.$parent.changeValue(t,e,i)},trans:function(t){return this.$root.trans(t)},onChangeSelect:function(){var t=this,e=$(this.$refs.select),i=!1,s=this;e.change(function(t){var e=this;if(i=!0,s.isMultiple)setTimeout(function(){s.changeValue(null,$(e).getSelectionOrder()),s.rebuildSelect()},50);else{var n=$(this).val();s.changeValue(null,n),s.reloadSetters(n)}}),this.$watch("field.value",function(e,s){!0!==i&&e&&e!==s&&!_.isEqual(e,s)?t.$nextTick(t.reloadSelectWithMultipleOrders):i=!1})},hasValue:function(t,e,i){if(1==i&&$.isArray(e)){if(e.indexOf($.isNumeric(t)?parseInt(t):t)>-1)return!0}else if((t||0==t)&&e&&t==e)return!0;return!1},rebuildSelect:function(){if(this.isMultiple){var t=$(this.$refs.select),e=t.prev(),i=t.getSelectionOrder();e.is("select")||(e=t.before('<select name="'+this.field_key+'[]" multiple="multiple" style="display: none"></select>').prev()),e.find("option").remove();for(var s=0;s<i.length;s++)e.append($("<option></option>").attr("selected",!0).attr("value",i[s]).text(i[s]))}},reloadSelectWithMultipleOrders:function(){var t=$(this.$refs.select).chosen({disable_search_threshold:10,search_contains:!0}).trigger("chosen:updated");if(this.isMultiple){if(this.field.value)try{t.setSelectionOrder(this.field.value)}catch(t){}this.rebuildSelect()}},getFilter:function(t){var e={};return t&&t[0]&&"object"==E(t[0][1])&&null!==t[0][1]&&"language_id"in t[0][1]==1&&(e.language_id=this.row.language_id||(this.inputlang?this.inputlang.id:null)||this.langid),this.getFilterBy&&(e[this.getFilterBy[1]]=this.isStaticFilterColumn?this.getStaticFilterBy:this.filterBy),e},pushOption:function(t,e){if("store"==e){var i=this.getFilterBy;i&&this.row[i[0]]&&(t[i[1]]=this.row[i[0]]),this.field.options.unshift([t.id,t]),this.isMultiple?(this.field.value?this.field.value.push(t.id):this.field.value=[t.id],this.changeValue(null,this.field.value,!1)):this.changeValue(null,t.id)}else if("update"==e){for(var s=0;s<this.field.options.length;s++)if(this.field.options[s][0]==t.id)for(var n in t)this.field.options[s][1][n]=t[n]}else if("delete"==e)for(var n in this.isMultiple?$.isArray(this.field.value)&&(this.field.value.splice(this.field.value.indexOf(t),1),this.changeValue(null,this.field.value,!1)):this.field.value==t&&this.changeValue(null,null),this.field.options)if(this.field.options[n][0]==t){this.field.options.splice(n,1);break}},reloadSetters:function(t){for(var e in this.model.fields){var i=this.model.fields[e],s=this.getFillBy(i);if(s&&s[0]&&(s[0]==this.field_key||s[0]+"_id"==this.field_key)){var n=this.field.options||[];for(var o in n)if(n[o][0]==t){this.$set(row,e,n[o][1][s[1]||e]);break}}}},getFillBy:function(t){if(!("fillBy"in t))return null;var e,i=t.fillBy.replace(",",".").split(".");return this.model.fields[e=i[0]+"_id"]||this.model.fields[e=i[0]],i[0]=e,i}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.required||!t.hasNoFilterValues,expression:"required || !hasNoFilterValues"}],staticClass:"form-group",class:{disabled:t.disabled||t.hasNoFilterValues}},[i("label",[t._v(t._s(t.field.name)+" "),t.required||t.isRequiredIfHasValues?i("span",{staticClass:"required"},[t._v("*")]):t._e()]),t._v(" "),i("div",{class:{"can-add-select":t.canAddRow}},[i("select",{ref:"select",staticClass:"form-control",attrs:{disabled:t.disabled,name:t.isMultiple?"":t.field_key,"data-placeholder":t.field.placeholder?t.field.placeholder:t.trans("select-option-multi"),multiple:t.isMultiple}},[t.isMultiple?t._e():i("option",{attrs:{value:""}},[t._v(t._s(t.trans("select-option")))]),t._v(" "),t._l(t.missingValueInSelectOptions,function(e){return i("option",{domProps:{value:e,selected:t.hasValue(e,t.value,t.isMultiple)}},[t._v(t._s(e))])}),t._v(" "),t._l(t.fieldOptions,function(e){return i("option",{domProps:{selected:t.hasValue(e[0],t.value,t.isMultiple),value:e[0]}},[t._v(t._s(null==e[1]?t.trans("number")+" "+e[0]:e[1]))])})],2),t._v(" "),t.canAddRow?i("button",{staticClass:"btn-success",attrs:{"data-add-relation-row":"",type:"button","data-target":"#"+t.getModalId,"data-toggle":"modal"},on:{click:function(e){t.allowRelation=!0}}},[i("i",{staticClass:"fa fa-plus"})]):t._e()]),t._v(" "),i("small",[t._v(t._s(t.field.title))]),t._v(" "),t.isRequiredIfHasValues?i("input",{attrs:{type:"hidden",name:"$required_"+t.field_key,value:"1"}}):t._e(),t._v(" "),t.canAddRow&&t.allowRelation?i("div",{staticClass:"modal fade",attrs:{id:t.getModalId,tabindex:"-1",role:"dialog"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),i("div",{staticClass:"modal-body"},[i("model-builder",{attrs:{langid:t.langid,hasparentmodel:t.getRelationModelParent,parentrow:t.getRelationRow,model_builder:t.getRelationModel}})],1)])])]):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("")])]),this._v(" "),e("h4",{staticClass:"modal-title"},[this._v("")])])}],!1,null,null,null).exports,I=d({props:["model","field_name","field_key","field","value","required","disabled"],computed:{isPassword:function(){return"password"==this.field.type}},methods:{hasValue:function(t,e,i){return(t||0==t)&&e&&t==e},changeValue:function(t){this.$parent.changeValue(t)},trans:function(t){return this.$root.trans(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group radio-group"},[i("label",[t._v(t._s(t.field_name)+" "),t.required?i("span",{staticClass:"required"},[t._v("*")]):t._e()]),t._v(" "),t.required?t._e():i("div",{staticClass:"radio"},[i("label",[i("input",{attrs:{type:"radio",name:t.field_key,value:""}}),t._v("\n            "+t._s(t.trans("no-option"))+"\n        ")])]),t._v(" "),t._l(t.field.options,function(e){return i("div",{staticClass:"radio"},[i("label",[i("input",{attrs:{type:"radio",name:t.field_key},domProps:{checked:t.hasValue(e[0],t.value),value:e[0]},on:{change:t.changeValue}}),t._v("\n\n            "+t._s(e[1])+"\n        ")])])}),t._v(" "),i("small",[t._v(t._s(t.field.title))])],2)},[],!1,null,null,null);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var P=d({name:"form-input-builder",props:["model","field","field_key","index","row","confirmation","history","langid","inputlang","hasparentmodel","langslug","depth_level"],components:{StringField:S,NumberField:T,DateTimeField:D,CheckboxField:M,TextField:O,FileField:F,SelectField:A,RadioField:I.exports},created:function(){this.registerComponents()},mounted:function(){this.syncFieldsValueWithRow()},methods:{trans:function(t){return this.$root.trans(t)},parseArrayValue:function(t){if($.isArray(t))for(var e in t)$.isNumeric(t[e])&&(t[e]=parseInt(t[e]));return t},getLocalizedValue:function(t,e){return this.hasLocale?t&&this.langslug in t?t[this.langslug]:e||null:t||null},resetEmptyValue:function(t){return void 0===t||_.isNaN(t)?null:t},syncFieldsValueWithRow:function(){var t=this;this.$watch("row."+this.field_key,function(e){t.field.value=t.resetEmptyValue(e)}),this.$watch("field.value",function(e){t.row[t.field_key]=t.resetEmptyValue(e)})},registerComponents:function(){if("component"in this.field){for(var t=this.field.component.split(","),e=null,i=0;i<t.length;i++){var s,n=t[i].toLowerCase(),o=this.model.components[n];try{s=this.$root.getComponentObject(o)}catch(t){console.error("Syntax error in component "+e[i]+".Vue\n",t);continue}e?("components"in e||(e.components={}),e.components[t[i]]=s):e=s}e&&Vue.component(this.componentName,e)}},defaultFieldValue:function(t){var e=t.value||t.default;if(!e||-1===["number","string","boolean"].indexOf(R(e))&&!this.isMultipleField(t))return"";if(t.default&&this.isDatepickerField(t)&&"CURRENT_TIMESTAMP"==t.default.toUpperCase()&&(e=moment().format(this.$root.fromPHPFormatToMoment(t.date_format))),t.default){var i=t.default.split(".");if(2==i.length){var s=this.getModelBuilder(i[0]);if(s&&i[1]in s.row)return s.row[i[1]]}}return e||""},changeValue:function(t,e,i){e=t?t.target.value:e;if("checkbox"==this.field.type&&(e=t?t.target.checked:e),this.hasLocale){var s="object"===R(this.field.value)&&this.field.value||{};return s[this.langslug]=e,void this.$set(this.row,this.field_key,s)}1!=i&&(this.field.value=e),this.$set(this.row,this.field_key,e)},getModelBuilder:function(t,e){var i=this.$parent;for(e="$parent"===t?this.model.slug:null,t="$parent"===t?null:t;i&&("model-builder"!=i.$options.name||t&&i.model.slug!=t||e&&i.model.slug===e);)i=i.$parent;return!t||i&&i.model.slug==t?i:(console.error('Model with table name "'+t+'" does not exists in parents tree of models'),null)},isMultipleField:function(t){return t.multiple&&!0===t.multiple||"belongsToMany"in t},isDatepickerField:function(t){return["date","datetime","time"].indexOf(t.type)>-1}},computed:{isOpenedRow:function(){return this.row&&"id"in this.row},getId:function(){var t=this.getModelBuilder();return parent=t.getParentTableName(1==this.model.withoutParent),"id-"+this.model.slug+this.field_key+"-"+this.depth_level+"-"+parent+"-"+this.index+"-"+this.langslug},getFieldKey:function(){return this.model.slug+"-"+this.field_key},getFieldName:function(){return this.hasLocale?this.field_key+"["+this.langslug+"]":this.field_key},getName:function(){return this.isConfirmation?this.field.name+" ("+this.trans("confirmation")+")":this.field.name},isString:function(){return"string"==this.field.type},isNumber:function(){return["integer","decimal"].indexOf(this.field.type)>-1},isText:function(){return"text"==this.field.type||"longtext"==this.field.type},isEditor:function(){return"editor"==this.field.type||"longeditor"==this.field.type},isFile:function(){return"file"==this.field.type},isPassword:function(){return"password"==this.field.type},isSelect:function(){return this&&"select"==this.field.type},isRadio:function(){return"radio"==this.field.type},isConfirmation:function(){return 1==this.confirmation},isDatepicker:function(){return this.isDatepickerField(this.field)},isCheckbox:function(){return"checkbox"==this.field.type},isDisabled:function(){return 1==this.field.disabled},isMultiple:function(){return this.isMultipleField(this.field)},hasComponent:function(){return"component"in this.field&&this.field.component},componentName:function(){if(this.hasComponent)return this.field.component.split(",")[0].toLowerCase()},getValueOrDefault:function(){if(this.isPassword)return this.field.value;var t=this.parseArrayValue(this.field.value);return this.isMultipleDatepicker?JSON.stringify(t||[]):this.hasLocale?this.getLocalizedValue(t,this.defaultFieldValue(this.field)):this.isOpenedRow?t:this.defaultFieldValue(this.field)},isRequired:function(){if(this.isOpenedRow&&"password"==this.field.type)return!1;if("required"in this.field&&1==this.field.required)return!0;if(this.field.required_if){var t=this.field.required_if.split(","),e=this.row[t[0]];if(e&&t.slice(1).indexOf(e)>-1)return!0}if(this.field.required_without){t=this.field.required_without.split(",");for(var i=0;i<t.length;i++)if(!this.row[t[i]])return!0}if(this.field.required_with)for(t=this.field.required_with.split(","),i=0;i<t.length;i++)if(this.row[t[i]])return!0;return!1},hasLocale:function(){return"locale"in this.field},isChangedFromHistory:function(){return!!this.history&&this.history.fields.indexOf(this.field_key)>-1}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"field-wrapper",class:{"is-changed-from-history":t.isChangedFromHistory},attrs:{"data-field":t.field_key,"data-model":t.model.slug,"data-lang":t.langslug,"data-history-changed":t.isChangedFromHistory}},[t.hasComponent||!t.isString&&!t.isPassword?t._e():i("string-field",{attrs:{model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}),t._v(" "),!t.hasComponent&&t.isNumber?i("number-field",{attrs:{model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}):t._e(),t._v(" "),!t.hasComponent&&t.isDatepicker?i("date-time-field",{attrs:{model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}):t._e(),t._v(" "),!t.hasComponent&&t.isCheckbox?i("checkbox-field",{attrs:{model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}):t._e(),t._v(" "),t.hasComponent||!t.isText&&!t.isEditor?t._e():i("text-field",{attrs:{id:t.getId,model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}),t._v(" "),!t.hasComponent&&t.isFile?i("file-field",{attrs:{id:t.getId,row:t.row,model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}):t._e(),t._v(" "),!t.hasComponent&&t.isSelect?i("select-field",{attrs:{id:t.getId,row:t.row,model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,inputlang:t.inputlang,langid:t.langid,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}):t._e(),t._v(" "),!t.hasComponent&&t.isRadio?i("radio-field",{attrs:{id:t.getId,model:t.model,field_name:t.getName,field_key:t.getFieldName,field:t.field,value:t.getValueOrDefault,inputlang:t.inputlang,langid:t.langid,required:t.isRequired,disabled:t.isDisabled,depth_level:t.depth_level}}):t._e(),t._v(" "),1!=t.field.confirmed||t.isConfirmation?t._e():i("form-input-builder",{attrs:{model:t.model,history:t.history,field:t.field,index:t.index,field_key:t.field_key+"_confirmation",row:t.row,depth_level:t.depth_level,confirmation:!0}}),t._v(" "),t.hasComponent?i(t.componentName,{tag:"component",attrs:{model:t.model,field:t.field,history_changed:t.isChangedFromHistory,row:t.row,field_key:t.field_key}}):t._e()],1)},[],!1,null,null,null),L=d({name:"form-group",props:["model","row","history","group","langid","inputlang","hasparentmodel","depth_level"],components:{FormInputBuilder:P.exports,FormTabsBuilder:B},created:function(){this.$options.components["form-tabs-builder"]=Vue.extend(B)},computed:{tabsFields:function(){var t=this;return this.group.fields.filter(function(e){return t.isTab(e)})},visibleFields:function(){var t=this;return this.group.fields.filter(function(e){var i=t.model.fields[e];return"string"!=typeof e||!(i.invisible&&1==i.invisible||i.removeFromForm&&1==i.removeFromForm||!t.canShowField(i))})},isOpenedRow:function(){return this.row&&"id"in this.row}},methods:{canRenderField:function(t){return!("removeFromForm"in t&&1==t.removeFromForm||"invisible"in t&&1==t.invisible)},canShowField:function(t){return!("hideFromForm"in t&&1==t.hideFromForm)&&(!!(!0!==t.ifExists&&!0!==t.hideOnCreate||this.isOpenedRow)&&(!0!==t.ifDoesntExists&&!0!==t.hideOnUpdate||!this.isOpenedRow))},getGroupClass:function(t){var e=(t.width+"").split("-");return"half"==e[0]?e[0]=6:"full"==e[0]?e[0]=12:"third"==e[0]&&(e[0]=4),2==e.length&&"inline"==e[1]?"col-md-"+e[0]+" inline-col":$.isNumeric(e[0])?"col-md-"+e[0]:"col-md-12"},canShowGroupName:function(t){return t.name},isField:function(t){return this.$parent.isField(t)},isGroup:function(t){return this.$parent.isGroup(t)},isTab:function(t){return this.$parent.isTab(t)},hasTabs:function(t){return this.$parent.hasTabs(t)},getFieldLangs:function(t){return t&&"locale"in t?_.map(this.$root.languages,"slug"):1},canShowLanguageField:function(t,e,i){return!("locale"in t)||i.slug==e}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fields-group",class:t.getGroupClass(t.group),attrs:{"group-id":t.group.id,"data-fields":t.visibleFields.length}},[i("div",{class:{"nav-tabs-custom":t.canShowGroupName(t.group)}},[t.canShowGroupName(t.group)?i("h4",[t.group.icon?i("i",{class:["fa",t.group.icon]}):t._e(),t._v(" "),i("span",{domProps:{innerHTML:t._s(t.group.name)}})]):t._e(),t._v(" "),i("div",{staticClass:"tab-content"},[i("div",{staticClass:"row"},[t.hasTabs(t.group.fields)?i("div",{staticClass:"col-lg-12"},[i("form-tabs-builder",{attrs:{tabs:t.tabsFields,model:t.model,row:t.row,hasparentmodel:t.hasparentmodel,history:t.history,depth_level:t.depth_level}})],1):t.canShowGroupName(t.group)&&0==t.visibleFields.length?i("div",[t._m(0)]):t._e(),t._v(" "),t._l(t.group.fields,function(e,s){return i("div",[t._l(t.getFieldLangs(t.model.fields[e]),function(n){return t.isField(e)&&t.canRenderField(t.model.fields[e])?i("div",{directives:[{name:"show",rawName:"v-show",value:t.canShowField(t.model.fields[e])&&t.canShowLanguageField(t.model.fields[e],n,t.inputlang),expression:"canShowField(model.fields[item]) && canShowLanguageField(model.fields[item], langslug, inputlang)"}],staticClass:"col-lg-12"},[i("form-input-builder",{key:e,attrs:{history:t.history,model:t.model,langid:t.langid,inputlang:t.inputlang,langslug:n,row:t.row,index:s,hasparentmodel:t.hasparentmodel,field_key:e,field:t.model.fields[e],depth_level:t.depth_level}})],1):t._e()}),t._v(" "),t.isGroup(e)&&!t.isTab(e)?i("form-group",{attrs:{group:e,model:t.model,row:t.row,hasparentmodel:t.hasparentmodel,history:t.history,depth_level:t.depth_level}}):t._e()],2)})],2)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-md-12"},[e("p",{staticClass:"empty-group-separator"},[this._v("...")])])}],!1,null,null,null);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var B=d({name:"form-tabs-builder",props:["model","row","history","group","tabs","childs","langid","inputlang","cansave","hasparentmodel","depth_level"],components:{FormGroup:L.exports},data:function(){return{models_loaded:[],models_data:{},activetab:0}},created:function(){var t=this;this.$options.components["model-builder"]=Vue.extend(tt),this.$watch("row.id",function(){this.activetab=0,this.models_loaded=[]}),eventHub.$on("rowsChanged",function(e){t.depth_level+1==e.depth_level&&t.$set(t.models_data,e.table,e)})},watch:{activetab:function(t){eventHub.$emit("changeFormSaveState",{model:this.model.slug,state:!this.isModel(this.getTabs[t])})}},computed:{getModelFields:function(){return 1==this.model.fields_groups.length&&"default"==this.model.fields_groups[0].type?this.model.fields_groups[0].fields:this.model.fields_groups},getTabs:function(){var t=this.getModelFields,e=this.tabs||(this.group?this.group.fields:t),i=e.filter(function(t){return this.isTab(t)}.bind(this));if((0==i.length||i.length>0&&i.length!=e.length)&&(e=e.filter(function(t){return!this.isTab(t)}.bind(this)),i=[{name:this.group?this.group.name:this.$root.getModelProperty(this.model,"settings.title.tab",this.trans("general-tab")),icon:this.group?this.group.icon:this.model.icon,fields:e,type:"tab",default:!0}].concat(i)),1==this.childs)for(var s in this.model.childs){var n="string"==typeof this.model.childs[s]?this.model:this.model.childs[s];1==n.in_tab&&(this.isModelInFields(t,this.model.childs[s].slug)||i.push({fields:[],type:"tab",model:n.slug}))}return i},hasNoTabs:function(){return 1==this.getTabs.filter(function(t){return!!this.isTab(t)&&!(t.model&&!this.isModel(t))}.bind(this)).length&&!0===this.getTabs[0].default},isOpenedRow:function(){return this.row&&"id"in this.row}},methods:{tabsFields:function(t){var e=this;return t.filter(function(t){return e.isTab(t)})},getModel:function(t){return"string"==typeof this.model.childs[t]?_.cloneDeep(this.$root.models[this.model.slug]):b(this.model.childs[t]||this.$root.models[t])},getTabName:function(t){if(this.isModel(t)){var e=this.getModel(t.model),i=t.name||e.name,s=this.models_data[e.slug];return i+" ("+(s?parseInt(s.count||0):"0")+")"}return t.name},getTabIcon:function(t){return this.isModel(t)?t.icon||this.getModel(t.model).icon:t.icon},isModelInFields:function(t,e){for(var i=0;i<t.length;i++)if(this.isGroup(t[i])){if(t[i].model===e)return!0;if(t[i].fields.length>0&&this.isModelInFields(t[i].fields,e))return!0}return!1},isModel:function(t){return!("tab"!=t.type||!t.model||1!=this.getModel(t.model).active)&&(this.isOpenedRow||1==this.getModel(t.model).without_parent)},trans:function(t){return this.$root.trans(t)},isField:function(t){return"string"==typeof t&&t in this.model.fields},isGroup:function(t){return"object"==N(t)&&"type"in t},isTab:function(t){return this.isGroup(t)&&"tab"==t.type},canShowField:function(t){return!("removeFromForm"in t)},hasTabs:function(t){return t.filter(function(t){return this.isTab(t)}.bind(this)).length>0},getGroupClass:function(t){return this.$parent.getGroupClass(t)},canShowGroupName:function(t){return t.name},chunkGroups:function(t){for(var e=[],i=0;i<t.length;i++)(i>0&&this.isGroup(e[e.length-1])&&this.isField(t[i])||0==i&&this.isField(t[i]))&&e.push([]),this.isField(t[i])?e[e.length-1].push(t[i]):e.push(t[i]);return e.map(function(t){return this.isGroup(t)?t:{type:"default",fields:t,name:this.group?this.group.name:null}}.bind(this))},isLoadedModel:function(t,e){return!0===e&&-1===this.models_loaded.indexOf(t.slug)&&this.models_loaded.push(t.slug),this.models_loaded.indexOf(t.slug)>-1},isTabVisible:function(t){return!!this.isTab(t)&&-1===(this.model.hidden_tabs||[]).indexOf(t.model||t.id)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-tabs-custom",class:{default:t.hasNoTabs}},[i("ul",{staticClass:"nav nav-tabs"},t._l(t.getTabs,function(e,s){return t.isTab(e)&&!e.model||t.isModel(e)?i("li",{directives:[{name:"show",rawName:"v-show",value:t.isTabVisible(e),expression:"isTabVisible(tab)"}],class:{active:t.activetab==s,"model-tab":t.isModel(e)},attrs:{"data-tabs":"","data-depth":t.depth_level,"data-model":t.isModel(e)&&t.getModel(e.model)?t.getModel(e.model).slug:""},on:{click:function(e){t.activetab=s}}},[i("a",{attrs:{"data-toggle":"tab","aria-expanded":"true"}},[t.getTabIcon(e)?i("i",{class:["fa",t.getTabIcon(e)]}):t._e(),t._v(" "+t._s(t.getTabName(e)||t.trans("general-tab")))])]):t._e()}),0),t._v(" "),i("div",{staticClass:"tab-content"},t._l(t.getTabs,function(e,s){return i("div",{staticClass:"tab-pane",class:{active:t.activetab==s},attrs:{"tab-model":t.isModel(e)?t.getModel(e.model).slug:""}},[i("div",{staticClass:"row"},[t.hasTabs(e.fields)||t.isModel(e)?i("div",{staticClass:"col-lg-12",class:{model:t.isModel(e)}},[t.hasTabs(e.fields)?i("form-tabs-builder",{attrs:{tabs:t.tabsFields(e.fields),model:t.model,row:t.row,langid:t.langid,inputlang:t.inputlang,hasparentmodel:t.hasparentmodel,history:t.history,depth_level:t.depth_level}}):t._e(),t._v(" "),t.isModel(e)?i("model-builder",{attrs:{langid:t.langid,ischild:!0,model_builder:t.getModel(e.model),activetab:t.isLoadedModel(t.getModel(e.model),t.activetab==s),parentrow:t.row}}):t._e()],1):t._e(),t._v(" "),t._l(t.chunkGroups(e.fields),function(e,s){return t.isGroup(e)&&!t.isTab(e)?i("form-group",{key:s,attrs:{group:e,model:t.model,hasparentmodel:t.hasparentmodel,langid:t.langid,inputlang:t.inputlang,row:t.row,history:t.history,depth_level:t.depth_level}}):t._e()})],2)])}),0)])},[],!1,null,null,null).exports;function q(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var V=d({name:"form-builder",props:["model","row","rows","langid","canaddrow","progress","history","hasparentmodel","selectedlangid","gettext_editor","depth_level"],components:{FormTabsBuilder:B},data:function(){return{submit:!1,isActive:!0,cansave:!0,form:null}},mounted:function(){var t=this;this.form=$("#"+this.formID),eventHub.$on("changeFormSaveState",function(e){e.model==t.model.slug&&(t.cansave=e.state)})},watch:{row:{handler:function(t,e){var i=!this.isOpenedRow||!e||t.id!=e.id;t&&e&&t.id==e.id&&!this.history.history_id||(this.initForm(t,i),eventHub.$emit("sendParentRow"))},deep:!0}},computed:{formID:function(){return"form-"+this.depth_level+"-"+this.model.slug},isSingle:function(){return 1==this.model.minimum&&1==this.model.maximum},isOpenedRow:function(){return this.row&&"id"in this.row},title:function(){var t;if(this.isOpenedRow){if(!(t=this.$root.getModelProperty(this.model,"settings.title.update")))return this.trans("edit-row-n")+" "+this.row.id;for(var e in this.row){var i=this.row[e];if(this.isFieldSelect(e))for(var s=this.$root.languageOptions(this.model.fields[e].options,e),n=0;n<s.length;n++)if(s[n][0]==i){i=s[n][1];break}t=t.replace(":"+e,i)}return t}return(t=this.$root.getModelProperty(this.model,"settings.title.insert"))||(t=this.$root.getModelProperty(this.model,"settings.title.create"))?t:this.trans("new-row")},newRowTitle:function(){return this.$parent.newRowTitle()},saveButton:function(){return this.$root.getModelProperty(this.model,"settings.buttons.update")||this.trans("save")},sendButton:function(){return this.$root.getModelProperty(this.model,"settings.buttons.create")||this.trans("send")},hasLocaleFields:function(){for(var t in this.model.fields){if(1==this.model.fields[t].locale)return!0;var e=this.model.fields[t].options;if(e&&e[0]&&"object"==z(e[0][1])&&null!==e[0][1]&&"language_id"in e[0][1]==1)return!0}return!1},languages:function(){return this.$root.languages},selectedLanguage:function(){if(!this.selectedlangid)return this.languages[0];for(var t in this.languages)if(this.languages[t].id==this.selectedlangid)return this.languages[t];return this.languages[0]},canUpdateForm:function(){return(!this.isOpenedRow||0!=this.$root.getModelProperty(this.model,"settings.editable"))&&this.cansave},canShowGettext:function(){return!("languages"!=this.model.slug||!this.$root.gettext)}},methods:{changeLanguage:function(t){this.$parent.selected_language_id=t},getLangName:function(t){return this.$root.getLangName(t)},showHistory:function(t){this.$parent.showHistory(t)},getComponents:function(t){return this.$parent.getComponents(t)},resetForm:function(){this.$parent.resetForm()},initForm:function(t,e){var i=t&&"id"in t;if(!1!==e)for(var s in this.model.fields)this.$set(this.model.fields[s],"value",null);if(this.resetErrors(),i||this.$parent.resetForm(),i&&this.canaddrow&&0==this.model.editable&&0==this.$parent.hasChilds())this.$parent.resetForm();else{for(var s in this.model.fields)if(!i||this.model.fields[s].value!=t[s]||e){var n=void 0===(n=i?t[s]:null)?null:n;this.model.fields[s].value=n,this.model.fields[s].$original_value=n,eventHub.$emit("updateField",this.buildEventData({key:s,field:this.model.fields[s]}))}i?this.isActive=null==t.published_at:(this.isActive=!0,this.hasParentModel()&&this.$parent.closeHistory())}},resetErrors:function(){this.form.find(".form-group.has-error").firstLevelForm(this.form[0]).removeClass("has-error").find(".help-block").remove(),this.form.find(".fa.fa-times-circle-o").firstLevelForm(this.form[0]).remove(),this.form.find(".multi-languages .has-error").firstLevelForm(this.form[0]).removeClass("has-error"),this.removeActiveTab(this.form.find(".nav-tabs li[has-error]").firstLevelForm(this.form[0])),this.$parent.progress=!1},sendForm:function(t,e,i){var s=this;if(1!=this.submit){if("undefined"!=typeof CKEDITOR)for(var n in CKEDITOR.instances)CKEDITOR.instances[n].updateElement();var o={_model:this.model.slug},r={};null!=this.model.foreign_column&&this.$parent.parentrow&&(o[this.model.foreign_column[this.$parent.getParentTableName()]]=this.$parent.parentrow.id),"update"==e?(o._id=this.row.id,o._method="put"):(this.langid&&(o.language_id=this.langid),this.hasParentModel()&&this.$parent.rows.save_children.length>0&&(r._save_children=this.$parent.rows.save_children)),this.resetErrors(),this.$parent.progress=!0,$(t.target).ajaxSubmit({url:this.$root.requests[e],data:r,beforeSubmit:function(t,e,i){for(var s in o)t.unshift({name:s,value:o[s]})},success:function(t){if(s.submit=!0,s.$parent.progress=!1,"object"!=$.type(t)||!("type"in t))return s.unknownAjaxErrorResponse();setTimeout(function(){s.$root.openAlert(t.title,t.message,t.type,null,function(){setTimeout(function(){s.submit=!1},500)})},100),i(t)},error:function(t){s.resetErrors(),s.$root.errorResponseLayer(t,422,function(){var e=t.responseJSON,i=[];for(var n in"errors"in e&&!("length"in e.errors)&&(e=e.errors),e)i="string"==typeof e[n]?[e[n]]:e[n],s.bindErrorMessages(n,i)})}})}},unknownAjaxErrorResponse:function(){var t=this;this.$root.arrorAlert(function(){t.$parent.progress=!1,setTimeout(function(){t.submit=!1},500)})},bindErrorMessages:function(t,e){var i=this,s=[],n=t.split(".");(1==n.length||2==n.length&&0==n[1])&&(t=(n=[n[0]])[0],s.push(t),n.push(0)),n=n.map(function(t,e){return 0==e?t:"["+t+"]"}),s.push(n.join("")),"[0]"==n[n.length-1]&&s.push(s.slice(0,n.length-1).concat(["[]"]).join(""));for(var o=0;o<e.length;o++)_.uniqBy(s).map(function(t){i.form.find('input[name="'+t+'"], select[name="'+t+'"], textarea[name="'+t+'"]').firstLevelForm(i.form[0]).each(i.showErrorMessage(e[o],o))})},showErrorMessage:function(t,e){var i=this;return function(){var s=$(this);if(i.colorizeTab($(this)),i.colorizeLangDropdown($(this)),$(this).is("select")?s=s.parent().parent().children().last().prev():$(this).is("textarea")?s=s.parent().children().last().prev():$(this).is("input:radio")||$(this).parent().hasClass("label-wrapper")?s=0==(s=s.parent().parent().parent()).find(".help-block").length?s.children().last().prev():null:$(this).parent().hasClass("input-group")&&(s=$(this).parent()),s&&s.after('<span class="help-block">'+t+"</span>"),0==e){var n=$(this).closest("div.form-group").addClass("has-error").find("> label");0==n.find(".fa-times-circle-o").length&&n.prepend('<i class="fa fa-times-circle-o"></i> ')}}},buildEventData:function(t){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){q(t,e,i[e])})}return t}({table:this.model.slug,model:this.model,depth_level:this.depth_level},t)},saveForm:function(t){var e=this,i=this.isOpenedRow?"update":"store";this.sendForm(t,i,function(t){if(!t.data)return!1;if("store"==i){var s=_.cloneDeep(t.data.rows[0]);e.hasParentModel()&&e.saveParentChilds(t),eventHub.$emit("onSubmit",e.buildEventData({row:s,request:t.data})),eventHub.$emit("onCreate",e.buildEventData({row:s,request:t.data}));var n=e.$root.getModelProperty(e.model,"settings.autoreset");1==e.model.minimum&&1==e.model.maximum||!1===n?!1===n&&(e.row=s,e.scrollToForm()):e.initForm(e.$parent.emptyRowInstance())}else if("update"==i){s=_.cloneDeep(t.data.row);for(var o in eventHub.$emit("onSubmit",e.buildEventData({row:s,request:t.data})),eventHub.$emit("onUpdate",e.buildEventData({row:s,request:t.data})),t.data.row)e.row[o]=t.data.row[o],o in e.model.fields&&(e.model.fields[o].value=t.data.row[o])}!0!==e.hasparentmodel&&e.$parent.$parent.pushOption("store"==i?t.data.rows[0]:t.data.row,i)})},removeActiveTab:function(t,e){t.filter(function(){return!0===e||!$(this).hasClass("model-tab")}).removeAttr("data-toggle").removeAttr("data-original-title").removeAttr("has-error").tooltip("destroy").find("a > .fa.fa-exclamation-triangle").remove()},colorizeTab:function(t){var e=this;t.parents(".tab-pane").each(function(){var t=function(t){var e=t.parent().prev().find("li"),i=t.attr("id"),s=i?e.parent().find('> li > a[href="#'+i+'"]'):null;return s?s.parent():e.eq(t.index())};$(this).one("click",function(){0==$(this).find(".nav-tabs-custom:not(.default) li[has-error]").length&&e.removeActiveTab(t($(this)),!0)}),t($(this)).each(function(){$(this).hasClass("has-error")||$(this).attr("data-toggle","tooltip").attr("data-original-title",e.trans("tab-error")).attr("has-error","").one("click",function(){var t=$(this).parents(".nav-tabs-custom").find("> .nav-tabs > li.active[has-error]").not($(this).parent().find("> li"));e.removeActiveTab($([this].concat(t.toArray())),!0)}).find("a").prepend('<i class="fa fa-exclamation-triangle"></i>')})})},colorizeLangDropdown:function(t){var e=t.parents(".field-wrapper"),i=e.attr("data-field"),s=e.attr("data-lang");if(i&&(1==this.model.fields[i].locale&&s!=this.selectedLanguage.slug)){var n=this.form.find(".multi-languages .dropdown-toggle");n.addClass("has-error"),n.next().find('li[data-slug="'+s+'"]').addClass("has-error"),s==this.languages[0].slug&&this.$root.openAlert(this.trans("warning"),this.trans("lang-error"),"warning")}},scrollToForm:function(){var t=this;setTimeout(function(){$("html, body").animate({scrollTop:$("#"+t.formID).offset().top-10},500)},this.$root.isTest?0:500)},hasParentModel:function(){return"model-builder"==this.$parent.$options.name},saveParentChilds:function(t){if(this.$parent.rows.save_children=[],this.$parent.isWithoutParentRow){for(var e=this.$parent.$parent;!("rows"in e);)e=e.$parent;for(var i=0;i<t.data.rows.length;i++)e.rows.save_children.push({table:this.model.slug,id:t.data.rows[i].id,column:this.model.foreign_column[this.$parent.getParentTableName(!0)]})}},trans:function(t){return this.$root.trans(t)},openGettextEditor:function(){this.gettext_editor=this.row},isFieldSelect:function(t){return!!(t&&t in this.model.fields&&["select","radio"].indexOf(this.model.fields[t].type)>-1)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{attrs:{method:"post",action:"",id:t.formID,"data-form":t.model.slug},on:{submit:function(e){return e.preventDefault(),t.saveForm(e)}}},[i("div",{class:["box",{"box-info":t.isActive,"box-warning":!t.isActive}]},[i("div",{staticClass:"box-header with-border",class:{visible:t.hasLocaleFields||t.canShowGettext||t.isOpenedRow&&t.model.history},attrs:{"data-header":""}},[i("h3",{staticClass:"box-title"},[t.model.localization?i("span",{staticClass:"fa fa-globe",attrs:{"data-toggle":"tooltip","data-original-title":t.trans("multilanguages")}}):t._e(),t._v(" "+t._s(t.title))]),t._v(" "),t.isOpenedRow&&t.canShowGettext?i("button",{staticClass:"add-row-btn pull-right btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(e){return t.openGettextEditor()}}},[i("i",{staticClass:"fa fa-globe"}),t._v(" "+t._s(t.trans("gettext-open")))]):t._e(),t._v(" "),t.isOpenedRow&&t.canaddrow&&!t.isSingle?i("button",{staticClass:"add-row-btn pull-right btn btn-default btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.resetForm(e)}}},[i("i",{staticClass:"fa fa-plus"}),t._v(" "+t._s(t.newRowTitle))]):t._e(),t._v(" "),t.isOpenedRow&&t.model.history&&t.isSingle?i("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-toggle":"tooltip",title:"","data-original-title":t.trans("history.changes")},on:{click:function(e){return t.showHistory(t.row)}}},[i("i",{staticClass:"fa fa-history"}),t._v(" "+t._s(t.trans("history.show")))]):t._e(),t._v(" "),t._l(t.getComponents("form-header"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})}),t._v(" "),t.hasLocaleFields&&t.selectedLanguage?i("div",{staticClass:"dropdown pull-right multi-languages",attrs:{"data-form-language-switch":""}},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",id:"languageDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[i("i",{staticClass:"fa fa-globe"}),t._v(" "),i("span",{staticClass:"text"},[t._v(t._s(t.getLangName(t.selectedLanguage)))]),t._v(" "),i("span",{staticClass:"caret"})]),t._v(" "),i("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"languageDropdown"}},t._l(t.languages,function(e){return t.selectedLanguage.id!=e.id?i("li",{attrs:{"data-slug":e.slug}},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.changeLanguage(e.id)}}},[i("i",{staticClass:"fa fa-exclamation-triangle"}),t._v(t._s(t.getLangName(e))+"\n                        ")])]):t._e()}),0)]):t._e()],2),t._v(" "),i("div",{staticClass:"box-body",class:{cantadd:!t.cansave}},[t._l(t.getComponents("form-top"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})}),t._v(" "),i("form-tabs-builder",{attrs:{model:t.model,childs:!0,langid:t.langid,inputlang:t.selectedLanguage,row:t.row,cansave:t.cansave,hasparentmodel:t.hasparentmodel,depth_level:t.depth_level,history:t.history}}),t._v(" "),t._l(t.getComponents("form-bottom"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})})],2),t._v(" "),t.canUpdateForm?i("div",{staticClass:"box-footer",attrs:{"data-footer":""}},[t._l(t.getComponents("form-footer"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})}),t._v(" "),t.progress?i("button",{class:["btn","btn-"+(t.isOpenedRow?"success":"primary")],attrs:{type:"button","data-action-type":"updating"}},[i("i",{staticClass:"fa updating fa-refresh"}),t._v(" "+t._s(t.isOpenedRow?t.trans("saving"):t.trans("sending")))]):t._e(),t._v(" "),t.progress?t._e():i("button",{class:["btn","btn-"+(t.isOpenedRow?"success":"primary")],attrs:{type:"submit","data-action-type":t.isOpenedRow?"update":"create",name:"submit"}},[t._v(t._s(t.isOpenedRow?t.saveButton:t.sendButton))])],2):t._e()])])},[],!1,null,null,null).exports,H=d({methods:{trans:function(t){return this.$root.trans(t)}}},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"overlay"},[e("i",{staticClass:"fa fa-refresh fa-spin"}),this._v(" "),e("p",[this._v(this._s(this.trans("loading")))])])},[],!1,null,null,null).exports;function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var G=d({props:["model","item","field","name","image"],components:{File:j},computed:{getFiles:function(){var t=this.fieldValue;return t?$.isArray(t)?t:[t]:[]},fieldValue:function(){var t=this.field in this.model.fields?this.model.fields[this.field]:null,e=this.item,i=this.field in e?this.getMutatedValue(e[this.field],t):"";if(t){var s="radio"==t.type;if("select"==t.type||s){if("multiple"in t&&1==t.multiple&&$.isArray(i)&&!s){for(var n=[],o=i,r=(d=this.getRelatedModelTable(t))?this.getLanguageSelectOptions(t.options,this.getRelatedModelTable(t)):t.options,a=0;a<o.length;a++){var l=r.filter(function(t){return t[0]==o[a]}.bind(this));l.length>0&&n.push(l[0][1])}return n.join(", ")}var d=this.getRelatedModelTable(t);if(!(r=s||!d?t.options:this.getLanguageSelectOptions(t.options,d)))return i;for(a=0;a<r.length;a++)if(i==r[a][0])return r[a][1]}else{if("checkbox"==t.type)return 1==i?this.trans("yes"):this.trans("no");"date"==t.type&&!0===t.multiple?i=(i||[]).map(function(t){var e=moment(t);return e._isValid?e.format("DD.MM.YYYY"):t}).join(", "):"time"==t.type&&!0===t.multiple&&(i=(i||[]).join(", "))}}var u=this.$root.getModelProperty(this.model,"settings.columns."+this.field+".add_before"),c=this.$root.getModelProperty(this.model,"settings.columns."+this.field+".add_after");return"object"==Y(i)?i:i||0==i?(u||"")+i+(c||""):null},onlyEncodedTitle:function(){return!1===this.$root.getModelProperty(this.model,"settings.columns."+this.field+".encode",!0)?"":this.fieldValue},fieldValueLimitedAndEncoded:function(){return this.encodeValue(this.stringLimit(this.fieldValue))}},methods:{stringLimit:function(t){var e=this.getFieldLimit(Object.keys(this.$parent.$parent.columns).length<5?40:20);return 0!=e&&t.length>e&&!1!==this.$root.getModelProperty(this.model,"settings.columns."+this.field+".encode",!0)?t.substr(0,e)+"...":t},encodeValue:function(t){return this.isRealField(this.field)&&1==this.$root.getModelProperty(this.model,"settings.columns."+this.field+".encode",!0)&&(t=$(document.createElement("div")).text(t).html()),this.isRealField(this.field)&&"text"==this.model.fields[this.field].type&&0===parseInt(this.model.fields[this.field].limit)?t.replace(/\n/g,"<br>"):this.isRealField(this.field)&&"string"==this.model.fields[this.field].type&&("phone"in this.model.fields[this.field]||"phone_link"in this.model.fields[this.field])?'<a href="tel:'+t+'">'+t+"</a>":t},getRelatedModelTable:function(t){var e=t.belongsTo||t.belongsToMany;return!!e&&e.split(",")[0]},getMutatedValue:function(t,e){if(e&&"locale"in e){var i=this.$root.languages[0].slug;if(t&&"object"===Y(t)){if(i in t&&(t[i]||0==t[i]))t=t[i];else for(var s in t)if(t[s]||0===t[s]){t=t[s];break}"object"==Y(t)&&(t="")}}return 0===t?0:t||""},getLanguageSelectOptions:function(t,e){var i=(e=this.$root.models[e])&&e.localization?{language_id:this.$root.language_id}:{};return this.$root.languageOptions(t,this.model.fields[this.field],i,!1)},isFile:function(t){return t in this.model.fields&&!("file"!=this.model.fields[t].type||!this.isEncodedValue(t))},isRealField:function(t){return t in this.model.fields},getFieldLimit:function(t){if(!1===this.isEncodedValue(this.field))return 0;if(this.isRealField(this.field)){var e,i=this.model.fields[this.field];return(e="limit"in i?i.limit:this.$root.getModelProperty(this.model,"settings.columns."+this.field+".limit",t))||0===e?e:t}return this.$root.getModelProperty(this.model,"settings.columns."+this.field+".limit",t)},trans:function(t){return this.$root.trans(t)},isEncodedValue:function(t){return this.$root.getModelProperty(this.model,"settings.columns."+t+".encode",!0)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return null!=t.fieldValue?i("div",[t.isFile(t.field)?i("div",{staticClass:"filesList"},t._l(t.getFiles,function(e,s){return i("div",[i("file",{attrs:{file:e,field:t.field,model:t.model,image:t.image}}),t._v(" "),s!=t.getFiles.length-1?i("span",[t._v(", ")]):t._e()],1)}),0):i("span",{attrs:{"data-toggle":t.fieldValue.length>20?"tooltip":"","data-original-title":t.onlyEncodedTitle},domProps:{innerHTML:t._s(t.fieldValueLimitedAndEncoded)}})]):t._e()},[],!1,null,null,null).exports,X=i(138),W=d({props:["row","rows","rowsdata","buttons","count","field","gettext_editor","model","orderby","history","checked","button_loading","depth_level"],components:{TableRowValue:G,draggable:i.n(X).a},data:function(){return{enabled_columns:{},hidden:["language_id","_order","slug","published_at","updated_at","created_at"],autoSize:!1}},created:function(){var t=this;null!=this.model.foreign_column&&this.hidden.push(this.model.foreign_column),this.resetAllowedColumns(),0==this.autoSize&&this.$parent.$parent.checkActiveSize(this.columns),eventHub.$on("selectHistoryRow",function(e){t.model.slug==e.table&&t.selectRow({id:e.row_id},null,null,e.history_id,e.row)})},computed:{multipleCheckbox:function(){return this.checked.length>0},defaultColumns:function(){for(var t={},e=0;e<this.model.columns.length;e++)o=this.model.columns[e],this.$root.getModelProperty(this.model,"settings.columns."+o+".hidden")||-1==this.hidden.indexOf(o)&&this.avaliableColumns.indexOf(o)>-1&&(!(o in this.model.fields)||1!=this.model.fields[o].hidden&&1!=this.model.fields[o].invisible)&&(t[this.model.columns[e]]=this.fieldName(this.model.columns[e]));var i=this.$root.getModelProperty(this.model,"settings.columns"),s=[];if(i){for(var e in i){var n={};for(var o in t){for(var r in i)n=this.addColumn(n,r,o,"before",i,s);for(var r in n[o]=t[o],i)n=this.addColumn(n,r,o,"after",i,s)}t=n}for(var o in i)if(!(o in t)&&1!=i[o].hidden&&1!=i[o].invisible){var a=this.getColumnRightKey(o);t[o]=i[o].name||i[o].title||this.model.fields[a].column_name||this.model.fields[a].name}}return!1===this.$root.getModelProperty(this.model,"settings.increments")&&"id"in t&&delete t.id,this.$parent.default_columns=Object.keys(t),t},columns:function(){var t={};for(var e in this.enabled_columns)1==this.enabled_columns[e].enabled&&(t[e]=this.enabled_columns[e].name);return t},avaliableColumns:function(){return["id"].concat(Object.keys(this.model.fields))},isEditable:function(){return this.model.editable||this.$parent.$parent.hasChilds()>0},isEnabledHistory:function(){return 1==this.model.history},canShowGettext:function(){return"languages"==this.model.slug&&1==this.$root.gettext},formID:function(){return"form-"+this.depth_level+"-"+this.model.slug},availableButtons:function(){return this.$parent.availableButtons},isCheckedAll:function(){var t=this.rows.data.map(function(t){return t.id});return 0!=this.checked.length&&_.isEqual(t,this.checked)}},methods:{addColumn:function(t,e,i,s,n,o){if(s in n[e]&&(n[e][s]==i||n[e][s]+"_id"==i)){var r=this.getColumnRightKey(e);if(o.indexOf(r)>-1)return t;o.push(r),e in t&&delete t[e],r in t&&delete t[r],t[r]=n[e].name||n[e].title||this.model.fields[r].column_name||this.model.fields[r].name}return t},toggleAllCheckboxes:function(){var t=this.rows.data.map(function(t){return t.id});this.$parent.checked=this.isCheckedAll?[]:t},checkRow:function(t,e){var i=this.$parent.checked.indexOf(t);e in this.model.fields&&["file"].indexOf(this.model.fields[e].type)>-1||(-1==i?this.$parent.checked.push(t):this.$parent.checked.splice(i,1))},resetAllowedColumns:function(){var t=_.cloneDeep(this.defaultColumns),e={},i=Object.keys(t),s=Object.keys(this.model.fields);for(var n in t)e[n]={name:t[n],enabled:!0};for(var n in this.model.fields)if(!(n in e)){for(var o=null,r=!0,a=s.slice(0,s.indexOf(n)),l=s.slice(s.indexOf(n)+1),d=a.length-1;d>=0;d--)if(i.indexOf(a[d])>-1){o=i.indexOf(a[d]);break}if(!o)for(d=0;d<l.length;d++)if(i.indexOf(l[d])>-1){o=i.indexOf(l[d]),r=!1;break}null===o?i.push(n):i.splice(o+(r?1:0),0,n),e[n]={name:this.fieldName(n),enabled:!1}}var u={};for(d=0;d<i.length;d++)u[i[d]]=e[i[d]];this.$parent.enabled_columns=this.enabled_columns=u},isReservedRow:function(t){return this.$parent.isReservedRow(t.id)},buttonsCount:function(t){var e=this.getButtonsForRow(t),i=0;return i+=this.isEnabledHistory?1:0,i+=this.canShowGettext?1:0,i-=this.model.publishable?0:1,Object.keys(e||{}).length+i},getButtonsForRow:function(t){if(!(this.rows.buttons&&t.id in this.rows.buttons))return{};var e={},i=this.rows.buttons[t.id];for(var s in i)["button","both","multiple"].indexOf(i[s].type)>-1&&(e[s]=i[s]);return e},getButtonKey:function(t,e){return this.$parent.getButtonKey(t,e)},buttonAction:function(t,e,i){return this.$parent.buttonAction(t,e,i)},toggleSorting:function(t){if(!1!==this.$root.getModelProperty(this.model,"settings.sortable")){var e=this.orderby[0]==t?1-this.orderby[1]:0;this.$parent.orderBy=[t,e]}},fieldName:function(t){if(t in this.model.fields)return this.model.fields[t].column_name||this.$root.getModelProperty(this.model,"settings.columns."+t+".name")||this.model.fields[t].name;switch(t){case"id":return this.$root.trans("number");case"created_at":return this.$root.trans("created");case"updated_at":return this.$root.trans("updated");default:return t}},isActiveRow:function(t){return!!this.row&&t.id==this.row.id},enableDragging:function(){this.$parent.initTimeout(!1),this.$parent.dragging=!1,$('[data-toggle="tooltip"]').tooltip("enable")},beforeUpdateOrder:function(t){this.$parent.destroyTimeout(),this.$parent.dragging=!0,$('[data-toggle="tooltip"]').tooltip("disable")},updateOrder:function(t){var e=this;if("_order"==this.orderby[0]){for(var i=this.rowsdata[t.oldIndex],s=this.rowsdata[t.newIndex],n=i._order,o=s._order,r={},a=this.$parent.$parent.rows.data.length-1;a>=0;a--){var l=this.$parent.$parent.rows.data[a];l.id==i.id?(l._order=o,r[l.id]=l._order):n>o&&l._order>=o&&l._order<=n?(l._order+=1,r[l.id]=l._order):n<o&&l._order<=o&&l._order>n&&(l._order-=1,r[l.id]=l._order)}this.$http.post(this.$root.requests.updateOrder,{model:this.model.slug,rows:r}).then(function(t){var i=t.data;if(i&&"type"in i)return e.$root.openAlert(i.title,i.message,"danger");e.enableDragging()}).catch(function(t){this.$root.errorResponseLayer(t),this.enableDragging()})}else this.enableDragging()},getDateByField:function(t,e){return e in this.model.fields?t[e]:moment(t[e]).format("DD.MM.Y HH:mm")},showInfo:function(t){var e="";null!=t.created_at&&(e+=this.$root.trans("created-at")+": <strong>"+this.getDateByField(t,"created_at")+"</strong><br>"),null!=t.updated_at&&0!=this.model.editable&&(e+=this.$root.trans("last-change")+": <strong>"+this.getDateByField(t,"updated_at")+"</strong><br>"),null!=t.published_at&&(e+=this.$root.trans("published-at")+": <strong>"+this.getDateByField(t,"published_at")+"</strong>"),this.$root.openAlert(this.$root.trans("row-info-n")+" "+t.id,e,"primary",null,function(){})},openGettextEditor:function(t){this.$parent.$parent.gettext_editor=t},showHistory:function(t){this.$parent.$parent.showHistory(t)},selectRow:function(t,e,i,s,n){var o=this;if((!this.row||this.row.id!=t.id||s)&&(!i||this.model.slug==i)){if(!0===t&&null===e)return this.$parent.row=null;var r=function(e){for(var i in e)t[i]=e[i];if(o.$set(o.$parent.$parent,"row",_.cloneDeep(t,!0)),n)for(var i in n)o.$set(n,i,t[i]);o.$parent.$parent.closeHistory(!!s),o.scrollToForm()};e?r(e):this.$http.get(this.$root.requests.get("show",{model:this.model.slug,id:t.id,subid:s})).then(function(t){r(t.data)}).catch(function(t){this.$root.errorResponseLayer(t)})}},removeRow:function(t){this.$parent.removeRow(t)},togglePublishedAt:function(t){this.$parent.togglePublishedAt(t)},isImageField:function(t){if(t in this.model.fields&&"image"in(t=this.model.fields[t]))return!0;return!1},getColumnRightKey:function(t){return!(t in this.model.fields)&&t+"_id"in this.model.fields?t+"_id":t},scrollToForm:function(){var t=this;0==this.$parent.$parent.activeSize&&setTimeout(function(){$("html, body").animate({scrollTop:$("#"+t.formID).offset().top-10},t.$root.isTest?0:500)},25)},trans:function(t){return this.$root.trans(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("table",{class:["table","data-table","table-bordered","table-striped",{sortable:t.model.sortable&&"_order"==t.orderby[0]}],attrs:{id:"table-"+t.model.slug,"data-table-rows":t.model.slug,"data-depth":t.depth_level}},[i("thead",{attrs:{"data-table-head":""}},[i("tr",[t.multipleCheckbox?i("th",{on:{click:t.toggleAllCheckboxes}},[i("i",{staticClass:"fa",class:t.isCheckedAll?"fa-check-square-o":"fa-square-o",attrs:{"data-toggle":"tooltip","data-original-title":t.trans(t.isCheckedAll?"uncheck-all":"check-all")}})]):t._e(),t._v(" "),t._l(t.columns,function(e,s){return i("th",{class:"th-"+s,on:{click:function(e){return t.toggleSorting(s)}}},[t.orderby[0]==s&&0==t.orderby[1]?i("i",{staticClass:"arrow-sorting fa fa-arrow-up"}):t._e(),t._v(" "),t.orderby[0]==s&&1==t.orderby[1]?i("i",{staticClass:"arrow-sorting fa fa-arrow-down"}):t._e(),t._v("\n                    "+t._s(e)+"\n                ")])}),t._v(" "),i("th",{staticClass:"th-options-buttons"})],2)]),t._v(" "),i("draggable",{attrs:{tag:"tbody"},on:{start:t.beforeUpdateOrder,end:t.updateOrder}},t._l(t.rowsdata,function(e,s){return i("tr",{key:e.id,attrs:{"data-id":e.id}},[t.multipleCheckbox?i("td",{staticClass:"checkbox-td"},[i("div",{staticClass:"checkbox-box",on:{click:function(i){return t.checkRow(e.id)}}},[i("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked.indexOf(e.id)>-1}}),t._v(" "),i("span",{staticClass:"checkmark"})])]):t._e(),t._v(" "),t._l(t.columns,function(s,n){return i("td",{class:["td-"+n,{image_field:t.isImageField(n)}],attrs:{"data-field":n},on:{click:function(i){return t.checkRow(e.id,n)}}},[i("table-row-value",{attrs:{field:n,name:s,item:e,model:t.model,image:t.isImageField(n)}})],1)}),t._v(" "),i("td",{staticClass:"buttons-options",class:["additional-"+t.buttonsCount(e)],attrs:{"data-model":t.model.slug}},[t.isEditable?i("div",[i("button",{class:["btn","btn-sm",{"btn-success":t.isActiveRow(e),"btn-default":!t.isActiveRow(e)}],attrs:{"data-button":"edit","data-id":e.id,type:"button","data-toggle":"tooltip",title:"","data-original-title":t.trans("edit")},on:{click:function(i){return t.selectRow(e)}}},[i("i",{staticClass:"fa fa-pencil"})])]):t._e(),t._v(" "),t.isEnabledHistory?i("div",[i("button",{staticClass:"btn btn-sm btn-default",class:{"enabled-history":t.isActiveRow(e)&&t.history.history_id},attrs:{"data-button":"history",type:"button","data-toggle":"tooltip",title:"","data-original-title":t.trans("history.changes")},on:{click:function(i){return t.showHistory(e)}}},[i("i",{staticClass:"fa fa-history"})])]):t._e(),t._v(" "),t.canShowGettext?i("div",[i("button",{staticClass:"btn btn-sm btn-default",attrs:{"data-button":"gettext",type:"button","data-toggle":"tooltip",title:"","data-original-title":t.trans("gettext-update")},on:{click:function(i){return t.openGettextEditor(e)}}},[i("i",{staticClass:"fa fa-globe"})])]):t._e(),t._v(" "),i("div",[i("button",{staticClass:"btn btn-sm btn-default",attrs:{type:"button","data-button":"show","data-toggle":"tooltip",title:"","data-original-title":t.trans("row-info")},on:{click:function(i){return t.showInfo(e)}}},[i("i",{staticClass:"fa fa-info"})])]),t._v(" "),t._l(t.getButtonsForRow(e),function(s,n){return i("div",[i("button",{class:["btn","btn-sm",s.class],attrs:{type:"button","data-button":"action-"+s.key,"data-toggle":"tooltip",title:"","data-original-title":s.name},on:{click:function(i){return t.buttonAction(n,s,e)}}},[i("i",{class:["fa",t.button_loading==t.getButtonKey(e.id,n)?"fa-refresh":s.icon,{"fa-spin":t.button_loading==t.getButtonKey(e.id,n)}]})])])}),t._v(" "),t.model.publishable?i("div",[i("button",{class:["btn","btn-sm",{"btn-info":!e.published_at,"btn-warning":e.published_at}],attrs:{"data-button":"publishable",type:"button","data-toggle":"tooltip",title:"","data-original-title":e.published_at?t.trans("hide"):t.trans("show")},on:{click:function(i){return t.togglePublishedAt(e)}}},[i("i",{class:{fa:!0,"fa-eye":e.published_at,"fa-eye-slash":!e.published_at}})])]):t._e(),t._v(" "),t.model.deletable&&t.count>t.model.minimum?i("div",[i("button",{staticClass:"btn btn-danger btn-sm",class:{disabled:t.isReservedRow(e)},attrs:{"data-button":"delete",type:"button","data-toggle":"tooltip",title:"","data-original-title":t.trans("delete")},on:{click:function(i){return t.removeRow(e,s)}}},[i("i",{staticClass:"fa fa-remove"})])]):t._e()],2)],2)}),0)],1)])},[],!1,null,null,null);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var K=d({props:["model","row","rows","langid","progress","search","history","gettext_editor","iswithoutparent","activetab","depth_level"],components:{Refreshing:H,TableRows:W.exports},data:function(){var t=this.iswithoutparent?500:"limit"in localStorage?localStorage.limit:this.$root.getModelProperty(this.model,"settings.pagination.limit",10);return{table:null,pagination:{position:1,limit:parseInt(t),limits:[5,10,20,30,50,100,200,500],refreshing:!1,maxpages:15},searching:!1,dragging:!1,orderBy:null,refresh:{refreshing:!0,count:0,interval:this.getRefreshInterval()},checked:[],default_columns:[],enabled_columns:null,button_loading:!1}},created:function(){var t=this;this.root=this.$root.$http.options.root,this.setOrder(),this.loadRows(),eventHub.$on("onCreate",function(e){if(e.table==t.model.slug&&e.depth_level==t.depth_level){var i=e.request,s=Math.ceil(t.rows.count/t.pagination.limit);if(t.isReversed(!0)&&t.rows.count>0&&!t.$parent.isWithoutParentRow&&s==t.rows.count/t.pagination.limit)t.setPosition(s+1,!!t.$parent.isWithoutParentRow||null);else if(t.isReversed(!0)&&t.pagination.position<s&&!t.$parent.isWithoutParentRow)t.setPosition(s);else if(1==t.pagination.position||t.isReversed(!0)&&t.pagination.position==s||t.$parent.isWithoutParentRow){var n=i.rows.concat(t.rows.data);for(var o in n.length>t.pagination.limit&&(n=n.slice(0,t.pagination.limit)),i.buttons)t.rows.buttons[o]=i.buttons[o];t.rows.data=n,t.rows.count+=i.rows.length}else t.loadRows()}}),eventHub.$on("onUpdate",function(e){if(e.table==t.model.slug&&e.depth_level==t.depth_level){var i=e.row;for(var s in t.rows.data)if(t.rows.data[s].id==i.id)for(var n in i)t.$parent.rows.data[s][n]=i[n];t.$parent.closeHistory()}})},destroyed:function(){this.destroyTimeout()},events:{reloadRows:function(t){this.model.slug==t&&this.loadRows()}},watch:{progress:function(t){1==t?this.destroyTimeout():this.initTimeout(!1)},langid:function(t){1==this.model.localization&&this.setPosition(1)},activetab:function(t){1==t&&this.initTimeout(!1)},search:{deep:!0,handler:function(t){var e=t.query||t.query_to,i=this.searching;this.searching=!(!e||!(e.length>=3||t.column&&(t.column in this.model.fields&&["select","option"].indexOf(this.model.fields[t.column].type)>-1||$.isNumeric(e)))),this.search.used=!0,1==this.searching&&0==i?this.setPosition(1,!0):(this.searching||0==this.searching&&1==i)&&this.loadRows(!0)}},enabled_columns:{deep:!0,handler:function(t,e){e&&t&&this.loadRows(!0)}}},computed:{availableButtons:function(){var t={};for(var e in this.rows.buttons)for(var i in this.rows.buttons[e])["action","both","multiple"].indexOf(this.rows.buttons[e][i].type)>-1&&(t[i]=this.rows.buttons[e][i]);return t},hasButtons:function(){return Object.keys(this.availableButtons).length>0},title:function(){var t;return(t=this.$root.getModelProperty(this.model,"settings.title.rows"))?t:this.trans("rows")},isPaginationEnabled:function(){return!1!==this.$root.getModelProperty(this.model,"settings.pagination.enabled")&&!this.iswithoutparent},rowsData:function(){var t=this,e=this.orderBy[0],i=this.isNumericValue(e),s=this.isDateValue(e),n=!0!==this.$root.getModelProperty(this.model,"settings.columns."+e+".encode",!0);if(this.isDateValue(e)&&e in this.model.fields)var o=this.$root.fromPHPFormatToMoment(this.model.fields[e].date_format);return this.rows.data.slice(0).sort(function(r,a){if(!r||!a)return!1;if(!0!==r[e]&&!1!==r[e]||(r[e]=!0===r[e]?1:0),!0!==a[e]&&!1!==a[e]||(a[e]=!0===a[e]?1:0),r=t.getEncodedValue(r[e],n),a=t.getEncodedValue(a[e],n),i)return 1==t.orderBy[1]?a-r:r-a;if(s&&o){var l=moment(r,o),d=moment(a,o);return l.isValid()&&d.isValid()?1==t.orderBy[1]?d-l:l-d:0}return 1==t.orderBy[1]?a.toLowerCase().localeCompare(r.toLowerCase(),"sk"):r.toLowerCase().localeCompare(a.toLowerCase(),"sk")})},enabledColumnsList:function(){var t=[];for(var e in this.enabled_columns||{})1==this.enabled_columns[e].enabled&&-1==this.default_columns.indexOf(e)&&t.push(e);return t}},methods:{resetColumnsList:function(){for(var t in this.$children){var e=this.$children[t];"table-rows"==e.$options._componentTag&&e.$options.methods.resetAllowedColumns.call(e)}},getComponents:function(t){return this.$parent.getComponents(t)},getEncodedValue:function(t,e){return(e?$("<div>"+t+"</div>").text():t)+""},columnName:function(t,e){return this.$parent.getSearchingColumnName(t)},canShowColumn:function(t,e){return!!t.name&&!(e in this.model.fields&&"password"==this.model.fields[e].type)},trans:function(t){return this.$root.trans(t)},reloadRows:function(){return this.$parent.row=this.$parent.emptyRowInstance(),this.rows.data=[],this.rows.count=0,this.rows.save_children=[],this.loadRows(),!0},changeLimit:function(){localStorage.limit=this.pagination.limit,this.setPosition(1)},getParentRowId:function(){var t=this.$parent.parentrow;return t&&"id"in t?t.id:0},loadRows:function(t){if((this.$parent.isWithoutParentRow||!1===this.activetab)&&0==t)return!1;!1!==t&&(this.pagination.refreshing=!0),this.destroyTimeout();var e={},i={model:this.model.slug,parent:this.$parent.getParentTableName(this.model.without_parent),subid:this.getParentRowId(),langid:!0===this.model.localization?this.langid:0,limit:this.isPaginationEnabled?this.pagination.limit:0,page:this.pagination.position,count:this.refresh.count};1==this.searching&&(e.query=this.search.query,!0===this.search.interval&&(e.query_to=this.search.query_to),e.column=this.search.column),this.enabledColumnsList.length>0&&(e.enabled_columns=this.enabledColumnsList.join(";")),this.$http.get(this.$root.requests.get("rows",i),{params:e}).then(function(t){!0!==this.dragging&&!0!==this.progress&&this.$root&&("string"!=typeof t.data?(this.pagination.refreshing=!1,this.updateRowsData(t.data.rows,0==this.enabledColumnsList.length?null:1),this.rows.count=t.data.count,this.rows.buttons=t.data.buttons,this.$parent.rows.loaded=!0,this.isReversed()&&0==this.refresh.count&&(this.pagination.position=Math.ceil(this.rows.count/this.pagination.limit)),0==this.refresh.count&&(this.updateFieldOptions(t.data.fields,t.data),this.$parent.layouts=t.data.layouts),this.refresh.count++,this.refresh.refreshing=!1,this.$root.reloadCSRFToken(t.data.token),this.initTimeout(!1)):function(t){var e=t.request.url;for(var i in t.request.params)e=e.replace("{"+i+"}",t.request.params[i]);this.$root.openAlert(this.trans("warning"),'Nastala neakana chyba, skste neskr prosm.<br><br>Prinu zlyhania poiadavky mete zisti na tejto adrese:<br> <a target="_blank" href="'+e+'">'+e+"</a>","error")}.call(this,t))}).catch(function(t){this.$root&&(this.initTimeout(!1,!0),500==t.status&&0==this.refresh.count&&"message"in t?this.$root.errorResponseLayer(t,null):(0==this.refresh.count&&!0!==this.hasShowedError||401==t.status)&&(this.hasShowedError=!0,this.$root.errorResponseLayer(t,null)))})},destroyTimeout:function(){this.updateTimeout&&clearTimeout(this.updateTimeout)},initTimeout:function(t,e){this.destroyTimeout();var i=this.isPaginationEnabled?this.pagination.limit:0;(this.rows.count>0&&1===this.model.maximum||this.rows.count>50&&parseInt(i)>50)&&!0!==e||(this.updateTimeout=setTimeout(function(){this.loadRows(t)}.bind(this),this.refresh.interval))},updateFieldOptions:function(t,e){var i=this;for(var s in t)if("filterBy"in(e.fields[s]||{})&&e.fields[s].filterBy?this.$set(this.model,"fields."+s+".filterBy",e.fields[s].filterBy):(this.model.fields[s],delete this.model.fields[s].filterBy),"options"in this.model.fields[s]&&("string"==typeof t[s].options||Object.keys(t[s].options).length>0))if("string"==typeof t[s].options){if("$."==t[s].options.substr(0,2)){var n=t[s].options.substr(2);this.model.fields[s].options=t[n].options}}else this.model.fields[s].options=t[s].options;setTimeout(function(){i.$parent&&i.$parent.reloadSearchBarSelect&&i.$parent.reloadSearchBarSelect()},100)},isNumericValue:function(t){return["id","_order"].indexOf(t)>-1||(t in this.model.fields&&["integer","decimal","checkbox"].indexOf(this.model.fields[t].type)>-1||"integer"==this.$root.getModelProperty(this.model,"settings.columns."+t+".type"))},isDateValue:function(t){return["created_at","published_at","updated_at"].indexOf(t)>-1||t in this.model.fields&&["date","datetime"].indexOf(this.model.fields[t].type)>-1},setOrder:function(){if(null==this.orderBy){var t=this.$root.getModelProperty(this.model,"settings.orderBy");if(t){var e=Object.keys(t);return void(this.orderBy=[e[0],parseFloat(t[e[0]].toLowerCase().replace("asc",0).replace("desc",1))])}}for(var i in this.model.fields){var s=this.model.fields[i];if("orderBy"in s){return void(this.orderBy=[i,s.orderBy.toLowerCase().replace("asc",0).replace("desc",1)])}}this.orderBy=[this.model.orderBy[0],this.model.orderBy[1].toLowerCase().replace("asc",0).replace("desc",1)]},showLimit:function(t){var e=parseInt(this.rows.count/this.pagination.limit);if(this.rows.count/this.pagination.limit===e&&e--,0==t||t==e)return!0;for(var i=[[100,.3],[100,.7],[1e3,.1],[1e3,.85]],s=0,n=0;n<i.length;n++)if(e>i[n][0]){var o=parseInt(e*i[n][1]);if(t>=o&&t<=o+3)return!0;s++}var r=(r=this.pagination.maxpages-3*s)<6?6:r,a=this.pagination.position<r/2?r/2-this.pagination.position:0;a=e-this.pagination.position<r/2?r/2-(e-this.pagination.position):a;return!(this.pagination.position-a>=t+r/2||this.pagination.position<=t-r/2-a)},setPosition:function(t,e){this.pagination.position=t,this.loadRows(e)},getRefreshInterval:function(){var t=this.$root.getModelProperty(this.model,"settings.refresh_interval",1e4);return 0==t&&(t=36e5),t},updateRowsData:function(t,e){if(!0===e||this.rows.data.length==t.length&&0!=this.rows.data.length&&this.rows.data[0].id==t[0].id&&1!==e)for(var i in this.rows.data)for(var s in t[i]){var n=$.isArray(t[i][s]);(n&&!_.isEqual(this.rows.data[i][s],t[i][s])||!n)&&(this.rows.data[i][s]=t[i][s])}else this.rows.data=t},removeRow:function(t){var e=t?[t.id]:this.checked,i=function(){var i=this,s={model:this.model.slug,parent:this.$parent.getParentTableName(this.model.without_parent),id:e,subid:this.getParentRowId(),limit:this.pagination.limit,page:this.pagination.position,_method:"delete"};null!=this.$root.language_id&&(s.language_id=parseInt(this.$root.language_id)),this.$http.post(this.$root.requests.delete,s).then(function(n){var o=n.data;if(o&&"type"in o&&"error"==o.type)return i.$root.openAlert(o.title,o.message,"danger");if(i.$parent.isWithoutParentRow){var r=[];for(var a in i.rows.data)e.indexOf(i.rows.data[a].id)>-1&&r.push(a);for(var l=0;l<r.sort(function(t,e){return e-t}).length;l++)i.rows.data.splice(r[l],1)}else i.updateRowsData(o.data.rows.rows),i.rows.count=o.data.rows.count,i.pagination.position=o.data.rows.page;i.row&&e.indexOf(i.row.id)>-1&&(i.$parent.row=i.$parent.emptyRowInstance()),!0!==i.$parent.hasparentmodelMutated&&i.$parent.$parent.pushOption(s.id,"delete"),t||(i.checked=[])}).catch(function(t){console.log(t),i.$root.errorResponseLayer(t)})}.bind(this);if(this.isReservedRow(e))return this.$root.openAlert(this.$root.trans("warning"),this.$root.trans(e.length>1?"cannot-delete-multiple":"cannot-delete"),"warning");this.$root.openAlert(this.$root.trans("warning"),this.$root.trans("delete-warning"),"warning",i,!0)},togglePublishedAt:function(t){var e=t?[t.id]:this.checked;this.$http.post(this.$root.requests.togglePublishedAt,{model:this.model.slug,id:e}).then(function(t){var i=t.data;if(i&&"type"in i)return this.$root.openAlert(i.title,i.message,"danger");for(var s in this.rows.data)e.indexOf(this.rows.data[s].id)>-1&&(this.rows.data[s].published_at=i[this.rows.data[s].id])}).catch(function(t){this.$root.errorResponseLayer(t)}),t||(this.checked=[])},getButtonKey:function(t,e){return t+"-"+e},buttonAction:function(t,e,i){var s=i?[i.id]:this.checked,n=function(o,r){this.button_loading=i?this.getButtonKey(i.id,t):t,this.$http.post(this.$root.requests.buttonAction,_.merge(r||{},{_button:{model:this.model.slug,parent:this.$parent.getParentTableName(),id:s,multiple:!i,subid:this.getParentRowId(),limit:this.pagination.limit,page:this.pagination.position,language_id:!0===this.model.localization?this.langid:0,button_id:t,ask:!!o}})).then(function(o){this.button_loading=!1;var r=o.data,a="data"in r,l=a&&1==r.data.ask,d=a&&r.data.component?r.data.component:null;if("data"in r&&!l&&("rows"in r.data&&this.updateParentData(t,e,i,r),"redirect"in r.data&&r.data.redirect&&(1==r.data.open?window.location.replace(r.data.redirect):window.open(r.data.redirect)),i||(this.checked=[])),r&&"type"in r){var u=d?{name:e.key,component:d,model:this.model,rows:this.rows.data.filter(function(t){return s.indexOf(t.id)>-1}),row:i,request:{},data:r.data.component_data||[]}:null;return this.$root.openAlert(r.title,r.message,r.type,l?function(){var t={};this.alert.component&&this.alert.component.request&&(t=_.clone(this.alert.component.request)),n(null,t)}:null,!!l||null,u)}}).catch(function(t){this.button_loading=!1,this.$root.errorResponseLayer(t)})}.bind(this);n(!0)},updateParentData:function(t,e,i,s){if(0==e.reloadAll)for(var n in s.data.rows.rows){i=s.data.rows.rows[n];for(var o in i.id in s.data.rows.buttons?this.rows.buttons[i.id]=s.data.rows.buttons[i.id]:this.rows.buttons[i.id]=[],this.rows.data)if(this.rows.data[o].id==i.id)for(var n in this.$parent.rows.data[o])this.$parent.rows.data[o][n]!=i[n]&&(this.$parent.rows.data[o][n]=i[n])}else this.updateRowsData(s.data.rows.rows,!1),this.rows.count=s.data.rows.count,this.rows.buttons=s.data.rows.buttons},isReservedRow:function(t){if("object"===U(t)&&t.length&&this.model.reserved){for(var e=0;e<t.length;e++)if(this.model.reserved.indexOf(t[e])>-1)return!0;return!1}return!!(this.model.reserved&&this.model.reserved.indexOf(t)>-1)},isReversed:function(t){return(1==t||2 in this.model.orderBy&&1==this.model.orderBy[2])&&(["id","_order"].indexOf(this.model.orderBy[0])>-1&&"asc"==this.model.orderBy[1].toLowerCase())}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"box-header box-limit"},[i("h3",{staticClass:"box-title"},[t._v(t._s(t.title)+" "),i("small",[t._v("("+t._s(t.rows.count)+")")])]),t._v(" "),t.isPaginationEnabled?i("div",{staticClass:"form-group pull-right",attrs:{title:t.trans("rows-count")}},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.pagination.limit,expression:"pagination.limit"}],staticClass:"form-control",attrs:{"data-limit":""},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.pagination,"limit",e.target.multiple?i:i[0])},t.changeLimit]}},t._l(t.pagination.limits,function(e){return i("option",[t._v(t._s(e))])}),0)]):t._e(),t._v(" "),i("div",{staticClass:"dropdown fields-list",attrs:{"fields-list":""}},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[t._v("\n                "+t._s(t.trans("rows-list"))+"\n                "),i("span",{staticClass:"caret"})]),t._v(" "),i("ul",{staticClass:"dropdown-menu menu-left dropdown-menu-right"},[t._l(t.enabled_columns,function(e,s){return t.canShowColumn(e,s)?i("li",{on:{click:function(t){return t.stopPropagation()}}},[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.enabled,expression:"column.enabled"}],attrs:{type:"checkbox","data-column":s},domProps:{checked:Array.isArray(e.enabled)?t._i(e.enabled,null)>-1:e.enabled},on:{change:function(i){var s=e.enabled,n=i.target,o=!!n.checked;if(Array.isArray(s)){var r=t._i(s,null);n.checked?r<0&&t.$set(e,"enabled",s.concat([null])):r>-1&&t.$set(e,"enabled",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"enabled",o)}}}),t._v(" "+t._s(t.columnName(s,e.name)))])]):t._e()}),t._v(" "),i("li",{staticClass:"divider",attrs:{role:"separator"}}),t._v(" "),i("li",[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.resetColumnsList(e)}}},[t._v(t._s(t.trans("default")))])])],2)]),t._v(" "),t.checked.length>0?i("div",{staticClass:"dropdown actions-list fields-list",attrs:{"data-action-list":""}},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[t._v("\n                "+t._s(t.trans("action"))+"\n                "),i("span",{staticClass:"caret"})]),t._v(" "),i("ul",{staticClass:"dropdown-menu menu-left dropdown-menu-right"},[t.model.deletable?i("li",[i("a",{on:{click:function(e){return e.preventDefault(),t.removeRow()}}},[i("i",{staticClass:"fa fa-remove"}),t._v(" "+t._s(t.trans("delete")))])]):t._e(),t._v(" "),t.model.publishable?i("li",[i("a",{on:{click:function(e){return e.preventDefault(),t.togglePublishedAt()}}},[i("i",{staticClass:"fa fa-eye"}),t._v(" "+t._s(t.trans("publish-toggle")))])]):t._e(),t._v(" "),t.hasButtons?i("li",{staticClass:"divider",attrs:{role:"separator"}}):t._e(),t._v(" "),t._l(t.availableButtons,function(e,s){return i("li",[i("a",{on:{click:function(i){return t.buttonAction(s,e)}}},[i("i",{staticClass:"fa",class:e.icon}),t._v(" "+t._s(e.name))])])})],2)]):t._e(),t._v(" "),t._l(t.getComponents("table-header"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})})],2),t._v(" "),i("div",{staticClass:"box-body box-table-body"},[i("table-rows",{attrs:{model:t.model,row:t.row,buttons:t.rows.buttons,count:t.rows.count,history:t.history,gettext_editor:t.gettext_editor,rows:t.rows,rowsdata:t.rowsData,button_loading:t.button_loading,checked:t.checked,orderby:t.orderBy,depth_level:t.depth_level},on:{"update:row":function(e){t.row=e},"update:gettext_editor":function(e){t.gettext_editor=e},"update:rowsdata":function(e){t.rowsData=e},"update:checked":function(e){t.checked=e},"update:orderby":function(e){t.orderBy=e}}})],1),t._v(" "),t.isPaginationEnabled&&t.rows.count>t.pagination.limit||t.getComponents("table-footer").length>0?i("div",{staticClass:"box-footer"},[t._l(t.getComponents("table-footer"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})}),t._v(" "),t.isPaginationEnabled&&t.rows.count>t.pagination.limit?i("ul",{staticClass:"pagination pagination-sm no-margin pull-right",attrs:{"data-pagination":""}},[t.pagination.position>1?i("li",{attrs:{"data-pagination-prev":""}},[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.setPosition(t.pagination.position-1)}}},[t._v("")])]):t._e(),t._v(" "),t._l(Math.ceil(t.rows.count/t.pagination.limit),function(e){return t.showLimit(e)?i("li",{class:{active:t.pagination.position==e}},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.setPosition(e)}}},[t._v(t._s(e))])]):t._e()}),t._v(" "),t.pagination.position<t.rows.count/t.pagination.limit?i("li",{attrs:{"data-pagination-next":""}},[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.setPosition(t.pagination.position+1)}}},[t._v("")])]):t._e()],2):t._e()],2):t._e(),t._v(" "),t.pagination.refreshing?i("refreshing"):t._e()],1)},[],!1,null,null,null).exports,Q=d(i(133).a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"gettext-table modal-open"},[i("div",{staticClass:"example-modal"},[i("div",{staticClass:"modal modal-default",staticStyle:{display:"block"}},[i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.close}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("")])]),t._v(" "),i("h4",{staticClass:"modal-title"},[t._v(t._s(t.trans("gettext-update"))+" - "+t._s(t.gettext_editor.name))])]),t._v(" "),i("div",{staticClass:"modal-body"},[i("label",[t._v(t._s(t.trans("search")))]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.trans("gettext-search")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),i("hr"),t._v(" "),t.loaded&&0==t.resultLength?i("p",[t._v(t._s(t.trans("gettext-no-match")))]):t._e(),t._v(" "),t.loaded?t._e():i("p",{staticClass:"loading"},[i("i",{staticClass:"fa fa-refresh fa-spin"}),t._v(" "+t._s(t.trans("gettext-loading")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.resultLength>0,expression:"resultLength > 0"}],staticClass:"table data-table table-bordered table-striped"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.trans("gettext-source")))]),t._v(" "),i("th",[t._v(t._s(t.trans("gettext-translation")))])])]),t._v(" "),i("tbody",t._l(t.filtratedTranslates,function(e,s){return i("tr",[i("td",[t._v(t._s(s))]),t._v(" "),i("td",{staticClass:"input",class:{edited:t.hasChange(s),plural:t.isPlural(s)}},t._l(t.getPluralLength(s),function(n){return i("textarea",{staticClass:"form-control",class:{long:t.getValue(e,n-1).length>80},attrs:{placeholder:t.getPluralsPlaceholder(s,n-1),title:t.getPluralsPlaceholder(s,n-1),"data-toggle":"tooltip"},domProps:{value:t.getValue(e,n-1)},on:{input:function(e){return t.changeText(e,s,n-1)}}})}),0)])}),0)]),t._v(" "),0!=t.limit&&t.fullCount>t.limit?i("a",{staticClass:"all-translates",on:{click:function(e){t.limit=!1}}},[t._v(t._s(t.trans("gettext-count"))+" ("+t._s(t.fullCount)+")")]):t._e()]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.saveAndClose}},[t._v(t._s(t.trans("gettext-save")))])])])])])])])},[],!1,null,null,null).exports,J=d({props:["history"],computed:{sortedHistory:function(){return _.orderBy(this.history.rows,"id","desc")}},methods:{applyChanges:function(t){this.$parent.history.fields=t.changed_fields,this.$parent.history.history_id=t.id,eventHub.$emit("selectHistoryRow",{table:this.$parent.model.slug,row_id:this.$parent.history.id,history_id:t.id,row:this.$parent.row})},date:function(t){return moment(t).format("D.M.Y H:mm")},closeHistory:function(){this.$parent.closeHistory(!0)},changedFields:function(t){var e=[];for(var i in t.changed_fields){var s=t.changed_fields[i];s in this.$parent.model.fields?e.push(this.$parent.model.fields[s].name):e.push(s)}return e.join(", ")},trans:function(t){return this.$root.trans(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"history-table"},[i("div",{staticClass:"example-modal"},[i("div",{staticClass:"modal modal-default",staticStyle:{display:"block"}},[i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.closeHistory}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("")])]),t._v(" "),i("h4",{staticClass:"modal-title"},[t._v(t._s(t.trans("history.changes")))])]),t._v(" "),i("div",{staticClass:"modal-body"},[i("table",{staticClass:"table data-table table-bordered table-striped"},[i("thead",[i("tr",[i("th",{staticClass:"td-id"},[t._v(t._s(t.trans("number")))]),t._v(" "),i("th",[t._v(t._s(t.trans("history.who")))]),t._v(" "),i("th",[t._v(t._s(t.trans("history.count")))]),t._v(" "),i("th",[t._v(t._s(t.trans("history.date")))]),t._v(" "),i("th",{staticClass:"th-history-buttons"})])]),t._v(" "),i("tbody",t._l(t.sortedHistory,function(e,s){return i("tr",{attrs:{"data-history-id":e.id}},[i("td",{staticClass:"td-id"},[t._v(t._s(t.history.rows.length-s))]),t._v(" "),i("td",[t._v(t._s(e.user?e.user.username:t.trans("history.system")))]),t._v(" "),i("td",{attrs:{"data-changes-length":""}},[i("span",{attrs:{"data-toggle":"tooltip",title:"","data-original-title":t.changedFields(e)}},[t._v(t._s(e.changed_fields.length)+" "),i("i",{staticClass:"fa fa-eye"})])]),t._v(" "),i("td",[t._v(t._s(t.date(e.created_at)))]),t._v(" "),i("td",[i("div",[i("button",{staticClass:"btn btn-sm btn-success",class:{"enabled-history":t.history.history_id==e.id},attrs:{type:"button","data-toggle":"tooltip",title:t.trans("history.show"),"data-original-title":t.trans("history.show-changes")},on:{click:function(i){return t.applyChanges(e)}}},[i("i",{staticClass:"fa fa-eye"})])])])])}),0)])]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.closeHistory}},[t._v(t._s(t.trans("close")))])])])])])])])},[],!1,null,null,null);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var tt=d({props:["model_builder","langid","ischild","parentrow","activetab","hasparentmodel"],name:"model-builder",components:{FormBuilder:V,ModelRowsBuilder:K,GettextExtension:Q,History:J.exports},data:function(){return{model:this.model_builder,sizes:[{size:8,key:"small",name:"Small",active:!1,disabled:!1},{size:6,key:"medium",name:"Medium",active:!1,disabled:!1},{size:4,key:"big",name:"Big",active:!1,disabled:!1},{size:0,key:"full",name:"Full width",active:!1,disabled:!1}],activeSize:null,row:this.emptyRowInstance(),search:{column:this.$root.getModelProperty(this.model_builder,"settings.search.column",null),query:null,query_to:null,used:!1,interval:!1},rows:{data:[],buttons:{},count:0,loaded:!1,save_children:[]},history:{history_id:null,id:null,rows:[],fields:[]},layouts:[],registered_components:[],language_id:null,selected_language_id:null,progress:!1,depth_level:0,gettext_editor:null}},created:function(){this.root=this.$root.$http.$options.root,this.setDeepLevel()},mounted:function(){this.checkIfCanShowLanguages(),this.initSearchSelectboxes(),this.resetSearchBar(),this.updateParentChildData()},watch:{sizes:{deep:!0,handler:function(t){this.activeSize=t.filter(function(t){if(1==t.active){var e=this.getStorage();e[this.model.slug]=t.size,e[this.model.slug+"_default"]=this.$root.getModelProperty(this.model,"settings.grid.default"),localStorage.sizes=JSON.stringify(e)}return 1==t.active}.bind(this))[0].size,this.activeSize}},search:{deep:!0,handler:function(t,e){this.reloadSearchBarSelect()}},activetab:function(t){!0===t&&this.sendRowsData()},parentrow:function(t,e){if(!k.a.isEqual(t,e)){for(var i=null,s=0;s<this.$children.length;s++)if("reloadRows"in this.$children[s]){i=this.$children[s];break}i&&i.reloadRows()}},layouts:function(t){for(var e in t){var i=t[e];this.registerComponents(t),"blade"==i.type&&this.$root.runInlineScripts(i.view)}}},events:{proxy:function(t,e){this.$broadcast(t,e)},sendParentRow:function(){return eventHub.$emit("getParentRow",{model:this.model,slug:this.model.slug,row:this.row,rows:this.rows.data,count:this.rows.count,component:this}),!0},reloadRows:function(t){this.$broadcast("reloadRows",t)}},methods:{updateSearchQuery:k.a.debounce(function(t,e){this.search[t]=e.target.value},300),languageOptionsSearchFilter:function(t){return this.$root.languageOptions(t,this.model.fields[this.search.column])},showHistory:function(t){this.$http.get(this.$root.requests.get("getHistory",{model:this.model.slug,id:t.id})).then(function(e){var i=e.data;if(i.length<=1)return this.$root.openAlert(this.$root.trans("info"),this.$root.trans("no-changes"),"warning");this.history.id=t.id,this.history.rows=i}).catch(function(t){this.$root.errorResponseLayer(t)})},getComponents:function(t){var e=this;return this.layouts.filter(function(i){return-1!==e.registered_components.indexOf(i.name)&&i.position==t}).map(function(t){return e.getComponentName(t.name)})},registerComponents:function(t){for(var e=0;e<t.length;e++){var i,s=t[e].name,n=t[e].view;if("vuejs"==t[e].type)try{i=this.$root.getComponentObject(n)}catch(i){console.error("Syntax error in component "+t[e].name+".Vue\n",i);continue}else(n=$(n)).find("script").remove(),n.find("style").remove(),i={template:'<div class="my-component" data-component="'+s+'">'+n.html()+"</div>"};this.registered_components.push(s),Vue.component(this.getComponentName(s),i)}},getComponentName:function(t){return t+"Layout"},updateParentChildData:function(){this.$watch("rows.data",function(t){this.sendRowsData()})},sendRowsData:function(){var t={table:this.model.slug,slug:this.model.slug,model:this.model,rows:this.rows.data,count:this.rows.count,depth_level:this.depth_level};eventHub.$emit("rowsChanged",t)},resetSearchBar:function(){this.$watch("search.column",function(t,e){e&&e in this.model.fields&&-1!==["select","option"].indexOf(this.model.fields[e].type)&&(this.search.query=null),this.search.interval=!1,this.reloadDatetimeSearch()})},setDeepLevel:function(){for(var t=this.$parent,e=0;"base-page-view"!=t.$options.name;)"model-builder"==t.$options.name&&e++,t=t.$parent;this.depth_level=e},trans:function(t){return this.$root.trans(t)},initSearchSelectboxes:function(){window.js_date_event=document.createEvent("HTMLEvents");var t=!1;js_date_event.initEvent("change",!0,!0),$("#"+this.getFilterId+" .js_chosen").chosen({disable_search_threshold:5}).on("change",function(){0==t?(t=!0,this.dispatchEvent(js_date_event)):t=!1})},reloadDatetimeSearch:function(){var t=this;if(this.isDate){var e=this.search.column;$("#"+this.getFilterId+" .js_date").datetimepicker({lang:this.$root.locale,format:"created_at"==e?"d.m.Y":this.model.fields[e].date_format,timepicker:"created_at"!=e&&"date"!=this.model.fields[e].type,datepicker:"created_at"==e||"time"!=this.model.fields[e].type,scrollInput:!1,onChangeDateTime:function(e,i){t.search[void 0===i.attr("data-search-date")?"query_to":"query"]=moment(e).format("DD.MM.Y")}})}},getParentTableName:function(t){var e=this.$parent.row;return this.hasparentmodelMutated&&"object"==Z(this.hasparentmodelMutated)&&"slug"in this.hasparentmodelMutated?this.hasparentmodelMutated.slug:!0===t||e&&"id"in e&&!1!==this.hasparentmodelMutated?this.$parent.model.slug:0},hasChilds:function(){var t=0;for(var e in this.model.childs)t++;return t},getStorage:function(){return $.parseJSON(localStorage.sizes||"{}")||{}},enableOnlyFullScreen:function(){for(var t in this.sizes)3!=t&&(this.sizes[t].disabled=!0,this.sizes[t].active=!1);return this.sizes[3].active=!0},checkActiveSize:function(t){var e=this.getStorage(),i=this.$root.getModelProperty(this.model,"settings.grid.default");if(!this.canShowForm||this.isSingle)return this.enableOnlyFullScreen();if(this.model.slug in e&&e[this.model.slug+"_default"]==i){for(var s in this.sizes)if(this.sizes[s].size==e[this.model.slug])return this.sizes[s].active=!0}else if(null!==i)for(var s in this.sizes)if(this.sizes[s].size==i||this.sizes[s].key==i)return this.sizes[s].active=!0;return(t=Object.keys(t)).length>=5&&(this.sizes[2].disabled=!0),this.hasChilds()>0?this.sizes[3].active=!0:t.length>5?this.sizes[3].active=!0:t.length<=1?this.sizes[2].active=!0:5==t.length?this.sizes[0].active=!0:void(this.sizes[1].active=!0)},changeSize:function(t){if(1==t.disabled)return!1;for(var e in this.sizes)this.sizes[e].active=!1;t.active=!0},saveLanguageFilter:function(t){return t=t.sort(function(t,e){return parseInt(e.id)-parseInt(t.id)}),this.buffer.rows=t,this.$broadcast("updateBufferRows"),t},checkIfCanShowLanguages:function(){for(var t=!1,e=0;e<this.$parent.$children.length;e++)for(var i=this.$parent.$children[e];"model"in i;)1==i.model.localization&&(t=!0),i=i.$parent;this.$root.languages_active=!!t},getSearchingColumnName:function(t){if("id"==t)return this.$root.trans("number");if("created_at"==t)return this.$root.trans("created-at");if(!(t&&t in this.model.fields))return this.trans("search-all");var e=this.model.fields[t];return e.name&&e.name.length>20?e.name.substr(0,20)+"...":e.name},reloadSearchBarSelect:function(){var t=this;this.$nextTick(function(){$("#"+t.getFilterId+" .js_chosen").trigger("chosen:updated")})},closeHistory:function(t){this.history.id=null,this.history.rows=[],t||(this.history.fields=[],this.history.history_id=null)},newRowTitle:function(){return this.$root.getModelProperty(this.model,"settings.buttons.insert",this.trans("new-row"))},resetForm:function(){this.row=this.emptyRowInstance()},emptyRowInstance:function(){var t={};return this.parentrow&&this.model&&null!=this.model.foreign_column&&(t[this.model.foreign_column[this.getParentTableName()]]=this.parentrow.id),t},getModel:function(t){return"string"==typeof t?k.a.cloneDeep(this.$root.models[this.model.slug]):b(t)}},computed:{hasparentmodelMutated:function(){return[null,void 0].indexOf(this.hasparentmodel)>-1||this.hasparentmodel},canBeInterval:function(){var t=this.search.column;return["created_at","id"].indexOf(t)>-1||t in this.model.fields&&["integer","decimal","date","datetime","time"].indexOf(this.model.fields[t].type)>-1},isOpenedRow:function(){return this.row&&"id"in this.row},isWithoutParentRow:function(){return 1==this.model.without_parent&&this.parentrow&&!0!==this.$parent.isOpenedRow&&1==this.hasparentmodelMutated},getFilterId:function(){return"js_filter"+this.getModelKey},getModelKey:function(){return this.model.slug+"-"+this.getParentTableName()},isEnabledGrid:function(){return!1!==this.$root.getModelProperty(this.model,"settings.grid.enabled")&&!0!==this.$root.getModelProperty(this.model,"settings.grid.disabled")},isSingle:function(){var t=1==this.model.minimum&&1==this.model.maximum;return t&&(this.row=this.rows.data[0]||this.emptyRowInstance(),this.row),t},canShowRows:function(){return!this.isSingle||(this.enableOnlyFullScreen(),!1)},canAddRow:function(){return 0!=this.model.insertable&&(0==this.model.maximum||!(this.model.maximum<=this.rows.count))},canShowForm:function(){return!(!this.isOpenedRow&&!this.canAddRow||this.isOpenedRow&&0==this.model.editable)},hasRows:function(){return 0==this.rows.loaded&&1!=this.model.maximum||this.rows.data.length>0},canShowSearchBar:function(){var t=this.$root.getModelProperty(this.model,"settings.search.enabled",null);return!0===t||!1!==t&&(!0===this.search.used||(0==this.model.maximum||this.model.maximum>=10)&&this.rows.count>=10)},getSearchableFields:function(){var t=[];for(var e in this.model.fields){var i=this.model.fields[e];"belongToMany"in i||"multiple"in i||"removeFromForm"in i&&"hidden"in i||"password"==i.type||t.push(e)}return t},isSearch:function(){return!(this.isCheckbox||this.isDate||this.isSelect)},isCheckbox:function(){var t=this.search.column;return!!(t&&t in this.model.fields&&"checkbox"==this.model.fields[t].type)},isDate:function(){var t=this.search.column;return"created_at"==t||!!(t&&t in this.model.fields&&["date","datetime","time"].indexOf(this.model.fields[t].type)>-1)},isSelect:function(){var t=this.search.column;return!!(t&&t in this.model.fields&&["select","radio"].indexOf(this.model.fields[t].type)>-1)},isSearching:function(){return 1==this.search.used},resetInerval:function(){this.search.query="",this.search.query_to=""},isLocaleModel:function(){if(!0===this.model.localization)return!0;for(var t in this.model.fields)if(1==this.model.fields[t].locale)return!0;return!1},languages:function(){return this.$root.languages}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.getComponents("top"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})}),t._v(" "),0==t.languages.length&&t.isLocaleModel?i("div",{staticClass:"alert alert-danger"},[i("strong",[t._v(t._s(t.trans("warning"))+"!")]),t._v(" "),i("p",[t._v(t._s(t.trans("languages-missing")))])]):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.canShowForm||t.hasRows&&t.canShowRows||t.isSearching,expression:"canShowForm || (hasRows && canShowRows || isSearching)"}],class:["box",{"single-mode":t.isSingle,"box-warning":t.isSingle}],attrs:{"data-depth":t.depth_level}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.ischild&&(!t.model.in_tab||t.isEnabledGrid||t.canShowSearchBar)||!t.isSingle&&(t.isEnabledGrid||t.canShowSearchBar),expression:"ischild && (!model.in_tab || isEnabledGrid || canShowSearchBar) || ( !isSingle && (isEnabledGrid || canShowSearchBar))"}],staticClass:"box-header",class:{"with-border":t.isSingle}},[t.ischild?i("h3",{staticClass:"box-title"},[t._v(t._s(t.model.name))]):t._e(),t._v(" "),t.model.title&&t.ischild?i("span",{staticClass:"model-info",domProps:{innerHTML:t._s(t.model.title)}}):t._e(),t._v(" "),t.isSingle?t._e():i("div",{staticClass:"pull-right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.canShowSearchBar,expression:"canShowSearchBar"}],staticClass:"search-bar",class:{interval:t.search.interval},attrs:{"data-search-bar":"",id:t.getFilterId}},[i("div",{staticClass:"input-group input-group-sm"},[i("div",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-expanded":"false"}},[t._v(t._s(t.getSearchingColumnName(t.search.column))+"\n                                "),i("span",{staticClass:"caret"})]),t._v(" "),i("ul",{staticClass:"dropdown-menu"},[i("li",{class:{active:!t.search.column},attrs:{"data-field":""}},[i("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.search.column=null}}},[t._v(t._s(t.trans("search-all")))])]),t._v(" "),i("li",{class:{active:"id"==t.search.column},attrs:{"data-field":"id"}},[i("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.search.column="id"}}},[t._v(t._s(t.getSearchingColumnName("id")))])]),t._v(" "),t._l(t.getSearchableFields,function(e){return i("li",{class:{active:t.search.column==e},attrs:{"data-field":e}},[i("a",{attrs:{href:"#"},on:{click:function(i){i.preventDefault(),t.search.column=e}}},[t._v(t._s(t.getSearchingColumnName(e)))])])}),t._v(" "),i("li",{class:{active:"created_at"==t.search.column},attrs:{"data-field":"created_at"}},[i("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.search.column="created_at"}}},[t._v(t._s(t.getSearchingColumnName("created_at")))])])],2)]),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:t.isSearch,expression:"isSearch"}],staticClass:"form-control",attrs:{type:"text","data-search-text":"",placeholder:t.trans("search")+"..."},on:{input:function(e){return t.updateSearchQuery("query",e)}}}),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:t.isDate,expression:"isDate"}],staticClass:"form-control js_date",attrs:{type:"text","data-search-date":"",readonly:""}}),t._v(" "),i("select",{directives:[{name:"show",rawName:"v-show",value:t.isCheckbox,expression:"isCheckbox"},{name:"model",rawName:"v-model",value:t.search.query,expression:"search.query"}],staticClass:"form-control",attrs:{type:"text"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.search,"query",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0"}},[t._v(t._s(t.trans("off")))]),t._v(" "),i("option",{attrs:{value:"1"}},[t._v(t._s(t.trans("on")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelect,expression:"isSelect"}],staticClass:"select"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.search.query,expression:"search.query"}],staticClass:"form-control js_chosen",attrs:{"data-search-select":"","data-placeholder":t.trans("get-value")},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.search,"query",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:""}},[t._v(t._s(t.trans("show-all")))]),t._v(" "),t._l(t.languageOptionsSearchFilter(t.isSelect?t.model.fields[t.search.column].options:[]),function(e){return i("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])})],2)]),t._v(" "),t.canBeInterval?i("div",{staticClass:"interval",attrs:{"data-interval":"","data-toggle":"tooltip","data-original-title":"Interval"}},[i("button",{staticClass:"btn",class:{"btn-default":!t.search.interval,"btn-primary":t.search.interval},on:{click:function(e){t.search.interval=!t.search.interval}}},[i("i",{staticClass:"fa fa-arrows-h"})])]):t._e(),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:t.search.interval&&t.isSearch,expression:"search.interval && isSearch"}],staticClass:"form-control",attrs:{type:"text","data-search-interval-text":"",placeholder:t.trans("search")+"..."},on:{input:function(e){return t.updateSearchQuery("query_to",e)}}}),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:t.search.interval&&t.isDate,expression:"search.interval && isDate"}],staticClass:"form-control js_date",attrs:{type:"text","data-search-interval-date":"",readonly:""}}),t._v(" "),t.search.query||t.search.query_to?i("div",{staticClass:"interval",attrs:{"data-reset-interval":"","data-toggle":"tooltip","data-original-title":t.trans("reset")}},[i("button",{staticClass:"btn btn-default",on:{click:function(e){return t.resetInerval()}}},[i("i",{staticClass:"fa fa-times"})])]):t._e()])]),t._v(" "),t.isEnabledGrid?i("ul",{staticClass:"pagination pagination-sm no-margin",attrs:{"data-toggle":"tooltip","data-original-title":t.trans("edit-size")}},t._l(t.sizes,function(e){return i("li",{class:{active:e.active,disabled:e.disabled},attrs:{"data-size":e.key}},[i("a",{attrs:{href:"#",title:""},on:{click:function(i){return i.preventDefault(),t.changeSize(e)}}},[t._v(t._s(e.name))])])}),0):t._e()])]),t._v(" "),i("div",{staticClass:"box-body"},[i("div",{class:{row:!0,"flex-table":0==t.activeSize}},[!1!==t.activetab?i("div",{directives:[{name:"show",rawName:"v-show",value:t.canShowForm,expression:"canShowForm"}],staticClass:"col col-form col-md-12 col-sm-12",class:["col-lg-"+(12-t.activeSize)]},[i("form-builder",{attrs:{progress:t.progress,rows:t.rows,history:t.history,model:t.model,langid:t.selected_language_id?t.selected_language_id:t.langid,selectedlangid:t.selected_language_id,canaddrow:t.canAddRow,hasparentmodel:t.hasparentmodelMutated,gettext_editor:t.gettext_editor,depth_level:t.depth_level,row:t.row},on:{"update:progress":function(e){t.progress=e},"update:rows":function(e){t.rows=e},"update:selectedlangid":function(e){t.selected_language_id=e},"update:gettext_editor":function(e){t.gettext_editor=e},"update:row":function(e){t.row=e}}})],1):t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasRows&&t.canShowRows,expression:"hasRows && canShowRows"}],staticClass:"col col-rows col-md-12 col-sm-12",class:["col-lg-"+(12-(12-t.activeSize))]},[i("model-rows-builder",{attrs:{model:t.model,rows:t.rows,row:t.row,langid:t.selected_language_id?t.selected_language_id:t.langid,progress:t.progress,search:t.search,iswithoutparent:t.isWithoutParentRow,activetab:t.activetab,gettext_editor:t.gettext_editor,depth_level:t.depth_level,history:t.history},on:{"update:model":function(e){t.model=e},"update:rows":function(e){t.rows=e},"update:row":function(e){t.row=e},"update:progress":function(e){t.progress=e},"update:gettext_editor":function(e){t.gettext_editor=e}}})],1)]),t._v(" "),t._l(t.model.childs,function(e){return!t.isOpenedRow&&1!=t.getModel(e).without_parent||!0===t.getModel(e).in_tab?t._e():i("model-builder",{key:t.getModel(e).slug,attrs:{hasparentmodel:t.hasparentmodelMutated,langid:t.langid,ischild:!0,model:t.getModel(e),activetab:t.activetab,parentrow:t.row}})})],2)]),t._v(" "),t._l(t.getComponents("bottom"),function(e){return i(e,{key:e,tag:"component",attrs:{model:t.model,row:t.row,rows:t.rows.data}})}),t._v(" "),t.history.id?i("history",{attrs:{history:t.history}}):t._e(),t._v(" "),t.gettext_editor?i("gettext-extension",{attrs:{gettext_editor:t.gettext_editor},on:{"update:gettext_editor":function(e){t.gettext_editor=e}}}):t._e()],2)},[],!1,null,null,null).exports,et=d({name:"base-page-view",data:function(){return{}},props:["langid"],mounted:function(){"function"==typeof ga&&ga("send","pageview","auto")},computed:{model:function(){var t=_.cloneDeep(this.$root.models[this.$route.params.model]);return t?b(t):null},getGroup:function(){if(this.model.slug in this.$root.models)return!1;for(var t in this.$root.models)if(this.model.slug in this.$root.models[t].submenu)return this.$root.models[t];return!1}},components:{ModelBuilder:tt},methods:{trans:function(t){return this.$root.trans(t)}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.model?i("section",{staticClass:"content-header"},[i("h1",[t._v("\n            "+t._s(t.model.name)+"\n            "),i("small",{domProps:{innerHTML:t._s(t.model.title)}})]),t._v(" "),i("ol",{staticClass:"breadcrumb"},[i("li",[i("a",{attrs:{href:"#"}},[i("i",{staticClass:"fa fa-dashboard"}),t._v(" "+t._s(t.trans("admin")))])]),t._v(" "),t.getGroup?i("li",[t._v(t._s(t.getGroup.name))]):t._e(),t._v(" "),i("li",{staticClass:"active"},[i("a",{staticClass:"active"},[i("i",{class:["fa",t.model.icon]}),t._v(" "+t._s(t.model.name))])])])]):t._e(),t._v(" "),t.model?i("section",{staticClass:"content"},[i("model-builder",{key:t.model.slug,attrs:{model_builder:t.model,langid:t.langid,dusk:"model-builder"}})],1):t._e()])},[],!1,null,null,null).exports,it=new s.default({routes:[{path:"*",component:x},{path:"/page/:model",name:"admin-model",component:et}]});i(150),window.Vue=i(145),window.eventHub=new Vue,Vue.use(n.default),Vue.use(o.default.Plugin),Vue.use(s.default),window.VueApp=new Vue(w(it))},2:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i}},[[149,1,2]]]);